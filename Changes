{{$NEXT}}

3.035     2013-09-24 10:48:16 Europe/Berlin

 - Added support for implicit matching aggregates,
   to denote all matching networks inside an area or inside a zone.
   E.g. any:[ip = 10.8.0.0/16 & area:x]
 - Added new keyword 'has_unenforceable;' to selectively suppress 
   warnings about unenforceable rules.
   - If added to a service, unenforceable rules of this service
     are silently ignored.
   - If added to a security zone (i.e aggregate with mask = 0),
     all unenforceable rules with source and destination inside this zone
     are silently ignored.
 - Bridged network supports attribute 'owner' now.
 - Fixed bug: auto interface of network can be used now.
   i.e interface:[network.x].[auto]
 - Attributes of aggregate are now propagated into all zones of
   a cluster of zones.
 - Fixed endless loop when parsing "network:x={host}"
 - Identity NAT no longer generates NAT rules for device.

3.034     2013-08-28 17:57:24 Europe/Berlin

 - Fixed wrongly sorted IP addresses in object-groups introduced in 3.033.

3.033     2013-08-28 16:26:33 Europe/Berlin

 - A NAT definition can be given at an area now.
   This applies the NAT definition to all networks inside the area, 
   which don't already have a NAT definition.
   Only dynamic and hidden NAT can be used here.
   NAT definitions from multiple areas are applied from smaller areas first.
 - The concept of identity NAT has been introduced.
   Use "nat:x = { identity; }' to define identity NAT,
   i.e. the address remains unchanged.
   Identity NAT is used to mask a network from the NAT definition of an area.
 - A bridged network can be given a NAT definition now, but only identity NAT
   is permitted.
 - NAT can be bound to a bridged interface now. 
   Only hidden NAT should be used here.
 - Global NAT isn't supported any longer. 
   This should be migrated to NAT at area.
 - New router attribute 'routing'.
   This value is inherited by all interfaces having no router attribute
   of their own.
 - Permit email address 'guest' for anonymous login in policy-web.
 - No longer allow ports in global permit.
 - Object-groups are reused even if used in ACLs bound to interfaces 
   in different NAT doamains.
 - Fixed check for redundant rules with global permit.
 - Fixed check for useless overlaps. 
   Check is done even if check for duplicate / redundant rules is disabled.
 - Fixed check for unenforceable rules. Don't check disabled services.
 - Ignore bridged interface in check for duplicate routes.
 - Ignore duplicate networks and aggregates in automatic group resulting
   from different interfaces connected to the same object.
 - Mark secondary ip address as 'secondary' in generated code for NX-OS.

3.032     2013-06-24 15:05:25 Europe/Berlin

 - New 'managed = local' option for device that filters only local traffic.
   A list of local ip/prefix pairs is given in new attribute 'filter_only'.
   All attached networks, not filtered by some other non-local
   packet filter, must match some ip of 'filter_only'.
   Only traffic with source and destination matching 'filter_only'
   is filtered. All other traffic passes unfiltered.
   This is implemented by adding deny and permit rules:
   - permit local traffic
   - deny local traffic
   - permit any other traffic
 - Fixed check for unused 'overlaps' declarations.

3.031     2013-05-31 10:15:14 Europe/Berlin

 - Fixed check for useless pathrestriction inside security zone.
 - Fixed check for unenforceable rules between security zone with 
   pathrestriction at unmanaged device.
 - Fixed syntax check for aggregate.
 - netspoc now reads from stdin, if no arg is given.
   Filename "-" for reading stdin isn't supported any longer.
 - Fixed performance and tests for perl5.18.0.

3.030     2013-04-24 16:47:17 Europe/Berlin

 - Fixed access to layer3 interface of bridged ASA.

3.029     2013-04-17 15:53:38 Europe/Berlin

 - Fixed duplicate ACL line from unmanaged virtual interface.
 - Fixed superfluous warning on unused owner.
 - Changed default: check_service_unknown_owner = 0 (was 'warn').
 - Minor fixes with NAT and minimal topology.
 - Moved programs newpolicy and newpolicy.pl to project Netspoc-Approve.

3.028     2013-03-26 12:08:23 Europe/Berlin

 - Fixed minor bug: Prevent deep recursion in set_routes_in_zone.

3.027     2013-03-25 13:07:19 Europe/Berlin

 - Fixed minor bug: Prevent deep recursion in set_zone1 and set_zone_cluster.

3.026     2013-03-08 11:49:38 Europe/Berlin

 - Fixed minor bug: Handle only managed routers of a VRF.
  This prevents warning messages "uninitialized value".

3.025     2013-03-06 15:19:51 Europe/Berlin

 - Allow mixed managed and unmanaged VRFs on the same device.

3.024     2013-02-19 10:11:28 Europe/Berlin

 - Added attribute 'sub_owner' to service definition.
   Typically, the owner is definied at networks (or hosts).
   A service S implicitly inherits its owner from a network N,
   if S defines access to objects of network N.
   The owner of network N can delegate the user management 
   of a service S to some owner X.
   In this use case, S gets an explicit sub_owner X.
   X is only allowed to change users of S.
   X is not allowed to change the definition of S.
 - Removed support for model VPN3K (Cisco VPN 3000)

3.023     2013-02-04 16:34:46 Europe/Berlin

- Better handling of unnumbered interface at managed device.
- Fixed optimization of virtual loopback interfaces.
- Fixed more nondeterminism in generated code.

3.022     2013-01-17 11:58:31 Europe/Berlin

- Allow a single virtual interface.
- Added support for NX-OS
  - ACLs
  - object-groups
  - routing
  - VRF support
- no longer support syntax srv, policy, etc.
- no longer support syntax admin:xx 
- no longer generate icmp, http, telnet, ssh commands for ASA/PIX

3.021     2012-11-13 14:37:55 Europe/Berlin

- Use email address directly as admins / watchers attributes of owner.
  Old syntax with admin:xx is still supported.
- Support ASA as EZVPN client: model = ASA, EZVPN
  This assumes, that appropriate commands vpdn and vpnclient 
  have been configured manually.
- Allow virtual interface between managed and unmanaged router.
- Again fixed nondeterminism when printing host routes to physical interface 
  of XRRP group.

3.020     2012-10-30 11:51:32 Europe/Berlin

- When generating static routes for an interface of ASA with site-to-site VPN,
  the device needs an explicit route for each peer. 
  This has been implemented.
- Added support for NAT of tunneled IPSec traffic.
- No longer reject NAT for a network located inside the security zone 
  of a network with mask 0 (the Internet).
- New attribute 'alias' for owners.
  This is used to display an alternate / changed name in Netspoc-Web.
- If overlapping host ranges are added to a group, a warning is printed now.
- Joining of adjacent subnets didn't work in some cases. This has been fixed.
- Fixed check for duplicate id at different VPN interfaces.
- Fixed nondeterminism when printing host routes to physical interface 
  of XRRP group.

3.019     2012-09-20 11:02:33 Europe/Berlin

- No longer generate IPSec commands "isakmp identity", "isakmp nat-traversal"
- Removed option warn_pix_icmp_code. ICMP code is ignored silently now.
- Many consistency checks have been moved to an earlier phase 
  of the compilation process.
- Fixed some minor bugs.
- Added more test cases.

3.018     2012-08-15 14:22:45 Europe/Berlin

- Only check aggregates/supernets with mask = 0 for transient any rules.
- Get owner of zone at loopback interface from owner of interface.

3.017     2012-08-10 14:26:49 Europe/Berlin

- Fixed bug with multiple aggregates having same IP.

3.016     2012-08-09 15:43:38 Europe/Berlin

- Fixed parser for reading ip address in
  any:X = { link = network:Y; ip = i.i.i.i/n; }
- Optimize redundant port for iptables.
  This is necessary for cases where global optimization doesn't work
  because similar rules are applied to different objects which get the
  same IP from NAT.

3.015     2012-06-22 11:31:59 Europe/Berlin

- Introduced new attribute 'detailed_crypto_acl' for crypto definition.
  This changes generated crypto ACL at VPN hub from
    permit ip any <destination networks>
  to
    permit ip <used local networks> <destination networks>
  Used local networks are automatically derived from current filter rules.
  This attribute is only valid if remote device is unmanaged.
  It is used if "any" can't be configured at remote device.

3.014     2012-06-05 10:47:03 Europe/Berlin

- Fixed order of generated ACL from automatic group network:[area:X]
- No longer allow border of area at unmanaged interface
  having pathrestriction. Otherwise we get inconsistent owners 
  for zones having pathrestriction at unmanaged device.
- Introduced new attribute 'show_all' for owner.
  This is used in Netspoc-Web to have an owner which sees 
  the whole topology and all services. This attribute is only valid 
  for the owner of an area which spans the whole topology.
- Added check for useless pathrestriction at unmanaged interfaces.
- Minor bugfixes.

3.013     2012-05-15 11:04:49 Europe/Berlin

- Fixed bug with duplicate elements in object-groups.
  A pair of redundancy interfaces wasn't detected as identical
  - if these interfaces were loopback interfaces and
  - if the corresponding loopback network didn't have 
    any identical network from NAT or from aggregates.
- Fixed bug with missing networks in automatic group
  if security zone had pathrestriction at unmanaged device.
  Now, network:[any:X] holds all networks inside zone of any:X,
  regardless of pathrestrictions defined at unmanaged devices
  inside the zone.
- Removed recently introduced attribute 'subnet' for hosts.
  It should be replaced by real networks with attribute 'subnet_of'.
- Changed handling of security levels for ASA / PIX:
  - Introduced attribute 'security_level' at interface to 
    explicitly set the security level.
  - Derive security level if interface name is matching 
    'inside' or 'outside'. Previously it had to be equal.
  - No longer abort, if no security level is given, 
    but use value 50 as default.
  - Allow traffic between equal security levels.

3.012     2012-04-24 14:25:46 Europe/Berlin

- Fixed bug with no_in_acl together with crosslink.
  This fixes useless permit rules at interface with attribute 'no_in_acl'
  if a device had both 'no_in_acl' interface and crosslink interface.
  In this case, the crosslink interface now gets ougoing ACL with
  "permit ip any any".
- Two small fixes in check for use of hidden object in rule.
- Bug fix: Copy attribute "routing" to secondary interface.
  Otherwise static routes would be generated for interface with 
  dynamic routing enabled.

3.011     2012-04-23 13:11:16 Europe/Berlin

- Use largest supernet in zone for routing.
  Add largest supernet inside the zone, if available. This is needed,
  because we use the supernet in secondary optimization too. Moreover
  this reduces the number of routing entries. It isn't sufficient to
  solely use the supernet because network and supernet can have
  different next hops at end of path. For an aggregate, take all
  matching networks inside the zone. These are supernets by design.
- network:[<loopback-interface>] results in an interface now.
  The loopback network is never used. This fixes some ACLs.
- Relaxed check for types in intersection of group.
  Different types of objects are permitted in intersection now.
  But interface and auto-interface of same router are still rejected.
- Improved runtime of local optimization.
- Fixed secondary optimization: no longer use a network which has
  subnet in other zones. We must not change to network having subnet
  in other zone, because then we had to do check_supernet_rules for
  newly created secondary rules.
- Improved secondary optimization: Use largest supernet in zone.
- Don't apply secondary optimization to network with ID-hosts.
  This could lead to unwanted permission if software client uses spoofed
  IP address.
- No longer generate reverse rules for ASA,VPN with no_crypto_filter
  ASA,VPN with no_crypto_filter attribute set, use ACL at cleartext interface.
  Hence no reverse rules are needed.
- Allow simple protocols in global:permit.
- Internally renamed attributes and exported global variables,
  e.g. %poliocies -> %services, srv -> prt.
- Removed unused syntax for host:id:user (without @domain)
- Rules using protocol with attribute no_check_supernet_rules 
  aren't checked for transient supernet rules.
- Changed default values for config options:    
  check_service_unknown_owner => 'warn',
  check_service_multi_owner => 'warn',
  Permit and ignore old options check_policy_multi_owner,
  check_policy_unknown_owner to ease migration.

3.010     2012-03-28 15:03:18 Europe/Berlin

- Syntax for aggregates is extended to have an optional ip/mask
  any:X = { link = network:Y; ip = i.i.i.i/n; }
  If no ip is given, it defaults to 0/0.
  This generates aggregated ACLs with ip/mask, 
  effectively allowing all matching networks to pass.
- Automatic group  network:[any:X]  holds all networks matching any:X 
  inside the security zone, where any:X is defined.
- Attribute 'route_hint' of network is changed to 'has_subnets'.
  This allows the network to have subnets.
  Networks with 'has_subnets' can now be used in rules and are allowed 
  to have hosts.
- Improvements in checks for missing rules on path:
  - checks are applied now to all rules having supernets 
    as source or destination.
  - checks for automatically generated reverse rules at stateless devices
    are left out, if there is some stateful managed device on path.
  - if only a single network matches in a zone, it is sufficient 
    to have a rule with this single network. 
    It is no longer required to use an aggregate with the same size 
    as in the original rule.
- The modifier 'no_check_supernet_rules' can be added to protocol definitions.
  This disables check for missing rules for rules having such a protocol.
- Redundant rules from networks in subnet relation are detected now 
  and a warning is given.
- Attribute 'owner' is inherited from a network to its subnets.
- Networks in subnet relation are checked to have consistent NAT definition.

3.009     2012-03-23 14:05:22 Europe/Berlin

- Added support for two or more networks behind EZVPN devices.
- Certificate name is stored now in attribute 'id' 
  of remote tunnel interface and now longer at the remote network.
  Old syntax is still suported.

3.008     2012-03-06 16:53:55 Europe/Berlin

- Added support for anyconnect clients of ASA 8.4.
- Added flag 'disabled' to disable a service.
- Copy raw files to output directory for better integration 
  with Netspoc-Approve.
- Check for unused raw files. 
  Check can be configured using option '-check_raw=0|1|warn'.
- Added option '-check_unused_protocols=0|1|warn'.
- Check overlapping ranges for consistent owner.
- Disabled old syntax 'policy:'.
  Old syntax can still be enabled using command line switch 'old_syntax'.
- Added option '-owner' to command 'print-group'.

3.007     2012-02-20 15:54:32 Europe/Berlin
- Print host NAT commands first if used together with dynamic NAT.
  Print host NAT for ASA 8.4 with line number 1.
- Allow simple protocol descriptions like 'tcp <port>' directly in rules and 
  protocolgroups now.
- Attribute 'type' of virtual interfaces is optional now. If omitted, 
  no code to permit the redunancy protocol is generated.
- New attribute 'subnet' for hosts as alternate syntax to define a range.
  Syntax is "subnet = ip/{prefix|mask}".
- Generalized reading of mask for network and nat.
  Added ip = i.i.i.i/m.m.m.m as valid syntax.
- Disabled old syntax srv, service, servicegroup.
  Old syntax can still be enabled using command line switch 'old_syntax'.
- Prepare migration of keyword 'policy' to 'service'.
  We will change 'policy:' to 'service:'. This version allows both
  keywords interchangeable.
- Fixed bug in parser which allowed accepted names like type:xx:name 
  by mistake.
- Fixed another occurence of bug #108480 in perl versions 5.14.*.

3.006     2012-02-06 14:12:09 Europe/Berlin
- Support new radius_attribute "authorization-required"
  for tunnel-group general-attributes.
- We will migrate 'service' to 'protocol', 'srv' to 'prt', 'servicegroup'
  to 'protocolgroup'. This version allows both keywords interchangeably.

3.005     2012-01-31 16:53:10 Europe/Berlin
- Fixed dynamic NAT for ASA 8.4, use range and host in out-objects.
- Support new radius_attributes 
  authorization-server-group, username-from-certificate 
  for tunnel-group general-attributes. 
- Fixed check for overlap of interface with subnet.
- Added workaround for bug #108480 of perl 5.14 series.

3.004     2012-01-24 18:22:13 Europe/Berlin
- Added support for changed NAT commands of ASA version 8.4.
