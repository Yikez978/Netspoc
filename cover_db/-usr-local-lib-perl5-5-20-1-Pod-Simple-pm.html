<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/local/lib/perl5/5.20.1/Pod/Simple.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/local/lib/perl5/5.20.1/Pod/Simple.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">7.4%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td colspan="7"></td></tr><tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">require 5;</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Pod::Simple;</td></tr>
<tr><td class="h">4</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L4">94</a></div></td><td></td><td><div>326</div><div>104</div><div>2100</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L5">94</a></div></td><td></td><td><div>339</div><div>100</div><div>3221</div></td><td class="s">use Carp ();</td></tr>
<tr><td class="h">6</td><td><div class="c3">94</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L6">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L6">94</a></div></td><td></td><td><div>1477</div></td><td class="s">BEGIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ *DEBUG = sub () {0} unless defined &amp;DEBUG }</td></tr>
<tr><td class="h">7</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L7">94</a></div></td><td></td><td><div>20039</div><div>136</div><div>370</div></td><td class="s">use integer;</td></tr>
<tr><td class="h">8</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L8">94</a></div></td><td></td><td><div>21545</div><div>1475</div><div>2277</div></td><td class="s">use Pod::Escapes 1.04 ();</td></tr>
<tr><td class="h">9</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L9">94</a></div></td><td></td><td><div>19472</div><div>180</div><div>1334</div></td><td class="s">use Pod::Simple::LinkSection ();</td></tr>
<tr><td class="h">10</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L10">94</a></div></td><td></td><td><div>365</div><div>107</div><div>1814</div></td><td class="s">use Pod::Simple::BlackBox ();</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#use utf8;</td></tr>
<tr><td class="h">12</td><td colspan="7"></td></tr><tr><td class="h">13</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>24879</div></td><td class="s">use vars qw(</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$VERSION @ISA</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;@Known_formatting_codes&nbsp;&nbsp;@Known_directives</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;%Known_formatting_codes&nbsp;&nbsp;%Known_directives</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$NL</td></tr>
<tr><td class="h">18</td><td><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L18">94</a></div></td><td></td><td><div>337</div><div>96</div></td><td class="s">);</td></tr>
<tr><td class="h">19</td><td colspan="7"></td></tr><tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@ISA = (&#39;Pod::Simple::BlackBox&#39;);</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = &#39;3.28&#39;;</td></tr>
<tr><td class="h">22</td><td colspan="7"></td></tr><tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@Known_formatting_codes = qw(I B C L E F S X Z); </td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">%Known_formatting_codes = map(($_=&gt;1), @Known_formatting_codes);</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@Known_directives&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= qw(head1 head2 head3 head4 item over back); </td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">%Known_directives&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= map(($_=&gt;&#39;Plain&#39;), @Known_directives);</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$NL = $/ unless defined $NL;</td></tr>
<tr><td class="h">28</td><td colspan="7"></td></tr><tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Set up some constants:</td></tr>
<tr><td class="h">31</td><td colspan="7"></td></tr><tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">33</td><td><div class="c3">94</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L33">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L33">94</a></div></td><td></td><td><div>298</div></td><td class="s">&nbsp;&nbsp;if(defined &amp;ASCII)&nbsp;&nbsp;&nbsp;&nbsp;{ }</td></tr>
<tr><td class="h">34</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;elsif(chr(65) eq &#39;A&#39;) { *ASCII = sub () {1}&nbsp;&nbsp;}</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ *ASCII = sub () {&#39;&#39;} }</td></tr>
<tr><td class="h">36</td><td colspan="7"></td></tr><tr><td class="h">37</td><td><div class="c3">94</div><div class="c3">94</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L37">50</a></div></td><td></td><td></td><td></td><td><div>266</div><div>121</div></td><td class="s">&nbsp;&nbsp;unless(defined &amp;MANY_LINES) { *MANY_LINES = sub () {20} }</td></tr>
<tr><td class="h">38</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;MANY_LINES is &quot;, MANY_LINES(), &quot;\n&quot;;</td></tr>
<tr><td class="h">39</td><td><div class="c3">94</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L39">50</a></div></td><td></td><td></td><td></td><td><div>291</div></td><td class="s">&nbsp;&nbsp;unless(MANY_LINES() &gt;= 1) {</td></tr>
<tr><td class="h">40</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &quot;MANY_LINES is too small (&quot;, MANY_LINES(), &quot;)!\nAborting&quot;;</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">42</td><td><div class="c3">94</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L42">50</a></div><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L42">50</a></div></td><td></td><td></td><td></td><td><div>363</div></td><td class="s">&nbsp;&nbsp;if(defined &amp;UNICODE) { }</td></tr>
<tr><td class="h">43</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>25198</div></td><td class="s">&nbsp;&nbsp;elsif($] &gt;= 5.008)&nbsp;&nbsp;&nbsp;{ *UNICODE = sub() {1}&nbsp;&nbsp;}</td></tr>
<tr><td class="h">44</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ *UNICODE = sub() {&#39;&#39;} }</td></tr>
<tr><td class="h">45</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">46</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">if(DEBUG &gt; 2) {</td></tr>
<tr><td class="h">47</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;print &quot;# We are &quot;, ASCII ? &#39;&#39; : &#39;not &#39;, &quot;in ASCII-land\n&quot;;</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;print &quot;# We are under a Unicode-safe Perl.\n&quot;;</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">50</td><td colspan="7"></td></tr><tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Design note:</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is a parser for Pod.&nbsp;&nbsp;It is not a parser for the set of Pod-like</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;languages which happens to contain Pod -- it is just for Pod, plus possibly</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;some extensions.</td></tr>
<tr><td class="h">55</td><td colspan="7"></td></tr><tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @</td></tr>
<tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">__PACKAGE__-&gt;_accessorize(</td></tr>
<tr><td class="h">61</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;nbsp_for_S&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Whether to map S&lt;...&gt;&#39;s to \xA0 characters</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;source_filename&#39;,&nbsp;&nbsp;&nbsp;# Filename of the source, for use in warnings</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;source_dead&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Whether to consider this parser&#39;s source dead</td></tr>
<tr><td class="h">64</td><td colspan="7"></td></tr><tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;output_fh&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The filehandle we&#39;re writing to, if applicable.</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Used only in some derived classes.</td></tr>
<tr><td class="h">67</td><td colspan="7"></td></tr><tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;hide_line_numbers&#39;, # For some dumping subclasses: whether to pointedly</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# suppress the start_line attribute</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;line_count&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the current line number</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;pod_para_count&#39;,&nbsp;&nbsp;&nbsp;&nbsp;# count of pod paragraphs seen so far</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;no_whining&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# whether to suppress whining</td></tr>
<tr><td class="h">75</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;no_errata_section&#39;, # whether to suppress the errata section</td></tr>
<tr><td class="h">76</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;complain_stderr&#39;,&nbsp;&nbsp;&nbsp;# whether to complain to stderr</td></tr>
<tr><td class="h">77</td><td colspan="7"></td></tr><tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;doc_has_started&#39;,&nbsp;&nbsp;&nbsp;# whether we&#39;ve fired the open-Document event yet</td></tr>
<tr><td class="h">79</td><td colspan="7"></td></tr><tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;bare_output&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For some subclasses: whether to prepend</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;header-code and postpend footer-code</td></tr>
<tr><td class="h">82</td><td colspan="7"></td></tr><tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;keep_encoding_directive&#39;,&nbsp;&nbsp;# whether to emit =encoding</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;nix_X_codes&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# whether to ignore X&lt;...&gt; codes</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;merge_text&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# whether to avoid breaking a single piece of</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;text up into several events</td></tr>
<tr><td class="h">87</td><td colspan="7"></td></tr><tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;preserve_whitespace&#39;, # whether to try to keep whitespace as-is</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;strip_verbatim_indent&#39;, # What indent to strip from verbatim</td></tr>
<tr><td class="h">90</td><td colspan="7"></td></tr><tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;parse_characters&#39;,&nbsp;&nbsp;# Whether parser should expect chars rather than octets</td></tr>
<tr><td class="h">92</td><td colspan="7"></td></tr><tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;content_seen&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# whether we&#39;ve seen any real Pod content</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;errors_seen&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO: document.&nbsp;&nbsp;whether we&#39;ve seen any errors (fatal or not)</td></tr>
<tr><td class="h">95</td><td colspan="7"></td></tr><tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;codes_in_verbatim&#39;, # for PseudoPod extensions</td></tr>
<tr><td class="h">97</td><td colspan="7"></td></tr><tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;code_handler&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# coderef to call when a code (non-pod) line is seen</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;cut_handler&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ... when a =cut line is seen</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;pod_handler&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ... when a =pod line is seen</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;whiteline_handler&#39;, # ... when a line with only whitespace is seen</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> #Called like:</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> # $code_handler-&gt;($line, $self-&gt;{&#39;line_count&#39;}, $self) if $code_handler;</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> #&nbsp;&nbsp;$cut_handler-&gt;($line, $self-&gt;{&#39;line_count&#39;}, $self) if $cut_handler;</td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> #&nbsp;&nbsp;$pod_handler-&gt;($line, $self-&gt;{&#39;line_count&#39;}, $self) if $pod_handler;</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> #&nbsp;&nbsp;&nbsp;$wl_handler-&gt;($line, $self-&gt;{&#39;line_count&#39;}, $self) if $wl_handler;</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> &#39;parse_empty_lists&#39;, # whether to acknowledge empty =over/=back blocks</td></tr>
<tr><td class="h">108</td><td colspan="7"></td></tr><tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">110</td><td colspan="7"></td></tr><tr><td class="h">111</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">112</td><td colspan="7"></td></tr><tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub any_errata_seen {&nbsp;&nbsp;# good for using as an exit() value...</td></tr>
<tr><td class="h">114</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L114">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L114">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return shift-&gt;{&#39;errors_seen&#39;} || 0;</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">116</td><td colspan="7"></td></tr><tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns the encoding only if it was recognized as being handled and set</td></tr>
<tr><td class="h">118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub detected_encoding {</td></tr>
<tr><td class="h">119</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L119">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return shift-&gt;{&#39;detected_encoding&#39;};</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">121</td><td colspan="7"></td></tr><tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub encoding {</td></tr>
<tr><td class="h">123</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L123">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">124</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L124">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $this-&gt;{&#39;encoding&#39;} unless @_;&nbsp;&nbsp;# GET.</td></tr>
<tr><td class="h">125</td><td colspan="7"></td></tr><tr><td class="h">126</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$this-&gt;_handle_encoding_line(&quot;=encoding $_[0]&quot;);</td></tr>
<tr><td class="h">127</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L127">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if ($this-&gt;{&#39;_processed_encoding&#39;}) {</td></tr>
<tr><td class="h">128</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $this-&gt;{&#39;_processed_encoding&#39;};</td></tr>
<tr><td class="h">129</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L129">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L129">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(! $this-&gt;{&#39;encoding_command_statuses&#39;} ) {</td></tr>
<tr><td class="h">130</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; CRAZY ERROR: encoding wasn&#39;t really handled?!\n&quot;;</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $this-&gt;{&#39;encoding_command_statuses&#39;}[-1] ) {</td></tr>
<tr><td class="h">132</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;scream( &quot;=encoding $_[0]&quot;,</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf &quot;Couldn&#39;t do %s: %s&quot;,</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;encoding_command_reqs&#39;&nbsp;&nbsp;}[-1],</td></tr>
<tr><td class="h">135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;encoding_command_statuses&#39;}[-1],</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">138</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; (encoding successfully handled.)\n&quot;;</td></tr>
<tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">140</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $this-&gt;{&#39;encoding&#39;};</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">142</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">145</td><td colspan="7"></td></tr><tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Pull in some functions that, for some reason, I expect to see here too:</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">149</td><td><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L149">94</a></div></td><td></td><td><div>700</div></td><td class="s">&nbsp;&nbsp;*pretty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= \&amp;Pod::Simple::BlackBox::pretty;</td></tr>
<tr><td class="h">150</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>608911</div></td><td class="s">&nbsp;&nbsp;*stringify_lol = \&amp;Pod::Simple::BlackBox::stringify_lol;</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">152</td><td colspan="7"></td></tr><tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">154</td><td colspan="7"></td></tr><tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub version_report {</td></tr>
<tr><td class="h">156</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L156">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L156">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $class = ref($_[0]) || $_[0];</td></tr>
<tr><td class="h">157</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L157">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if($class eq __PACKAGE__) {</td></tr>
<tr><td class="h">158</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;$class $VERSION&quot;;</td></tr>
<tr><td class="h">159</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $v = $class-&gt;VERSION;</td></tr>
<tr><td class="h">161</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;$class $v (&quot; . __PACKAGE__ . &quot; $VERSION)&quot;;</td></tr>
<tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">164</td><td colspan="7"></td></tr><tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">166</td><td colspan="7"></td></tr><tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#sub curr_open { # read-only list accessor</td></tr>
<tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;return @{ $_[0]{&#39;curr_open&#39;} || return() };</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h">170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#sub _curr_open_listref { $_[0]{&#39;curr_open&#39;} ||= [] }</td></tr>
<tr><td class="h">171</td><td colspan="7"></td></tr><tr><td class="h">172</td><td colspan="7"></td></tr><tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub output_string {</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Works by faking out output_fh.&nbsp;&nbsp;Simplifies our code.</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">176</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L176">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">177</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L177">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $this-&gt;{&#39;output_string&#39;} unless @_;&nbsp;&nbsp;# GET.</td></tr>
<tr><td class="h">178</td><td colspan="7"></td></tr><tr><td class="h">179</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;require Pod::Simple::TiedOutFH;</td></tr>
<tr><td class="h">180</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L180">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L180">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $x = (defined($_[0]) and ref($_[0])) ? $_[0] : \( $_[0] );</td></tr>
<tr><td class="h">181</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L181">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$$x = &#39;&#39; unless defined $$x;</td></tr>
<tr><td class="h">182</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;# Output string set to $x ($$x)\n&quot;;</td></tr>
<tr><td class="h">183</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$this-&gt;{&#39;output_fh&#39;} = Pod::Simple::TiedOutFH-&gt;handle_on($_[0]);</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return</td></tr>
<tr><td class="h">185</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;output_string&#39;} = $_[0];</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#${ ${ $this-&gt;{&#39;output_fh&#39;} } };</td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">188</td><td colspan="7"></td></tr><tr><td class="h">189</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L189">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div><div>0</div></td><td class="s">sub abandon_output_string { $_[0]-&gt;abandon_output_fh; delete $_[0]{&#39;output_string&#39;} }</td></tr>
<tr><td class="h">190</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L190">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub abandon_output_fh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]-&gt;output_fh(undef) }</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># These don&#39;t delete the string or close the FH -- they just delete our</td></tr>
<tr><td class="h">192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;references to it/them.</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># TODO: document these</td></tr>
<tr><td class="h">194</td><td colspan="7"></td></tr><tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">196</td><td colspan="7"></td></tr><tr><td class="h">197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# takes no parameters</td></tr>
<tr><td class="h">199</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L199">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L199">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $class = ref($_[0]) || $_[0];</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#Carp::croak(__PACKAGE__ . &quot; is a virtual base class -- see perldoc &quot;</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;. __PACKAGE__ );</td></tr>
<tr><td class="h">202</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return bless {</td></tr>
<tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&#39;accept_codes&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; { map( ($_=&gt;$_), @Known_formatting_codes ) },</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&#39;accept_directives&#39; =&gt; { %Known_directives },</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&#39;accept_targets&#39;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; {},</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}, $class;</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">208</td><td colspan="7"></td></tr><tr><td class="h">209</td><td colspan="7"></td></tr><tr><td class="h">210</td><td colspan="7"></td></tr><tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># TODO: an option for whether to interpolate E&lt;...&gt;&#39;s, or just resolve to codes.</td></tr>
<tr><td class="h">212</td><td colspan="7"></td></tr><tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">214</td><td colspan="7"></td></tr><tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handle_element_start {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# OVERRIDE IN DERIVED CLASS</td></tr>
<tr><td class="h">216</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L216">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $element_name, $attr_hash_r) = @_;</td></tr>
<tr><td class="h">217</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">219</td><td colspan="7"></td></tr><tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handle_element_end {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# OVERRIDE IN DERIVED CLASS</td></tr>
<tr><td class="h">221</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L221">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $element_name) = @_;</td></tr>
<tr><td class="h">222</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">224</td><td colspan="7"></td></tr><tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handle_text&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# OVERRIDE IN DERIVED CLASS</td></tr>
<tr><td class="h">226</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L226">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $text) = @_;</td></tr>
<tr><td class="h">227</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">229</td><td colspan="7"></td></tr><tr><td class="h">230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># And now directives (not targets)</td></tr>
<tr><td class="h">233</td><td colspan="7"></td></tr><tr><td class="h">234</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L234">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_directive_as_verbatim&nbsp;&nbsp;{ shift-&gt;_accept_directives(&#39;Verbatim&#39;, @_) }</td></tr>
<tr><td class="h">235</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L235">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_directive_as_data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ shift-&gt;_accept_directives(&#39;Data&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@_) }</td></tr>
<tr><td class="h">236</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L236">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_directive_as_processed { shift-&gt;_accept_directives(&#39;Plain&#39;,&nbsp;&nbsp;&nbsp;&nbsp;@_) }</td></tr>
<tr><td class="h">237</td><td colspan="7"></td></tr><tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _accept_directives {</td></tr>
<tr><td class="h">239</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L239">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($this, $type) = splice @_,0,2;</td></tr>
<tr><td class="h">240</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $d (@_) {</td></tr>
<tr><td class="h">241</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L241">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L241">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $d and length $d;</td></tr>
<tr><td class="h">242</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L242">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;\&quot;$d\&quot; isn&#39;t a valid directive name&quot;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $d =~ m/^[a-zA-Z][a-zA-Z0-9]*$/s;</td></tr>
<tr><td class="h">244</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L244">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;\&quot;$d\&quot; is already a reserved Pod directive name&quot;</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if exists $Known_directives{$d};</td></tr>
<tr><td class="h">246</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;accept_directives&#39;}{$d} = $type;</td></tr>
<tr><td class="h">247</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Learning to accept \&quot;=$d\&quot; as directive of type $type\n&quot;;</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">249</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 6 and print &quot;$this\&#39;s accept_directives : &quot;,</td></tr>
<tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;pretty($this-&gt;{&#39;accept_directives&#39;}), &quot;\n&quot;;</td></tr>
<tr><td class="h">251</td><td colspan="7"></td></tr><tr><td class="h">252</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L252">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;return sort keys %{ $this-&gt;{&#39;accept_directives&#39;} } if wantarray;</td></tr>
<tr><td class="h">253</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">255</td><td colspan="7"></td></tr><tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#--------------------------------------------------------------------------</td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># TODO: document these:</td></tr>
<tr><td class="h">258</td><td colspan="7"></td></tr><tr><td class="h">259</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L259">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub unaccept_directive { shift-&gt;unaccept_directives(@_) };</td></tr>
<tr><td class="h">260</td><td colspan="7"></td></tr><tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unaccept_directives {</td></tr>
<tr><td class="h">262</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L262">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">263</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $d (@_) {</td></tr>
<tr><td class="h">264</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L264">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L264">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $d and length $d;</td></tr>
<tr><td class="h">265</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L265">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;\&quot;$d\&quot; isn&#39;t a valid directive name&quot;</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $d =~ m/^[a-zA-Z][a-zA-Z0-9]*$/s;</td></tr>
<tr><td class="h">267</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L267">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;But you must accept \&quot;$d\&quot; directives -- it&#39;s a builtin!&quot;</td></tr>
<tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if exists $Known_directives{$d};</td></tr>
<tr><td class="h">269</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $this-&gt;{&#39;accept_directives&#39;}{$d};</td></tr>
<tr><td class="h">270</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;OK, won&#39;t accept \&quot;=$d\&quot; as directive.\n&quot;;</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">272</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L272">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;return sort keys %{ $this-&gt;{&#39;accept_directives&#39;} } if wantarray;</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return</td></tr>
<tr><td class="h">274</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">}</td></tr>
<tr><td class="h">275</td><td colspan="7"></td></tr><tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># And now targets (not directives)</td></tr>
<tr><td class="h">279</td><td colspan="7"></td></tr><tr><td class="h">280</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L280">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ shift-&gt;accept_targets(@_)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} # alias</td></tr>
<tr><td class="h">281</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L281">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_target_as_text { shift-&gt;accept_targets_as_text(@_) } # alias</td></tr>
<tr><td class="h">282</td><td colspan="7"></td></tr><tr><td class="h">283</td><td colspan="7"></td></tr><tr><td class="h">284</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L284">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_targets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ shift-&gt;_accept_targets(&#39;1&#39;, @_) }</td></tr>
<tr><td class="h">285</td><td colspan="7"></td></tr><tr><td class="h">286</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L286">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_targets_as_text { shift-&gt;_accept_targets(&#39;force_resolve&#39;, @_) }</td></tr>
<tr><td class="h">287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"> # forces them to be processed, even when there&#39;s no &quot;:&quot;.</td></tr>
<tr><td class="h">288</td><td colspan="7"></td></tr><tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _accept_targets {</td></tr>
<tr><td class="h">290</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L290">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($this, $type) = splice @_,0,2;</td></tr>
<tr><td class="h">291</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $t (@_) {</td></tr>
<tr><td class="h">292</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L292">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L292">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $t and length $t;</td></tr>
<tr><td class="h">293</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: enforce some limitations on what a target name can be?</td></tr>
<tr><td class="h">294</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;accept_targets&#39;}{$t} = $type;</td></tr>
<tr><td class="h">295</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Learning to accept \&quot;$t\&quot; as target of type $type\n&quot;;</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">297</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L297">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;return sort keys %{ $this-&gt;{&#39;accept_targets&#39;} } if wantarray;</td></tr>
<tr><td class="h">298</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">300</td><td colspan="7"></td></tr><tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#--------------------------------------------------------------------------</td></tr>
<tr><td class="h">302</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L302">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub unaccept_target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ shift-&gt;unaccept_targets(@_) }</td></tr>
<tr><td class="h">303</td><td colspan="7"></td></tr><tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unaccept_targets {</td></tr>
<tr><td class="h">305</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L305">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">306</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $t (@_) {</td></tr>
<tr><td class="h">307</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L307">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L307">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $t and length $t;</td></tr>
<tr><td class="h">308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: enforce some limitations on what a target name can be?</td></tr>
<tr><td class="h">309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $this-&gt;{&#39;accept_targets&#39;}{$t};</td></tr>
<tr><td class="h">310</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;OK, won&#39;t accept \&quot;$t\&quot; as target.\n&quot;;</td></tr>
<tr><td class="h">311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">312</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L312">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;return sort keys %{ $this-&gt;{&#39;accept_targets&#39;} } if wantarray;</td></tr>
<tr><td class="h">313</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">315</td><td colspan="7"></td></tr><tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># And now codes (not targets or directives)</td></tr>
<tr><td class="h">319</td><td colspan="7"></td></tr><tr><td class="h">320</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L320">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub accept_code { shift-&gt;accept_codes(@_) } # alias</td></tr>
<tr><td class="h">321</td><td colspan="7"></td></tr><tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub accept_codes {&nbsp;&nbsp;# Add some codes</td></tr>
<tr><td class="h">323</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L323">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">324</td><td colspan="7"></td></tr><tr><td class="h">325</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $new_code (@_) {</td></tr>
<tr><td class="h">326</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L326">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L326">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $new_code and length $new_code;</td></tr>
<tr><td class="h">327</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(ASCII) {</td></tr>
<tr><td class="h">328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# A good-enough check that it&#39;s good as an XML Name symbol:</td></tr>
<tr><td class="h">329</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L329">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L329">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;\&quot;$new_code\&quot; isn&#39;t a valid element name&quot;</td></tr>
<tr><td class="h">330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $new_code =~</td></tr>
<tr><td class="h">331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m/[\x00-\x2C\x2F\x39\x3B-\x40\x5B-\x5E\x60\x7B-\x7F]/</td></tr>
<tr><td class="h">332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Characters under 0x80 that aren&#39;t legal in an XML Name.</td></tr>
<tr><td class="h">333</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $new_code =~ m/^[-\.0-9]/s</td></tr>
<tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $new_code =~ m/:[-\.0-9]/s;</td></tr>
<tr><td class="h">335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The legal under-0x80 Name characters that </td></tr>
<tr><td class="h">336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;an XML Name still can&#39;t start with.</td></tr>
<tr><td class="h">337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">338</td><td colspan="7"></td></tr><tr><td class="h">339</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;{&#39;accept_codes&#39;}{$new_code} = $new_code;</td></tr>
<tr><td class="h">340</td><td colspan="7"></td></tr><tr><td class="h">341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Yes, map to itself -- just so that when we</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;see &quot;=extend W [whatever] thatelementname&quot;, we say that W maps</td></tr>
<tr><td class="h">343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to whatever $this-&gt;{accept_codes}{thatelementname} is,</td></tr>
<tr><td class="h">344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;i.e., &quot;thatelementname&quot;.&nbsp;&nbsp;Then when we go re-mapping,</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;a &quot;W&quot; in the treelet turns into &quot;thatelementname&quot;.&nbsp;&nbsp;We only</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;remap once.</td></tr>
<tr><td class="h">347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If we say we accept &quot;W&quot;, then a &quot;W&quot; in the treelet simply turns</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;into &quot;W&quot;.</td></tr>
<tr><td class="h">349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">350</td><td colspan="7"></td></tr><tr><td class="h">351</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">353</td><td colspan="7"></td></tr><tr><td class="h">354</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#--------------------------------------------------------------------------</td></tr>
<tr><td class="h">355</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L355">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub unaccept_code { shift-&gt;unaccept_codes(@_) }</td></tr>
<tr><td class="h">356</td><td colspan="7"></td></tr><tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unaccept_codes { # remove some codes</td></tr>
<tr><td class="h">358</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L358">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $this = shift;</td></tr>
<tr><td class="h">359</td><td colspan="7"></td></tr><tr><td class="h">360</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $new_code (@_) {</td></tr>
<tr><td class="h">361</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L361">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L361">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $new_code and length $new_code;</td></tr>
<tr><td class="h">362</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(ASCII) {</td></tr>
<tr><td class="h">363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# A good-enough check that it&#39;s good as an XML Name symbol:</td></tr>
<tr><td class="h">364</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L364">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L364">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;\&quot;$new_code\&quot; isn&#39;t a valid element name&quot;</td></tr>
<tr><td class="h">365</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $new_code =~</td></tr>
<tr><td class="h">366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m/[\x00-\x2C\x2F\x39\x3B-\x40\x5B-\x5E\x60\x7B-\x7F]/</td></tr>
<tr><td class="h">367</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Characters under 0x80 that aren&#39;t legal in an XML Name.</td></tr>
<tr><td class="h">368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $new_code =~ m/^[-\.0-9]/s</td></tr>
<tr><td class="h">369</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $new_code =~ m/:[-\.0-9]/s;</td></tr>
<tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The legal under-0x80 Name characters that </td></tr>
<tr><td class="h">371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;an XML Name still can&#39;t start with.</td></tr>
<tr><td class="h">372</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">373</td><td colspan="7"></td></tr><tr><td class="h">374</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L374">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak &quot;But you must accept \&quot;$new_code\&quot; codes -- it&#39;s a builtin!&quot;</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if grep $new_code eq $_, @Known_formatting_codes;</td></tr>
<tr><td class="h">376</td><td colspan="7"></td></tr><tr><td class="h">377</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $this-&gt;{&#39;accept_codes&#39;}{$new_code};</td></tr>
<tr><td class="h">378</td><td colspan="7"></td></tr><tr><td class="h">379</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;OK, won&#39;t accept the code $new_code&lt;...&gt;.\n&quot;;</td></tr>
<tr><td class="h">380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">381</td><td colspan="7"></td></tr><tr><td class="h">382</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">384</td><td colspan="7"></td></tr><tr><td class="h">385</td><td colspan="7"></td></tr><tr><td class="h">386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">388</td><td colspan="7"></td></tr><tr><td class="h">389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_string_document {</td></tr>
<tr><td class="h">390</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L390">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">391</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my @lines;</td></tr>
<tr><td class="h">392</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;foreach my $line_group (@_) {</td></tr>
<tr><td class="h">393</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L393">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L393">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless defined $line_group and length $line_group;</td></tr>
<tr><td class="h">394</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;pos($line_group) = 0;</td></tr>
<tr><td class="h">395</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while($line_group =~</td></tr>
<tr><td class="h">396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m/([^\n\r]*)(\r?\n?)/g # supports \r, \n ,\r\n</td></tr>
<tr><td class="h">397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#m/([^\n\r]*)((?:\r?\n)?)/g</td></tr>
<tr><td class="h">398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print(&quot;&gt;&gt; $1\n&quot;),</td></tr>
<tr><td class="h">400</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L400">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L400">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parse_lines($1)</td></tr>
<tr><td class="h">401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if length($1) or length($2)</td></tr>
<tr><td class="h">402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or pos($line_group) != length($line_group);</td></tr>
<tr><td class="h">403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# I.e., unless it&#39;s a zero-length &quot;empty line&quot; at the very</td></tr>
<tr><td class="h">404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;end of &quot;foo\nbar\n&quot; (i.e., between the \n and the EOS).</td></tr>
<tr><td class="h">405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">406</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">407</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$self-&gt;parse_lines(undef); # to signal EOF</td></tr>
<tr><td class="h">408</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">410</td><td colspan="7"></td></tr><tr><td class="h">411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _init_fh_source {</td></tr>
<tr><td class="h">412</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L412">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $source) = @_;</td></tr>
<tr><td class="h">413</td><td colspan="7"></td></tr><tr><td class="h">414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#DEBUG &gt; 1 and print &quot;Declaring $source as :raw for starters\n&quot;;</td></tr>
<tr><td class="h">415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#$self-&gt;_apply_binmode($source, &#39;:raw&#39;);</td></tr>
<tr><td class="h">416</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#binmode($source, &quot;:raw&quot;);</td></tr>
<tr><td class="h">417</td><td colspan="7"></td></tr><tr><td class="h">418</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">420</td><td colspan="7"></td></tr><tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.</td></tr>
<tr><td class="h">422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">423</td><td colspan="7"></td></tr><tr><td class="h">424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_file {</td></tr>
<tr><td class="h">425</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L425">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $source) = (@_);</td></tr>
<tr><td class="h">426</td><td colspan="7"></td></tr><tr><td class="h">427</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L427">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L427">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L427">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L427">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if(!defined $source) {</td></tr>
<tr><td class="h">428</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak(&quot;Can&#39;t use empty-string as a source for parse_file&quot;);</td></tr>
<tr><td class="h">429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(ref(\$source) eq &#39;GLOB&#39;) {</td></tr>
<tr><td class="h">430</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;source_filename&#39;} = &#39;&#39; . ($source);</td></tr>
<tr><td class="h">431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(ref $source) {</td></tr>
<tr><td class="h">432</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;source_filename&#39;} = &#39;&#39; . ($source);</td></tr>
<tr><td class="h">433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(!length $source) {</td></tr>
<tr><td class="h">434</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Carp::croak(&quot;Can&#39;t use empty-string as a source for parse_file&quot;);</td></tr>
<tr><td class="h">435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">437</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local *PODSOURCE;</td></tr>
<tr><td class="h">438</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L438">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open(PODSOURCE, &quot;&lt;$source&quot;) || Carp::croak(&quot;Can&#39;t open $source: $!&quot;);</td></tr>
<tr><td class="h">439</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;source_filename&#39;} = $source;</td></tr>
<tr><td class="h">440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$source = *PODSOURCE{IO};</td></tr>
<tr><td class="h">441</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">442</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_init_fh_source($source);</td></tr>
<tr><td class="h">443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# By here, $source is a FH.</td></tr>
<tr><td class="h">445</td><td colspan="7"></td></tr><tr><td class="h">446</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$self-&gt;{&#39;source_fh&#39;} = $source;</td></tr>
<tr><td class="h">447</td><td colspan="7"></td></tr><tr><td class="h">448</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($i, @lines);</td></tr>
<tr><td class="h">449</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;until( $self-&gt;{&#39;source_dead&#39;} ) {</td></tr>
<tr><td class="h">450</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;splice @lines;</td></tr>
<tr><td class="h">451</td><td colspan="7"></td></tr><tr><td class="h">452</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for($i = MANY_LINES; $i--;) {&nbsp;&nbsp;# read those many lines at a time</td></tr>
<tr><td class="h">453</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $/ = $NL;</td></tr>
<tr><td class="h">454</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @lines, scalar(&lt;$source&gt;);&nbsp;&nbsp;# readline</td></tr>
<tr><td class="h">455</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L455">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless defined $lines[-1];</td></tr>
<tr><td class="h">456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# but pass thru the undef, which will set source_dead to true</td></tr>
<tr><td class="h">457</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">458</td><td colspan="7"></td></tr><tr><td class="h">459</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $at_eof = ! $lines[-1]; # keep track of the undef</td></tr>
<tr><td class="h">460</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L460">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;pop @lines if $at_eof; # silence warnings</td></tr>
<tr><td class="h">461</td><td colspan="7"></td></tr><tr><td class="h">462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# be eol agnostic</td></tr>
<tr><td class="h">463</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;s/\r\n?/\n/g for @lines;</td></tr>
<tr><td class="h">464</td><td colspan="7"></td></tr><tr><td class="h">465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# make sure there are only one line elements for parse_lines</td></tr>
<tr><td class="h">466</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@lines = split(/(?&lt;=\n)/, join(&#39;&#39;, @lines));</td></tr>
<tr><td class="h">467</td><td colspan="7"></td></tr><tr><td class="h">468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# push the undef back after popping it to set source_dead to true</td></tr>
<tr><td class="h">469</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L469">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @lines, undef if $at_eof;</td></tr>
<tr><td class="h">470</td><td colspan="7"></td></tr><tr><td class="h">471</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parse_lines(@lines);</td></tr>
<tr><td class="h">472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">473</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;delete($self-&gt;{&#39;source_fh&#39;}); # so it can be GC&#39;d</td></tr>
<tr><td class="h">474</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">476</td><td colspan="7"></td></tr><tr><td class="h">477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.</td></tr>
<tr><td class="h">478</td><td colspan="7"></td></tr><tr><td class="h">479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_from_file {</td></tr>
<tr><td class="h">480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# An emulation of Pod::Parser&#39;s interface, for the sake of Perldoc.</td></tr>
<tr><td class="h">481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Basically just a wrapper around parse_file.</td></tr>
<tr><td class="h">482</td><td colspan="7"></td></tr><tr><td class="h">483</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L483">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $source, $to) = @_;</td></tr>
<tr><td class="h">484</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L484">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$self = $self-&gt;new unless ref($self); # so we tolerate being a class method</td></tr>
<tr><td class="h">485</td><td colspan="7"></td></tr><tr><td class="h">486</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L486">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L486">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L486">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L486">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L486">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;if(!defined $source)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $source = *STDIN{IO}</td></tr>
<tr><td class="h">487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(ref(\$source) eq &#39;GLOB&#39;) { # stet</td></tr>
<tr><td class="h">488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(ref($source)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) { # stet</td></tr>
<tr><td class="h">489</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(!length $source</td></tr>
<tr><td class="h">490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $source eq &#39;-&#39; or $source =~ m/^&lt;&amp;(STDIN|0)$/i</td></tr>
<tr><td class="h">491</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) { </td></tr>
<tr><td class="h">492</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$source = *STDIN{IO};</td></tr>
<tr><td class="h">493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">494</td><td colspan="7"></td></tr><tr><td class="h">495</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L495">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L495">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L495">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L495">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L495">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;if(!defined $to) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output_fh( *STDOUT{IO}&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">496</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;} elsif(ref(\$to) eq &#39;GLOB&#39;) { $self-&gt;output_fh( $to );</td></tr>
<tr><td class="h">497</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;} elsif(ref($to)) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output_fh( $to );</td></tr>
<tr><td class="h">498</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(!length $to</td></tr>
<tr><td class="h">499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $to eq &#39;-&#39; or $to =~ m/^&gt;&amp;?(?:STDOUT|1)$/i</td></tr>
<tr><td class="h">500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">501</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output_fh( *STDOUT{IO} );</td></tr>
<tr><td class="h">502</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">503</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;require Symbol;</td></tr>
<tr><td class="h">504</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out_fh = Symbol::gensym();</td></tr>
<tr><td class="h">505</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Write-opening to $to\n&quot;;</td></tr>
<tr><td class="h">506</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L506">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open($out_fh, &quot;&gt;$to&quot;)&nbsp;&nbsp;or&nbsp;&nbsp;Carp::croak &quot;Can&#39;t write-open $to: $!&quot;;</td></tr>
<tr><td class="h">507</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L507">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L507">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;binmode($out_fh)</td></tr>
<tr><td class="h">508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $self-&gt;can(&#39;write_with_binmode&#39;) and $self-&gt;write_with_binmode;</td></tr>
<tr><td class="h">509</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output_fh($out_fh);</td></tr>
<tr><td class="h">510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">511</td><td colspan="7"></td></tr><tr><td class="h">512</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;parse_file($source);</td></tr>
<tr><td class="h">513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">514</td><td colspan="7"></td></tr><tr><td class="h">515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">516</td><td colspan="7"></td></tr><tr><td class="h">517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub whine {</td></tr>
<tr><td class="h">518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#my($self,$line,$complaint) = @_;</td></tr>
<tr><td class="h">519</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L519">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $self = shift(@_);</td></tr>
<tr><td class="h">520</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;++$self-&gt;{&#39;errors_seen&#39;};</td></tr>
<tr><td class="h">521</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L521">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if($self-&gt;{&#39;no_whining&#39;}) {</td></tr>
<tr><td class="h">522</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 9 and print &quot;Discarding complaint (at line $_[0]) $_[1]\n because no_whining is on.\n&quot;;</td></tr>
<tr><td class="h">523</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">525</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L525">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;_complain_warn(@_) if $self-&gt;{&#39;complain_stderr&#39;};</td></tr>
<tr><td class="h">526</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;_complain_errata(@_);</td></tr>
<tr><td class="h">527</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">528</td><td colspan="7"></td></tr><tr><td class="h">529</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub scream {&nbsp;&nbsp;&nbsp;&nbsp;# like whine, but not suppressible</td></tr>
<tr><td class="h">530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#my($self,$line,$complaint) = @_;</td></tr>
<tr><td class="h">531</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L531">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $self = shift(@_);</td></tr>
<tr><td class="h">532</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;++$self-&gt;{&#39;errors_seen&#39;};</td></tr>
<tr><td class="h">533</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L533">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;_complain_warn(@_) if $self-&gt;{&#39;complain_stderr&#39;};</td></tr>
<tr><td class="h">534</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;_complain_errata(@_);</td></tr>
<tr><td class="h">535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">536</td><td colspan="7"></td></tr><tr><td class="h">537</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _complain_warn {</td></tr>
<tr><td class="h">538</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L538">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,$line,$complaint) = @_;</td></tr>
<tr><td class="h">539</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L539">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return printf STDERR &quot;%s around line %s: %s\n&quot;,</td></tr>
<tr><td class="h">540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;source_filename&#39;} || &#39;Pod input&#39;, $line, $complaint;</td></tr>
<tr><td class="h">541</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">542</td><td colspan="7"></td></tr><tr><td class="h">543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _complain_errata {</td></tr>
<tr><td class="h">544</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L544">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,$line,$complaint) = @_;</td></tr>
<tr><td class="h">545</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L545">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if( $self-&gt;{&#39;no_errata_section&#39;} ) {</td></tr>
<tr><td class="h">546</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 9 and print &quot;Discarding erratum (at line $line) $complaint\n because no_errata_section is on.\n&quot;;</td></tr>
<tr><td class="h">547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">548</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 9 and print &quot;Queuing erratum (at line $line) $complaint\n&quot;;</td></tr>
<tr><td class="h">549</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{$self-&gt;{&#39;errata&#39;}{$line}}, $complaint</td></tr>
<tr><td class="h">550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for a report to be generated later!</td></tr>
<tr><td class="h">551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">552</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">554</td><td colspan="7"></td></tr><tr><td class="h">555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">556</td><td colspan="7"></td></tr><tr><td class="h">557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_initial_item_type {</td></tr>
<tr><td class="h">558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# A hack-wrapper here for when you have like &quot;=over\n\n=item 456\n\n&quot;</td></tr>
<tr><td class="h">559</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L559">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $para) = @_;</td></tr>
<tr><td class="h">560</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L560">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;}&nbsp;&nbsp;if $para-&gt;[1]{&#39;~type&#39;};</td></tr>
<tr><td class="h">561</td><td colspan="7"></td></tr><tr><td class="h">562</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} = &#39;text&#39;</td></tr>
<tr><td class="h">563</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L563">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L563">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;if join(&quot;\n&quot;, @{$para}[2 .. $#$para]) =~ m/^\s*(\d+)\.?\s*$/s and $1 ne &#39;1&#39;;</td></tr>
<tr><td class="h">564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Else fall thru to the general case:</td></tr>
<tr><td class="h">565</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">567</td><td colspan="7"></td></tr><tr><td class="h">568</td><td colspan="7"></td></tr><tr><td class="h">569</td><td colspan="7"></td></tr><tr><td class="h">570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_item_type {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# mutates the item!!</td></tr>
<tr><td class="h">571</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L571">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $para) = @_;</td></tr>
<tr><td class="h">572</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L572">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} if $para-&gt;[1]{&#39;~type&#39;};</td></tr>
<tr><td class="h">573</td><td colspan="7"></td></tr><tr><td class="h">574</td><td colspan="7"></td></tr><tr><td class="h">575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Otherwise we haven&#39;t yet been to this node.&nbsp;&nbsp;Maybe alter it...</td></tr>
<tr><td class="h">576</td><td colspan="7"></td></tr><tr><td class="h">577</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;my $content = join &quot;\n&quot;, @{$para}[2 .. $#$para];</td></tr>
<tr><td class="h">578</td><td colspan="7"></td></tr><tr><td class="h">579</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L579">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L579">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L579">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L579">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if($content =~ m/^\s*\*\s*$/s or $content =~ m/^\s*$/s) {</td></tr>
<tr><td class="h">580</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Like: &quot;=item *&quot;, &quot;=item&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&quot;, &quot;=item&quot;</td></tr>
<tr><td class="h">581</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;splice @$para, 2; # so it ends up just being [&#39;=item&#39;, { attrhash } ]</td></tr>
<tr><td class="h">582</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;~orig_content&#39;} = $content;</td></tr>
<tr><td class="h">583</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} = &#39;bullet&#39;;</td></tr>
<tr><td class="h">584</td><td colspan="7"></td></tr><tr><td class="h">585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($content =~ m/^\s*\*\s+(.+)/s) {&nbsp;&nbsp;# tolerance</td></tr>
<tr><td class="h">586</td><td colspan="7"></td></tr><tr><td class="h">587</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Like: &quot;=item * Foo bar baz&quot;;</td></tr>
<tr><td class="h">588</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;~orig_content&#39;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $content;</td></tr>
<tr><td class="h">589</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;~_freaky_para_hack&#39;} = $1;</td></tr>
<tr><td class="h">590</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; Tolerating $$para[2] as =item *\\n\\n$1\n&quot;;</td></tr>
<tr><td class="h">591</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;splice @$para, 2; # so it ends up just being [&#39;=item&#39;, { attrhash } ]</td></tr>
<tr><td class="h">592</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} = &#39;bullet&#39;;</td></tr>
<tr><td class="h">593</td><td colspan="7"></td></tr><tr><td class="h">594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($content =~ m/^\s*(\d+)\.?\s*$/s) {</td></tr>
<tr><td class="h">595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Like: &quot;=item 1.&quot;, &quot;=item&nbsp;&nbsp;&nbsp;&nbsp;123412&quot;</td></tr>
<tr><td class="h">596</td><td colspan="7"></td></tr><tr><td class="h">597</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;~orig_content&#39;} = $content;</td></tr>
<tr><td class="h">598</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $1;&nbsp;&nbsp;# Yes, stores the number there!</td></tr>
<tr><td class="h">599</td><td colspan="7"></td></tr><tr><td class="h">600</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;splice @$para, 2; # so it ends up just being [&#39;=item&#39;, { attrhash } ]</td></tr>
<tr><td class="h">601</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} = &#39;number&#39;;</td></tr>
<tr><td class="h">602</td><td colspan="7"></td></tr><tr><td class="h">603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">604</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# It&#39;s anything else.</td></tr>
<tr><td class="h">605</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $para-&gt;[1]{&#39;~type&#39;} = &#39;text&#39;;</td></tr>
<tr><td class="h">606</td><td colspan="7"></td></tr><tr><td class="h">607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">609</td><td colspan="7"></td></tr><tr><td class="h">610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">611</td><td colspan="7"></td></tr><tr><td class="h">612</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _make_treelet {</td></tr>
<tr><td class="h">613</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L613">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $self = shift;&nbsp;&nbsp;# and ($para, $start_line)</td></tr>
<tr><td class="h">614</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $treelet;</td></tr>
<tr><td class="h">615</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L615">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if(!@_) {</td></tr>
<tr><td class="h">616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return [&#39;&#39;];</td></tr>
<tr><td class="h">617</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L617">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L617">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;} if(ref $_[0] and ref $_[0][0] and $_[0][0][0] eq &#39;~Top&#39;) {</td></tr>
<tr><td class="h">618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Hack so we can pass in fake-o pre-cooked paragraphs:</td></tr>
<tr><td class="h">619</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;just have the first line be a reference to a [&#39;~Top&#39;, {}, ...]</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We use this feechure in gen_errata and stuff.</td></tr>
<tr><td class="h">621</td><td colspan="7"></td></tr><tr><td class="h">622</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Applying precooked treelet hack to $_[0][0]\n&quot;;</td></tr>
<tr><td class="h">623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$treelet = $_[0][0];</td></tr>
<tr><td class="h">624</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;splice @$treelet, 0, 2;&nbsp;&nbsp;# lop the top off</td></tr>
<tr><td class="h">625</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $treelet;</td></tr>
<tr><td class="h">626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">627</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$treelet = $self-&gt;_treelet_from_formatting_codes(@_);</td></tr>
<tr><td class="h">628</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">629</td><td colspan="7"></td></tr><tr><td class="h">630</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L630">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if( $self-&gt;_remap_sequences($treelet) ) {</td></tr>
<tr><td class="h">631</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_treat_Zs($treelet);&nbsp;&nbsp;# Might as well nix these first</td></tr>
<tr><td class="h">632</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_treat_Ls($treelet);&nbsp;&nbsp;# L has to precede E and S</td></tr>
<tr><td class="h">633</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_treat_Es($treelet);</td></tr>
<tr><td class="h">634</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_treat_Ss($treelet);&nbsp;&nbsp;# S has to come after E</td></tr>
<tr><td class="h">635</td><td colspan="7"></td></tr><tr><td class="h">636</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_wrap_up($treelet); # Nix X&#39;s and merge texties</td></tr>
<tr><td class="h">637</td><td colspan="7"></td></tr><tr><td class="h">638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">639</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Formatless treelet gets fast-tracked.\n&quot;;</td></tr>
<tr><td class="h">640</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Very common case!</td></tr>
<tr><td class="h">641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">642</td><td colspan="7"></td></tr><tr><td class="h">643</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;splice @$treelet, 0, 2;&nbsp;&nbsp;# lop the top off</td></tr>
<tr><td class="h">644</td><td colspan="7"></td></tr><tr><td class="h">645</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $treelet;</td></tr>
<tr><td class="h">646</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">647</td><td colspan="7"></td></tr><tr><td class="h">648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.</td></tr>
<tr><td class="h">649</td><td colspan="7"></td></tr><tr><td class="h">650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _wrap_up {</td></tr>
<tr><td class="h">651</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L651">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, @stack) = @_;</td></tr>
<tr><td class="h">652</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $nixx&nbsp;&nbsp;= $self-&gt;{&#39;nix_X_codes&#39;};</td></tr>
<tr><td class="h">653</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $merge = $self-&gt;{&#39;merge_text&#39; };</td></tr>
<tr><td class="h">654</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L654">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L654">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return unless $nixx or $merge;</td></tr>
<tr><td class="h">655</td><td colspan="7"></td></tr><tr><td class="h">656</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;\nStarting _wrap_up traversal.\n&quot;,</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;$merge ? (&quot; Merge mode on\n&quot;) : (),</td></tr>
<tr><td class="h">658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;$nixx&nbsp;&nbsp;? (&quot; Nix-X mode on\n&quot;) : (),</td></tr>
<tr><td class="h">659</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">660</td><td colspan="7"></td></tr><tr><td class="h">661</td><td colspan="7"></td></tr><tr><td class="h">662</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($i, $treelet);</td></tr>
<tr><td class="h">663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;while($treelet = shift @stack) {</td></tr>
<tr><td class="h">664</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot; Considering children of this $treelet-&gt;[0] node...\n&quot;;</td></tr>
<tr><td class="h">665</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for($i = 2; $i &lt; @$treelet; ++$i) { # iterate over children</td></tr>
<tr><td class="h">666</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot; Considering child at $i &quot;, pretty($treelet-&gt;[$i]), &quot;\n&quot;;</td></tr>
<tr><td class="h">667</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L667">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L667">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L667">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L667">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L667">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L667">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($nixx and ref $treelet-&gt;[$i] and $treelet-&gt;[$i][0] eq &#39;X&#39;) {</td></tr>
<tr><td class="h">668</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;&nbsp;&nbsp;&nbsp;Nixing X node at $i\n&quot;;</td></tr>
<tr><td class="h">669</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1); # just nix this node (and its descendants)</td></tr>
<tr><td class="h">670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# no need to back-update the counter just yet</td></tr>
<tr><td class="h">671</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redo;</td></tr>
<tr><td class="h">672</td><td colspan="7"></td></tr><tr><td class="h">673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($merge and $i != 2 and&nbsp;&nbsp;# non-initial</td></tr>
<tr><td class="h">674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!ref $treelet-&gt;[$i] and !ref $treelet-&gt;[$i - 1]</td></tr>
<tr><td class="h">675</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">676</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;&nbsp;&nbsp;&nbsp;Merging &quot;, $i-1,</td></tr>
<tr><td class="h">677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:[$treelet-&gt;[$i-1]] and $i\:[$treelet-&gt;[$i]]\n&quot;;</td></tr>
<tr><td class="h">678</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$treelet-&gt;[$i-1] .= ( splice(@$treelet, $i, 1) )[0];</td></tr>
<tr><td class="h">679</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;&nbsp;&nbsp;Now: &quot;, $i-1, &quot;:[$treelet-&gt;[$i-1]]\n&quot;;</td></tr>
<tr><td class="h">680</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$i;</td></tr>
<tr><td class="h">681</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next; </td></tr>
<tr><td class="h">682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# since we just pulled the possibly last node out from under</td></tr>
<tr><td class="h">683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;ourselves, we can&#39;t just redo()</td></tr>
<tr><td class="h">684</td><td colspan="7"></td></tr><tr><td class="h">685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( ref $treelet-&gt;[$i] ) {</td></tr>
<tr><td class="h">686</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;Enqueuing &quot;, pretty($treelet-&gt;[$i]), &quot; for traversal.\n&quot;;</td></tr>
<tr><td class="h">687</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @stack, $treelet-&gt;[$i];</td></tr>
<tr><td class="h">688</td><td colspan="7"></td></tr><tr><td class="h">689</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L689">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($treelet-&gt;[$i][0] eq &#39;L&#39;) {</td></tr>
<tr><td class="h">690</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $thing;</td></tr>
<tr><td class="h">691</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $attrname (&#39;section&#39;, &#39;to&#39;) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">692</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L692">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L692">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(defined($thing = $treelet-&gt;[$i][1]{$attrname}) and ref $thing) {</td></tr>
<tr><td class="h">693</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $thing;</td></tr>
<tr><td class="h">694</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;+Enqueuing &quot;,</td></tr>
<tr><td class="h">695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pretty( $treelet-&gt;[$i][1]{$attrname} ),</td></tr>
<tr><td class="h">696</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; as an attribute value to tweak.\n&quot;;</td></tr>
<tr><td class="h">697</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">700</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">703</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;End of _wrap_up traversal.\n\n&quot;;</td></tr>
<tr><td class="h">704</td><td colspan="7"></td></tr><tr><td class="h">705</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">707</td><td colspan="7"></td></tr><tr><td class="h">708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.</td></tr>
<tr><td class="h">709</td><td colspan="7"></td></tr><tr><td class="h">710</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _remap_sequences {</td></tr>
<tr><td class="h">711</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L711">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,@stack) = @_;</td></tr>
<tr><td class="h">712</td><td colspan="7"></td></tr><tr><td class="h">713</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L713">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L713">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;if(@stack == 1 and @{ $stack[0] } == 3 and !ref $stack[0][2]) {</td></tr>
<tr><td class="h">714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# VERY common case: abort it.</td></tr>
<tr><td class="h">715</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Skipping _remap_sequences: formatless treelet.\n&quot;;</td></tr>
<tr><td class="h">716</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">718</td><td colspan="7"></td></tr><tr><td class="h">719</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L719">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $map = ($self-&gt;{&#39;accept_codes&#39;} || die &quot;NO accept_codes in $self?!?&quot;);</td></tr>
<tr><td class="h">720</td><td colspan="7"></td></tr><tr><td class="h">721</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $start_line = $stack[0][1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">722</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and printf</td></tr>
<tr><td class="h">723</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&quot;\nAbout to start _remap_sequences on treelet from line %s.\n&quot;,</td></tr>
<tr><td class="h">724</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;$start_line || &#39;[?]&#39;</td></tr>
<tr><td class="h">725</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 3 and print &quot; Map: &quot;,</td></tr>
<tr><td class="h">727</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;join(&#39;; &#39;, map &quot;$_=&quot; . (</td></tr>
<tr><td class="h">728</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref($map-&gt;{$_}) ? join(&quot;,&quot;, @{$map-&gt;{$_}}) : $map-&gt;{$_}</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</td></tr>
<tr><td class="h">730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort keys %$map ),</td></tr>
<tr><td class="h">731</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;(&quot;B~C~E~F~I~L~S~X~Z&quot; eq join &#39;~&#39;, sort keys %$map)</td></tr>
<tr><td class="h">732</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? &quot;&nbsp;&nbsp;(all normal)\n&quot; : &quot;\n&quot;</td></tr>
<tr><td class="h">733</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">734</td><td colspan="7"></td></tr><tr><td class="h">735</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# A recursive algorithm implemented iteratively!&nbsp;&nbsp;Whee!</td></tr>
<tr><td class="h">736</td><td colspan="7"></td></tr><tr><td class="h">737</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($is, $was, $i, $treelet); # scratch</td></tr>
<tr><td class="h">738</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;while($treelet = shift @stack) {</td></tr>
<tr><td class="h">739</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot; Considering children of this $treelet-&gt;[0] node...\n&quot;;</td></tr>
<tr><td class="h">740</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for($i = 2; $i &lt; @$treelet; ++$i) { # iterate over children</td></tr>
<tr><td class="h">741</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L741">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless ref $treelet-&gt;[$i];&nbsp;&nbsp;# text nodes are uninteresting</td></tr>
<tr><td class="h">742</td><td colspan="7"></td></tr><tr><td class="h">743</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;Noting child $i : $treelet-&gt;[$i][0]&lt;...&gt;\n&quot;;</td></tr>
<tr><td class="h">744</td><td colspan="7"></td></tr><tr><td class="h">745</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$is = $treelet-&gt;[$i][0] = $map-&gt;{ $was = $treelet-&gt;[$i][0] };</td></tr>
<tr><td class="h">746</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( DEBUG &gt; 3 ) {</td></tr>
<tr><td class="h">747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!defined $is) {</td></tr>
<tr><td class="h">748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;Code $was&lt;&gt; is UNKNOWN!\n&quot;;</td></tr>
<tr><td class="h">749</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($is eq $was) {</td></tr>
<tr><td class="h">750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;&nbsp;Code $was&lt;&gt; stays the same.\n&quot;;</td></tr>
<tr><td class="h">751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else&nbsp;&nbsp;{</td></tr>
<tr><td class="h">752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;Code $was&lt;&gt; maps to &quot;,</td></tr>
<tr><td class="h">753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref($is)</td></tr>
<tr><td class="h">754</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? ( &quot;tags &quot;, map(&quot;$_&lt;&quot;, @$is), &#39;...&#39;, map(&#39;&gt;&#39;, @$is), &quot;\n&quot; )</td></tr>
<tr><td class="h">755</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &quot;tag $is&lt;...&gt;.\n&quot;;</td></tr>
<tr><td class="h">756</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">757</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">758</td><td colspan="7"></td></tr><tr><td class="h">759</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L759">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!defined $is) {</td></tr>
<tr><td class="h">760</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine($start_line, &quot;Deleting unknown formatting code $was&lt;&gt;&quot;);</td></tr>
<tr><td class="h">761</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$is = $treelet-&gt;[$i][0] = &#39;1&#39;;&nbsp;&nbsp;# But saving the children!</td></tr>
<tr><td class="h">762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# I could also insert a leading &quot;$was&lt;&quot; and tailing &quot;&gt;&quot; as</td></tr>
<tr><td class="h">763</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# children of this node, but something about that seems icky.</td></tr>
<tr><td class="h">764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">765</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L765">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L765">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L765">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ref $is) {</td></tr>
<tr><td class="h">766</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @dynasty = @$is;</td></tr>
<tr><td class="h">767</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;&nbsp;&nbsp;&nbsp;&nbsp;Renaming $was node to $dynasty[-1]\n&quot;; </td></tr>
<tr><td class="h">768</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$treelet-&gt;[$i][0] = pop @dynasty;</td></tr>
<tr><td class="h">769</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $nugget;</td></tr>
<tr><td class="h">770</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(@dynasty) {</td></tr>
<tr><td class="h">771</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and printf</td></tr>
<tr><td class="h">772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&nbsp;&nbsp;&nbsp;&nbsp;Grafting a new %s node between %s and %s\n&quot;,</td></tr>
<tr><td class="h">773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dynasty[-1], $treelet-&gt;[0], $treelet-&gt;[$i][0], </td></tr>
<tr><td class="h">774</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">775</td><td colspan="7"></td></tr><tr><td class="h">776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$nugget = ;</td></tr>
<tr><td class="h">777</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$treelet, $i, 1, [pop(@dynasty), {}, $treelet-&gt;[$i]];</td></tr>
<tr><td class="h">778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# relace node with a new parent</td></tr>
<tr><td class="h">779</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">780</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($is eq &#39;0&#39;) {</td></tr>
<tr><td class="h">781</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1); # just nix this node (and its descendants)</td></tr>
<tr><td class="h">782</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$i;&nbsp;&nbsp;# back-update the counter</td></tr>
<tr><td class="h">783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($is eq &#39;1&#39;) {</td></tr>
<tr><td class="h">784</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1 # replace this node with its children!</td></tr>
<tr><td class="h">785</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; splice @{ $treelet-&gt;[$i] },2</td></tr>
<tr><td class="h">786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# (not catching its first two (non-child) items)</td></tr>
<tr><td class="h">787</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">788</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$i;&nbsp;&nbsp;# back up for new stuff</td></tr>
<tr><td class="h">789</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# otherwise it&#39;s unremarkable</td></tr>
<tr><td class="h">791</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i];&nbsp;&nbsp;# just recurse</td></tr>
<tr><td class="h">792</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">795</td><td colspan="7"></td></tr><tr><td class="h">796</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;End of _remap_sequences traversal.\n\n&quot;;</td></tr>
<tr><td class="h">797</td><td colspan="7"></td></tr><tr><td class="h">798</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L798">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L798">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;if(@_ == 2 and @{ $_[1] } == 3 and !ref $_[1][2]) {</td></tr>
<tr><td class="h">799</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Noting that the treelet is now formatless.\n&quot;;</td></tr>
<tr><td class="h">800</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">802</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">803</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">804</td><td colspan="7"></td></tr><tr><td class="h">805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">806</td><td colspan="7"></td></tr><tr><td class="h">807</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_extend {</td></tr>
<tr><td class="h">808</td><td colspan="7"></td></tr><tr><td class="h">809</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# &quot;Go to an extreme, move back to a more comfortable place&quot;</td></tr>
<tr><td class="h">810</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;-- /Oblique Strategies/,&nbsp;&nbsp;Brian Eno and Peter Schmidt</td></tr>
<tr><td class="h">811</td><td colspan="7"></td></tr><tr><td class="h">812</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L812">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self, $para) = @_;</td></tr>
<tr><td class="h">813</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @$para, 2;</td></tr>
<tr><td class="h">814</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$content =~ s/^\s+//s;</td></tr>
<tr><td class="h">815</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$content =~ s/\s+$//s;</td></tr>
<tr><td class="h">816</td><td colspan="7"></td></tr><tr><td class="h">817</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Ogling extensor: =extend $content\n&quot;;</td></tr>
<tr><td class="h">818</td><td colspan="7"></td></tr><tr><td class="h">819</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L819">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;if($content =~</td></tr>
<tr><td class="h">820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;m/^</td></tr>
<tr><td class="h">821</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\S+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 1 : new item</td></tr>
<tr><td class="h">822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s+</td></tr>
<tr><td class="h">823</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\S+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2 : fallback(s)</td></tr>
<tr><td class="h">824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(?:\s+(\S+))? # 3 : element name(s)</td></tr>
<tr><td class="h">825</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s*</td></tr>
<tr><td class="h">826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$</td></tr>
<tr><td class="h">827</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;/xs</td></tr>
<tr><td class="h">828</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">829</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_letter = $1;</td></tr>
<tr><td class="h">830</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fallbacks_one = $2;</td></tr>
<tr><td class="h">831</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elements_one;</td></tr>
<tr><td class="h">832</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L832">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elements_one = defined($3) ? $3 : $1;</td></tr>
<tr><td class="h">833</td><td colspan="7"></td></tr><tr><td class="h">834</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Extensor has good syntax.\n&quot;;</td></tr>
<tr><td class="h">835</td><td colspan="7"></td></tr><tr><td class="h">836</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L836">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L836">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($new_letter =~ m/^[A-Z]$/s or $new_letter) {</td></tr>
<tr><td class="h">837</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; $new_letter isn&#39;t a valid thing to entend.\n&quot;;</td></tr>
<tr><td class="h">838</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">839</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">840</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You can extend only formatting codes A-Z, not like \&quot;$new_letter\&quot;&quot;</td></tr>
<tr><td class="h">841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">842</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">843</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">844</td><td colspan="7"></td></tr><tr><td class="h">845</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L845">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(grep $new_letter eq $_, @Known_formatting_codes) {</td></tr>
<tr><td class="h">846</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; $new_letter isn&#39;t a good thing to extend, because known.\n&quot;;</td></tr>
<tr><td class="h">847</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">849</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You can&#39;t extend an established code like \&quot;$new_letter\&quot;&quot;</td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">851</td><td colspan="7"></td></tr><tr><td class="h">852</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#TODO: or allow if last bit is same?</td></tr>
<tr><td class="h">853</td><td colspan="7"></td></tr><tr><td class="h">854</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">856</td><td colspan="7"></td></tr><tr><td class="h">857</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L857">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L857">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($fallbacks_one =~ m/^[A-Z](,[A-Z])*$/s&nbsp;&nbsp;# like &quot;B&quot;, &quot;M,I&quot;, etc.</td></tr>
<tr><td class="h">858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $fallbacks_one eq &#39;0&#39; or $fallbacks_one eq &#39;1&#39;</td></tr>
<tr><td class="h">859</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">860</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">861</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Format for second =extend parameter must be like&quot;</td></tr>
<tr><td class="h">863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot; M or 1 or 0 or M,N or M,N,O but you have it like &quot;</td></tr>
<tr><td class="h">864</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $fallbacks_one</td></tr>
<tr><td class="h">865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">866</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">868</td><td colspan="7"></td></tr><tr><td class="h">869</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L869">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($elements_one =~ m/^[^ ,]+(,[^ ,]+)*$/s) { # like &quot;B&quot;, &quot;M,I&quot;, etc.</td></tr>
<tr><td class="h">870</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">871</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Format for third =extend parameter: like foo or bar,Baz,qu:ux but not like &quot;</td></tr>
<tr><td class="h">873</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $elements_one</td></tr>
<tr><td class="h">874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">875</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">877</td><td colspan="7"></td></tr><tr><td class="h">878</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @fallbacks&nbsp;&nbsp;= split &#39;,&#39;, $fallbacks_one,&nbsp;&nbsp;-1;</td></tr>
<tr><td class="h">879</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @elements&nbsp;&nbsp;&nbsp;= split &#39;,&#39;, $elements_one, -1;</td></tr>
<tr><td class="h">880</td><td colspan="7"></td></tr><tr><td class="h">881</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $f (@fallbacks) {</td></tr>
<tr><td class="h">882</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L882">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L882">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if exists $Known_formatting_codes{$f} or $f eq &#39;0&#39; or $f eq &#39;1&#39;;</td></tr>
<tr><td class="h">883</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;&nbsp;&nbsp;Can&#39;t fall back on unknown code $f\n&quot;;</td></tr>
<tr><td class="h">884</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Can&#39;t use unknown formatting code &#39;$f&#39; as a fallback for &#39;$new_letter&#39;&quot;</td></tr>
<tr><td class="h">887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">888</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">889</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">890</td><td colspan="7"></td></tr><tr><td class="h">891</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and printf &quot;Extensor: Fallbacks &lt;%s&gt; Elements &lt;%s&gt;.\n&quot;,</td></tr>
<tr><td class="h">892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fallbacks, @elements;</td></tr>
<tr><td class="h">893</td><td colspan="7"></td></tr><tr><td class="h">894</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $canonical_form;</td></tr>
<tr><td class="h">895</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $e (@elements) {</td></tr>
<tr><td class="h">896</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L896">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(exists $self-&gt;{&#39;accept_codes&#39;}{$e}) {</td></tr>
<tr><td class="h">897</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Mapping &#39;$new_letter&#39; to known extension &#39;$e&#39;\n&quot;;</td></tr>
<tr><td class="h">898</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$canonical_form = $e;</td></tr>
<tr><td class="h">899</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last; # first acceptable elementname wins!</td></tr>
<tr><td class="h">900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">901</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Can&#39;t map &#39;$new_letter&#39; to unknown extension &#39;$e&#39;\n&quot;;</td></tr>
<tr><td class="h">902</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">903</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">904</td><td colspan="7"></td></tr><tr><td class="h">905</td><td colspan="7"></td></tr><tr><td class="h">906</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L906">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $canonical_form ) {</td></tr>
<tr><td class="h">907</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We found a good N =&gt; elementname mapping</td></tr>
<tr><td class="h">908</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;accept_codes&#39;}{$new_letter} = $canonical_form;</td></tr>
<tr><td class="h">909</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print</td></tr>
<tr><td class="h">910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Extensor maps $new_letter =&gt; known element $canonical_form.\n&quot;;</td></tr>
<tr><td class="h">911</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">912</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We have to use the fallback(s), which might be &#39;0&#39;, or &#39;1&#39;.</td></tr>
<tr><td class="h">913</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L913">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;accept_codes&#39;}{$new_letter}</td></tr>
<tr><td class="h">914</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= (@fallbacks == 1) ? $fallbacks[0] : \@fallbacks;</td></tr>
<tr><td class="h">915</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print</td></tr>
<tr><td class="h">916</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Extensor maps $new_letter =&gt; fallbacks @fallbacks.\n&quot;;</td></tr>
<tr><td class="h">917</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">918</td><td colspan="7"></td></tr><tr><td class="h">919</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">920</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Extensor has bad syntax.\n&quot;;</td></tr>
<tr><td class="h">921</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">923</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Unknown =extend syntax: $content&quot;</td></tr>
<tr><td class="h">924</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">925</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">926</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">927</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">928</td><td colspan="7"></td></tr><tr><td class="h">929</td><td colspan="7"></td></tr><tr><td class="h">930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.</td></tr>
<tr><td class="h">931</td><td colspan="7"></td></tr><tr><td class="h">932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _treat_Zs {&nbsp;&nbsp;# Nix Z&lt;...&gt;&#39;s</td></tr>
<tr><td class="h">933</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L933">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,@stack) = @_;</td></tr>
<tr><td class="h">934</td><td colspan="7"></td></tr><tr><td class="h">935</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($i, $treelet);</td></tr>
<tr><td class="h">936</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $start_line = $stack[0][1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">937</td><td colspan="7"></td></tr><tr><td class="h">938</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# A recursive algorithm implemented iteratively!&nbsp;&nbsp;Whee!</td></tr>
<tr><td class="h">939</td><td colspan="7"></td></tr><tr><td class="h">940</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;while($treelet = shift @stack) {</td></tr>
<tr><td class="h">941</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for($i = 2; $i &lt; @$treelet; ++$i) { # iterate over children</td></tr>
<tr><td class="h">942</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L942">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless ref $treelet-&gt;[$i];&nbsp;&nbsp;# text nodes are uninteresting</td></tr>
<tr><td class="h">943</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L943">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless($treelet-&gt;[$i][0] eq &#39;Z&#39;) {</td></tr>
<tr><td class="h">944</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i]; # recurse</td></tr>
<tr><td class="h">945</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">947</td><td colspan="7"></td></tr><tr><td class="h">948</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Nixing Z node @{$treelet-&gt;[$i]}\n&quot;;</td></tr>
<tr><td class="h">949</td><td colspan="7"></td></tr><tr><td class="h">950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# bitch UNLESS it&#39;s empty</td></tr>
<tr><td class="h">951</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L951">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L951">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless(&nbsp;&nbsp;@{$treelet-&gt;[$i]} == 2</td></tr>
<tr><td class="h">952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or (@{$treelet-&gt;[$i]} == 3 and $treelet-&gt;[$i][2] eq &#39;&#39;)</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">954</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;A non-empty Z&lt;&gt;&quot; );</td></tr>
<tr><td class="h">955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# but kill it anyway</td></tr>
<tr><td class="h">956</td><td colspan="7"></td></tr><tr><td class="h">957</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1); # thereby just nix this node.</td></tr>
<tr><td class="h">958</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$i;</td></tr>
<tr><td class="h">959</td><td colspan="7"></td></tr><tr><td class="h">960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">962</td><td colspan="7"></td></tr><tr><td class="h">963</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">965</td><td colspan="7"></td></tr><tr><td class="h">966</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">967</td><td colspan="7"></td></tr><tr><td class="h">968</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Quoting perlpodspec:</td></tr>
<tr><td class="h">969</td><td colspan="7"></td></tr><tr><td class="h">970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># In parsing an L&lt;...&gt; code, Pod parsers must distinguish at least four</td></tr>
<tr><td class="h">971</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># attributes:</td></tr>
<tr><td class="h">972</td><td colspan="7"></td></tr><tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# Not used.&nbsp;&nbsp;Expressed via the element children plus</td></tr>
<tr><td class="h">974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#############&nbsp;&nbsp;the value of the &quot;content-implicit&quot; flag.</td></tr>
<tr><td class="h">975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># First:</td></tr>
<tr><td class="h">976</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The link-text. If there is none, this must be undef. (E.g., in &quot;L&lt;Perl</td></tr>
<tr><td class="h">977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Functions|perlfunc&gt;&quot;, the link-text is &quot;Perl Functions&quot;. In</td></tr>
<tr><td class="h">978</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;L&lt;Time::HiRes&gt;&quot; and even &quot;L&lt;|Time::HiRes&gt;&quot;, there is no link text. Note</td></tr>
<tr><td class="h">979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># that link text may contain formatting.)</td></tr>
<tr><td class="h">980</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># </td></tr>
<tr><td class="h">981</td><td colspan="7"></td></tr><tr><td class="h">982</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# The element children</td></tr>
<tr><td class="h">983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Second:</td></tr>
<tr><td class="h">984</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The possibly inferred link-text -- i.e., if there was no real link text,</td></tr>
<tr><td class="h">985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># then this is the text that we&#39;ll infer in its place. (E.g., for</td></tr>
<tr><td class="h">986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;L&lt;Getopt::Std&gt;&quot;, the inferred link text is &quot;Getopt::Std&quot;.)</td></tr>
<tr><td class="h">987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">988</td><td colspan="7"></td></tr><tr><td class="h">989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# The &quot;to&quot; attribute (which might be text, or a treelet)</td></tr>
<tr><td class="h">990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Third:</td></tr>
<tr><td class="h">991</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The name or URL, or undef if none. (E.g., in &quot;L&lt;Perl</td></tr>
<tr><td class="h">992</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Functions|perlfunc&gt;&quot;, the name -- also sometimes called the page -- is</td></tr>
<tr><td class="h">993</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;perlfunc&quot;. In &quot;L&lt;/CAVEATS&gt;&quot;, the name is undef.)</td></tr>
<tr><td class="h">994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># </td></tr>
<tr><td class="h">995</td><td colspan="7"></td></tr><tr><td class="h">996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# The &quot;section&quot; attribute (which might be next, or a treelet)</td></tr>
<tr><td class="h">997</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Fourth:</td></tr>
<tr><td class="h">998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The section (AKA &quot;item&quot; in older perlpods), or undef if none. E.g., in</td></tr>
<tr><td class="h">999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Getopt::Std/DESCRIPTION, &quot;DESCRIPTION&quot; is the section. (Note that this</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># is not the same as a manpage section like the &quot;5&quot; in &quot;man 5 crontab&quot;.</td></tr>
<tr><td class="h">1001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;Section Foo&quot; in the Pod sense means the part of the text that&#39;s</td></tr>
<tr><td class="h">1002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># introduced by the heading or item whose text is &quot;Foo&quot;.)</td></tr>
<tr><td class="h">1003</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># </td></tr>
<tr><td class="h">1004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Pod parsers may also note additional attributes including:</td></tr>
<tr><td class="h">1005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1006</td><td colspan="7"></td></tr><tr><td class="h">1007</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# The &quot;type&quot; attribute.</td></tr>
<tr><td class="h">1008</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Fifth:</td></tr>
<tr><td class="h">1009</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># A flag for whether item 3 (if present) is a URL (like</td></tr>
<tr><td class="h">1010</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;http://lists.perl.org&quot; is), in which case there should be no section</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># attribute; a Pod name (like &quot;perldoc&quot; and &quot;Getopt::Std&quot; are); or</td></tr>
<tr><td class="h">1012</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># possibly a man page name (like &quot;crontab(5)&quot; is).</td></tr>
<tr><td class="h">1013</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1014</td><td colspan="7"></td></tr><tr><td class="h">1015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">############# The &quot;raw&quot; attribute that is already there.</td></tr>
<tr><td class="h">1016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Sixth:</td></tr>
<tr><td class="h">1017</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The raw original L&lt;...&gt; content, before text is split on &quot;|&quot;, &quot;/&quot;, etc,</td></tr>
<tr><td class="h">1018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># and before E&lt;...&gt; codes are expanded.</td></tr>
<tr><td class="h">1019</td><td colspan="7"></td></tr><tr><td class="h">1020</td><td colspan="7"></td></tr><tr><td class="h">1021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># For L&lt;...&gt; codes without a &quot;name|&quot; part, only E&lt;...&gt; and Z&lt;&gt; codes may</td></tr>
<tr><td class="h">1022</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># occur -- no other formatting codes. That is, authors should not use</td></tr>
<tr><td class="h">1023</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;L&lt;B&lt;Foo::Bar&gt;&gt;&quot;.</td></tr>
<tr><td class="h">1024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1025</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Note, however, that formatting codes and Z&lt;&gt;&#39;s can occur in any and all</td></tr>
<tr><td class="h">1026</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># parts of an L&lt;...&gt; (i.e., in name, section, text, and url).</td></tr>
<tr><td class="h">1027</td><td colspan="7"></td></tr><tr><td class="h">1028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _treat_Ls {&nbsp;&nbsp;# Process our dear dear friends, the L&lt;...&gt; sequences</td></tr>
<tr><td class="h">1029</td><td colspan="7"></td></tr><tr><td class="h">1030</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;name&gt;</td></tr>
<tr><td class="h">1031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;name/&quot;sec&quot;&gt; or L&lt;name/sec&gt;</td></tr>
<tr><td class="h">1032</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;/&quot;sec&quot;&gt; or L&lt;/sec&gt; or L&lt;&quot;sec&quot;&gt;</td></tr>
<tr><td class="h">1033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;text|name&gt;</td></tr>
<tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;text|name/&quot;sec&quot;&gt; or L&lt;text|name/sec&gt;</td></tr>
<tr><td class="h">1035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;text|/&quot;sec&quot;&gt; or L&lt;text|/sec&gt; or L&lt;text|&quot;sec&quot;&gt;</td></tr>
<tr><td class="h">1036</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;scheme:...&gt;</td></tr>
<tr><td class="h">1037</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# L&lt;text|scheme:...&gt;</td></tr>
<tr><td class="h">1038</td><td colspan="7"></td></tr><tr><td class="h">1039</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1039">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,@stack) = @_;</td></tr>
<tr><td class="h">1040</td><td colspan="7"></td></tr><tr><td class="h">1041</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($i, $treelet);</td></tr>
<tr><td class="h">1042</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $start_line = $stack[0][1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">1043</td><td colspan="7"></td></tr><tr><td class="h">1044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# A recursive algorithm implemented iteratively!&nbsp;&nbsp;Whee!</td></tr>
<tr><td class="h">1045</td><td colspan="7"></td></tr><tr><td class="h">1046</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;while($treelet = shift @stack) {</td></tr>
<tr><td class="h">1047</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for(my $i = 2; $i &lt; @$treelet; ++$i) {</td></tr>
<tr><td class="h">1048</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# iterate over children of current tree node</td></tr>
<tr><td class="h">1049</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1049">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless ref $treelet-&gt;[$i];&nbsp;&nbsp;# text nodes are uninteresting</td></tr>
<tr><td class="h">1050</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1050">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless($treelet-&gt;[$i][0] eq &#39;L&#39;) {</td></tr>
<tr><td class="h">1051</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i]; # recurse</td></tr>
<tr><td class="h">1052</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1053</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1054</td><td colspan="7"></td></tr><tr><td class="h">1055</td><td colspan="7"></td></tr><tr><td class="h">1056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# By here, $treelet-&gt;[$i] is definitely an L node</td></tr>
<tr><td class="h">1057</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ell = $treelet-&gt;[$i];</td></tr>
<tr><td class="h">1058</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Ogling L node $ell\n&quot;;</td></tr>
<tr><td class="h">1059</td><td colspan="7"></td></tr><tr><td class="h">1060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# bitch if it&#39;s empty</td></tr>
<tr><td class="h">1061</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1061">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1061">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;&nbsp;@{$ell} == 2</td></tr>
<tr><td class="h">1062</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or (@{$ell} == 3 and $ell-&gt;[2] eq &#39;&#39;)</td></tr>
<tr><td class="h">1063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1064</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;An empty L&lt;&gt;&quot; );</td></tr>
<tr><td class="h">1065</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$treelet-&gt;[$i] = &#39;L&lt;&gt;&#39;;&nbsp;&nbsp;# just make it a text node</td></tr>
<tr><td class="h">1066</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;&nbsp;&nbsp;# and move on</td></tr>
<tr><td class="h">1067</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1068</td><td colspan="7"></td></tr><tr><td class="h">1069</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1069">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1069">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (! ref $ell-&gt;[2]&nbsp;&nbsp;&amp;&amp; $ell-&gt;[2] =~ /\A\s/)</td></tr>
<tr><td class="h">1070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||(! ref $ell-&gt;[-1] &amp;&amp; $ell-&gt;[-1] =~ /\s\z/)</td></tr>
<tr><td class="h">1071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1072</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;L&lt;&gt; starts or ends with whitespace&quot; );</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1074</td><td colspan="7"></td></tr><tr><td class="h">1075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Catch URLs:</td></tr>
<tr><td class="h">1076</td><td colspan="7"></td></tr><tr><td class="h">1077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# there are a number of possible cases:</td></tr>
<tr><td class="h">1078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 1) text node containing url: http://foo.com</td></tr>
<tr><td class="h">1079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;-&gt; [ &#39;http://foo.com&#39; ]</td></tr>
<tr><td class="h">1080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2) text node containing url and text: foo|http://foo.com</td></tr>
<tr><td class="h">1081</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;-&gt; [ &#39;foo|http://foo.com&#39; ]</td></tr>
<tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 3) text node containing url start: mailto:xE&lt;at&gt;foo.com</td></tr>
<tr><td class="h">1083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;-&gt; [ &#39;mailto:x&#39;, [ E ... ], &#39;foo.com&#39; ]</td></tr>
<tr><td class="h">1084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 4) text node containing url start and text: foo|mailto:xE&lt;at&gt;foo.com</td></tr>
<tr><td class="h">1085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;-&gt; [ &#39;foo|mailto:x&#39;, [ E ... ], &#39;foo.com&#39; ]</td></tr>
<tr><td class="h">1086</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 5) other nodes containing text and url start: OE&lt;39&gt;Malley|http://foo.com</td></tr>
<tr><td class="h">1087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;-&gt; [ &#39;O&#39;, [ E ... ], &#39;Malley&#39;, &#39;|http://foo.com&#39; ]</td></tr>
<tr><td class="h">1088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ... etc.</td></tr>
<tr><td class="h">1089</td><td colspan="7"></td></tr><tr><td class="h">1090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# anything before the url is part of the text.</td></tr>
<tr><td class="h">1091</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# anything after it is part of the url.</td></tr>
<tr><td class="h">1092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the url text node itself may contain parts of both.</td></tr>
<tr><td class="h">1093</td><td colspan="7"></td></tr><tr><td class="h">1094</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1094">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (my ($url_index, $text_part, $url_part) =</td></tr>
<tr><td class="h">1095</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# grep is no good here; we want to bail out immediately so that we can</td></tr>
<tr><td class="h">1096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# use $1, $2, etc. without having to do the match twice.</td></tr>
<tr><td class="h">1097</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub {</td></tr>
<tr><td class="h">1098</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1098">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (2..$#$ell) {</td></tr>
<tr><td class="h">1099</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1099">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if ref $ell-&gt;[$_];</td></tr>
<tr><td class="h">1100</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1100">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless $ell-&gt;[$_] =~ m/^(?:([^|]*)\|)?(\w+:[^:\s]\S*)$/s;</td></tr>
<tr><td class="h">1101</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ($_, $1, $2);</td></tr>
<tr><td class="h">1102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1103</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}-&gt;()</td></tr>
<tr><td class="h">1105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1106</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;type&#39;} = &#39;url&#39;;</td></tr>
<tr><td class="h">1107</td><td colspan="7"></td></tr><tr><td class="h">1108</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @text = @{$ell}[2..$url_index-1];</td></tr>
<tr><td class="h">1109</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1109">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @text, $text_part if defined $text_part;</td></tr>
<tr><td class="h">1110</td><td colspan="7"></td></tr><tr><td class="h">1111</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @url&nbsp;&nbsp;= @{$ell}[$url_index+1..$#$ell];</td></tr>
<tr><td class="h">1112</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @url, $url_part;</td></tr>
<tr><td class="h">1113</td><td colspan="7"></td></tr><tr><td class="h">1114</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1114">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless (@text) {</td></tr>
<tr><td class="h">1115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;content-implicit&#39;} = &#39;yes&#39;;</td></tr>
<tr><td class="h">1116</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@text = @url;</td></tr>
<tr><td class="h">1117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1118</td><td colspan="7"></td></tr><tr><td class="h">1119</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1119">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{to} = Pod::Simple::LinkSection-&gt;new(</td></tr>
<tr><td class="h">1120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@url == 1</td></tr>
<tr><td class="h">1121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? $url[0]</td></tr>
<tr><td class="h">1122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: [ &#39;&#39;, {}, @url ],</td></tr>
<tr><td class="h">1123</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1124</td><td colspan="7"></td></tr><tr><td class="h">1125</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$ell, 2, $#$ell, @text;</td></tr>
<tr><td class="h">1126</td><td colspan="7"></td></tr><tr><td class="h">1127</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1129</td><td colspan="7"></td></tr><tr><td class="h">1130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Catch some very simple and/or common cases</td></tr>
<tr><td class="h">1131</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1131">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1131">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@{$ell} == 3 and ! ref $ell-&gt;[2]) {</td></tr>
<tr><td class="h">1132</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $it = $ell-&gt;[2];</td></tr>
<tr><td class="h">1133</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1133">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($it =~ m{^[^/|]+[(][-a-zA-Z0-9]+[)]$}s) { # man sections</td></tr>
<tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hopefully neither too broad nor too restrictive a RE</td></tr>
<tr><td class="h">1135</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Catching \&quot;$it\&quot; as manpage link.\n&quot;;</td></tr>
<tr><td class="h">1136</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;type&#39;} = &#39;man&#39;;</td></tr>
<tr><td class="h">1137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# This&#39;s the only place where man links can get made.</td></tr>
<tr><td class="h">1138</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;content-implicit&#39;} = &#39;yes&#39;;</td></tr>
<tr><td class="h">1139</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;to&#39;&nbsp;&nbsp;} =</td></tr>
<tr><td class="h">1140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pod::Simple::LinkSection-&gt;new( $it ); # treelet!</td></tr>
<tr><td class="h">1141</td><td colspan="7"></td></tr><tr><td class="h">1142</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1144</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1144">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($it =~ m/^[^\/\|,\$\%\@\ \&quot;\&lt;\&gt;\:\#\&amp;\*\{\}\[\]\(\)]+(\:\:[^\/\|,\$\%\@\ \&quot;\&lt;\&gt;\:\#\&amp;\*\{\}\[\]\(\)]+)*$/s) {</td></tr>
<tr><td class="h">1145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Extremely forgiving idea of what constitutes a bare</td></tr>
<tr><td class="h">1146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;modulename link like L&lt;Foo::Bar&gt; or even L&lt;Thing::1.0::Docs::Tralala&gt;</td></tr>
<tr><td class="h">1147</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Catching \&quot;$it\&quot; as ho-hum L&lt;Modulename&gt; link.\n&quot;;</td></tr>
<tr><td class="h">1148</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;type&#39;} = &#39;pod&#39;;</td></tr>
<tr><td class="h">1149</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;content-implicit&#39;} = &#39;yes&#39;;</td></tr>
<tr><td class="h">1150</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;to&#39;&nbsp;&nbsp;} =</td></tr>
<tr><td class="h">1151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pod::Simple::LinkSection-&gt;new( $it ); # treelet!</td></tr>
<tr><td class="h">1152</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# else fall thru...</td></tr>
<tr><td class="h">1155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1156</td><td colspan="7"></td></tr><tr><td class="h">1157</td><td colspan="7"></td></tr><tr><td class="h">1158</td><td colspan="7"></td></tr><tr><td class="h">1159</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ...Uhoh, here&#39;s the real L&lt;...&gt; parsing stuff...</td></tr>
<tr><td class="h">1160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# &quot;With the ill behavior, with the ill behavior, with the ill behavior...&quot;</td></tr>
<tr><td class="h">1161</td><td colspan="7"></td></tr><tr><td class="h">1162</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Running a real parse on this non-trivial L\n&quot;;</td></tr>
<tr><td class="h">1163</td><td colspan="7"></td></tr><tr><td class="h">1164</td><td colspan="7"></td></tr><tr><td class="h">1165</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $link_text; # set to an arrayref if found</td></tr>
<tr><td class="h">1166</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @ell_content = @$ell;</td></tr>
<tr><td class="h">1167</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @ell_content,0,2; # Knock off the &#39;L&#39; and {} bits</td></tr>
<tr><td class="h">1168</td><td colspan="7"></td></tr><tr><td class="h">1169</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot; Ell content to start: &quot;,</td></tr>
<tr><td class="h">1170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pretty(@ell_content), &quot;\n&quot;;</td></tr>
<tr><td class="h">1171</td><td colspan="7"></td></tr><tr><td class="h">1172</td><td colspan="7"></td></tr><tr><td class="h">1173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Look for the &quot;|&quot; -- only in CHILDREN (not all underlings!)</td></tr>
<tr><td class="h">1174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Like L&lt;I like the strictness|strict&gt;</td></tr>
<tr><td class="h">1175</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;Peering at L content for a &#39;|&#39; ...\n&quot;;</td></tr>
<tr><td class="h">1177</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(my $j = 0; $j &lt; @ell_content; ++$j) {</td></tr>
<tr><td class="h">1178</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1178">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if ref $ell_content[$j];</td></tr>
<tr><td class="h">1179</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;Peering at L-content text bit \&quot;$ell_content[$j]\&quot; for a &#39;|&#39;.\n&quot;;</td></tr>
<tr><td class="h">1181</td><td colspan="7"></td></tr><tr><td class="h">1182</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1182">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($ell_content[$j] =~ m/^([^\|]*)\|(.*)$/s) {</td></tr>
<tr><td class="h">1183</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @link_text = ($1);&nbsp;&nbsp;&nbsp;# might be 0-length</td></tr>
<tr><td class="h">1184</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell_content[$j] = $2;&nbsp;&nbsp;# might be 0-length</td></tr>
<tr><td class="h">1185</td><td colspan="7"></td></tr><tr><td class="h">1186</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOUND a &#39;|&#39; in it.&nbsp;&nbsp;Splitting into [$1] + [$2]\n&quot;;</td></tr>
<tr><td class="h">1188</td><td colspan="7"></td></tr><tr><td class="h">1189</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1189">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($link_text[0] =~ m{[|/]}) {</td></tr>
<tr><td class="h">1190</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$start_line,</td></tr>
<tr><td class="h">1192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;alternative text &#39;$link_text[0]&#39; contains non-escaped | or /&quot;</td></tr>
<tr><td class="h">1193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1195</td><td colspan="7"></td></tr><tr><td class="h">1196</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @link_text, splice @ell_content, 0, $j;</td></tr>
<tr><td class="h">1197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# leaving only things at J and after</td></tr>
<tr><td class="h">1198</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1198">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ell_content =&nbsp;&nbsp;grep ref($_)||length($_), @ell_content ;</td></tr>
<tr><td class="h">1199</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1199">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link_text&nbsp;&nbsp;&nbsp;= [grep ref($_)||length($_), @link_text&nbsp;&nbsp;];</td></tr>
<tr><td class="h">1200</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and printf</td></tr>
<tr><td class="h">1201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&nbsp;&nbsp;So link text is %s\n&nbsp;&nbsp;and remaining ell content is %s\n&quot;,</td></tr>
<tr><td class="h">1202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pretty($link_text), pretty(@ell_content);</td></tr>
<tr><td class="h">1203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1206</td><td colspan="7"></td></tr><tr><td class="h">1207</td><td colspan="7"></td></tr><tr><td class="h">1208</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Now look for the &quot;/&quot; -- only in CHILDREN (not all underlings!)</td></tr>
<tr><td class="h">1209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# And afterward, anything left in @ell_content will be the raw name</td></tr>
<tr><td class="h">1210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Like L&lt;Foo::Bar/Object Methods&gt;</td></tr>
<tr><td class="h">1211</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $section_name;&nbsp;&nbsp;# set to arrayref if found</td></tr>
<tr><td class="h">1212</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;&nbsp;&nbsp;Peering at L-content for a &#39;/&#39; ...\n&quot;;</td></tr>
<tr><td class="h">1213</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(my $j = 0; $j &lt; @ell_content; ++$j) {</td></tr>
<tr><td class="h">1214</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1214">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if ref $ell_content[$j];</td></tr>
<tr><td class="h">1215</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;Peering at L-content text bit \&quot;$ell_content[$j]\&quot; for a &#39;/&#39;.\n&quot;;</td></tr>
<tr><td class="h">1217</td><td colspan="7"></td></tr><tr><td class="h">1218</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1218">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($ell_content[$j] =~ m/^([^\/]*)\/(.*)$/s) {</td></tr>
<tr><td class="h">1219</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @section_name = ($2); # might be 0-length</td></tr>
<tr><td class="h">1220</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell_content[$j] =&nbsp;&nbsp;$1;&nbsp;&nbsp;# might be 0-length</td></tr>
<tr><td class="h">1221</td><td colspan="7"></td></tr><tr><td class="h">1222</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOUND a &#39;/&#39; in it.&quot;,</td></tr>
<tr><td class="h">1224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&nbsp;&nbsp;Splitting to page [...$1] + section [$2...]\n&quot;;</td></tr>
<tr><td class="h">1225</td><td colspan="7"></td></tr><tr><td class="h">1226</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @section_name, splice @ell_content, 1+$j;</td></tr>
<tr><td class="h">1227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# leaving only things before and including J</td></tr>
<tr><td class="h">1228</td><td colspan="7"></td></tr><tr><td class="h">1229</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1229">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ell_content&nbsp;&nbsp;= grep ref($_)||length($_), @ell_content&nbsp;&nbsp;;</td></tr>
<tr><td class="h">1230</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1230">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@section_name = grep ref($_)||length($_), @section_name ;</td></tr>
<tr><td class="h">1231</td><td colspan="7"></td></tr><tr><td class="h">1232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Turn L&lt;.../&quot;foo&quot;&gt; into L&lt;.../foo&gt;</td></tr>
<tr><td class="h">1233</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1233">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1233">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1233">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@section_name</td></tr>
<tr><td class="h">1234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and !ref($section_name[0]) and !ref($section_name[-1])</td></tr>
<tr><td class="h">1235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $section_name[ 0] =~ m/^\&quot;/s</td></tr>
<tr><td class="h">1236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $section_name[-1] =~ m/\&quot;$/s</td></tr>
<tr><td class="h">1237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and !( # catch weird degenerate case of L&lt;&quot;&gt; !</td></tr>
<tr><td class="h">1238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@section_name == 1 and $section_name[0] eq &#39;&quot;&#39;</td></tr>
<tr><td class="h">1239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1241</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name[ 0] =~ s/^\&quot;//s;</td></tr>
<tr><td class="h">1242</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name[-1] =~ s/\&quot;$//s;</td></tr>
<tr><td class="h">1243</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quotes removed: &quot;, pretty(@section_name), &quot;\n&quot;;</td></tr>
<tr><td class="h">1245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1246</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and</td></tr>
<tr><td class="h">1247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No need to remove quotes in &quot;, pretty(@section_name), &quot;\n&quot;;</td></tr>
<tr><td class="h">1248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1249</td><td colspan="7"></td></tr><tr><td class="h">1250</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name = \@section_name;</td></tr>
<tr><td class="h">1251</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">1252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1253</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1254</td><td colspan="7"></td></tr><tr><td class="h">1255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Turn L&lt;&quot;Foo Bar&quot;&gt; into L&lt;/Foo Bar&gt;</td></tr>
<tr><td class="h">1256</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1256">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1256">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1256">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$section_name and @ell_content</td></tr>
<tr><td class="h">1257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and !ref($ell_content[0]) and !ref($ell_content[-1])</td></tr>
<tr><td class="h">1258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $ell_content[ 0] =~ m/^\&quot;/s</td></tr>
<tr><td class="h">1259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $ell_content[-1] =~ m/\&quot;$/s</td></tr>
<tr><td class="h">1260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and !( # catch weird degenerate case of L&lt;&quot;&gt; !</td></tr>
<tr><td class="h">1261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ell_content == 1 and $ell_content[0] eq &#39;&quot;&#39;</td></tr>
<tr><td class="h">1262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1264</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name = [splice @ell_content];</td></tr>
<tr><td class="h">1265</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name-&gt;[ 0] =~ s/^\&quot;//s;</td></tr>
<tr><td class="h">1266</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name-&gt;[-1] =~ s/\&quot;$//s;</td></tr>
<tr><td class="h">1267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1268</td><td colspan="7"></td></tr><tr><td class="h">1269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Turn L&lt;Foo Bar&gt; into L&lt;/Foo Bar&gt;.</td></tr>
<tr><td class="h">1270</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1270">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1270">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1270">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1270">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$section_name and !$link_text and @ell_content</td></tr>
<tr><td class="h">1271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and grep !ref($_) &amp;&amp; m/ /s, @ell_content</td></tr>
<tr><td class="h">1272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1273</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$section_name = [splice @ell_content];</td></tr>
<tr><td class="h">1274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That&#39;s support for the now-deprecated syntax.</td></tr>
<tr><td class="h">1275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# (Maybe generate a warning eventually?)</td></tr>
<tr><td class="h">1276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note that it deliberately won&#39;t work on L&lt;...|Foo Bar&gt;</td></tr>
<tr><td class="h">1277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1278</td><td colspan="7"></td></tr><tr><td class="h">1279</td><td colspan="7"></td></tr><tr><td class="h">1280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Now make up the link_text</td></tr>
<tr><td class="h">1281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# L&lt;Foo&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; L&lt;Foo|Foo&gt;</td></tr>
<tr><td class="h">1282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# L&lt;/Bar&gt;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; L&lt;&quot;Bar&quot;|Bar&gt;</td></tr>
<tr><td class="h">1283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# L&lt;Foo/Bar&gt; -&gt; L&lt;&quot;Bar&quot; in Foo/Foo&gt;</td></tr>
<tr><td class="h">1284</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1284">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless($link_text) {</td></tr>
<tr><td class="h">1285</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;content-implicit&#39;} = &#39;yes&#39;;</td></tr>
<tr><td class="h">1286</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link_text = [];</td></tr>
<tr><td class="h">1287</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1287">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$link_text, &#39;&quot;&#39;, @$section_name, &#39;&quot;&#39; if $section_name;</td></tr>
<tr><td class="h">1288</td><td colspan="7"></td></tr><tr><td class="h">1289</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1289">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@ell_content) {</td></tr>
<tr><td class="h">1290</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1290">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$link_text-&gt;[-1] .= &#39; in &#39; if $section_name;</td></tr>
<tr><td class="h">1291</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$link_text, @ell_content;</td></tr>
<tr><td class="h">1292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1293</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1294</td><td colspan="7"></td></tr><tr><td class="h">1295</td><td colspan="7"></td></tr><tr><td class="h">1296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# And the E resolver will have to deal with all our treeletty things:</td></tr>
<tr><td class="h">1297</td><td colspan="7"></td></tr><tr><td class="h">1298</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1298">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1298">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@ell_content == 1 and !ref($ell_content[0])</td></tr>
<tr><td class="h">1299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $ell_content[0] =~ m{^[^/]+[(][-a-zA-Z0-9]+[)]$}s</td></tr>
<tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1301</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;type&#39;}&nbsp;&nbsp;&nbsp;&nbsp;= &#39;man&#39;;</td></tr>
<tr><td class="h">1302</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Considering this ($ell_content[0]) a man link.\n&quot;;</td></tr>
<tr><td class="h">1303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1304</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;type&#39;}&nbsp;&nbsp;&nbsp;&nbsp;= &#39;pod&#39;;</td></tr>
<tr><td class="h">1305</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Considering this a pod link (not man or url).\n&quot;;</td></tr>
<tr><td class="h">1306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1307</td><td colspan="7"></td></tr><tr><td class="h">1308</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1308">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $section_name ) {</td></tr>
<tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;section&#39;} = Pod::Simple::LinkSection-&gt;new(</td></tr>
<tr><td class="h">1310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;&#39;, {}, @$section_name]</td></tr>
<tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1312</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;L-section content: &quot;, pretty($ell-&gt;[1]{&#39;section&#39;}), &quot;\n&quot;;</td></tr>
<tr><td class="h">1313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1314</td><td colspan="7"></td></tr><tr><td class="h">1315</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1315">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @ell_content ) {</td></tr>
<tr><td class="h">1316</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ell-&gt;[1]{&#39;to&#39;} = Pod::Simple::LinkSection-&gt;new(</td></tr>
<tr><td class="h">1317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;&#39;, {}, @ell_content]</td></tr>
<tr><td class="h">1318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1319</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;L-to content: &quot;, pretty($ell-&gt;[1]{&#39;to&#39;}), &quot;\n&quot;;</td></tr>
<tr><td class="h">1320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1321</td><td colspan="7"></td></tr><tr><td class="h">1322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# And update children to be the link-text:</td></tr>
<tr><td class="h">1323</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1323">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$ell = (@$ell[0,1], defined($link_text) ? splice(@$link_text) : &#39;&#39;);</td></tr>
<tr><td class="h">1324</td><td colspan="7"></td></tr><tr><td class="h">1325</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;End of L-parsing for this node $treelet-&gt;[$i]\n&quot;;</td></tr>
<tr><td class="h">1326</td><td colspan="7"></td></tr><tr><td class="h">1327</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i]; # might as well recurse</td></tr>
<tr><td class="h">1328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1330</td><td colspan="7"></td></tr><tr><td class="h">1331</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1333</td><td colspan="7"></td></tr><tr><td class="h">1334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">1335</td><td colspan="7"></td></tr><tr><td class="h">1336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _treat_Es {</td></tr>
<tr><td class="h">1337</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1337">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,@stack) = @_;</td></tr>
<tr><td class="h">1338</td><td colspan="7"></td></tr><tr><td class="h">1339</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($i, $treelet, $content, $replacer, $charnum);</td></tr>
<tr><td class="h">1340</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $start_line = $stack[0][1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">1341</td><td colspan="7"></td></tr><tr><td class="h">1342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# A recursive algorithm implemented iteratively!&nbsp;&nbsp;Whee!</td></tr>
<tr><td class="h">1343</td><td colspan="7"></td></tr><tr><td class="h">1344</td><td colspan="7"></td></tr><tr><td class="h">1345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Has frightening side effects on L nodes&#39; attributes.</td></tr>
<tr><td class="h">1346</td><td colspan="7"></td></tr><tr><td class="h">1347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#my @ells_to_tweak;</td></tr>
<tr><td class="h">1348</td><td colspan="7"></td></tr><tr><td class="h">1349</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;while($treelet = shift @stack) {</td></tr>
<tr><td class="h">1350</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for(my $i = 2; $i &lt; @$treelet; ++$i) { # iterate over children</td></tr>
<tr><td class="h">1351</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1351">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless ref $treelet-&gt;[$i];&nbsp;&nbsp;# text nodes are uninteresting</td></tr>
<tr><td class="h">1352</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1352">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1352">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($treelet-&gt;[$i][0] eq &#39;L&#39;) {</td></tr>
<tr><td class="h">1353</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# SPECIAL STUFF for semi-processed L&lt;&gt;&#39;s</td></tr>
<tr><td class="h">1354</td><td colspan="7"></td></tr><tr><td class="h">1355</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $thing;</td></tr>
<tr><td class="h">1356</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $attrname (&#39;section&#39;, &#39;to&#39;) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">1357</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1357">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1357">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(defined($thing = $treelet-&gt;[$i][1]{$attrname}) and ref $thing) {</td></tr>
<tr><td class="h">1358</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $thing;</td></tr>
<tr><td class="h">1359</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;&nbsp;&nbsp;Enqueuing &quot;,</td></tr>
<tr><td class="h">1360</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pretty( $treelet-&gt;[$i][1]{$attrname} ),</td></tr>
<tr><td class="h">1361</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; as an attribute value to tweak.\n&quot;;</td></tr>
<tr><td class="h">1362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1364</td><td colspan="7"></td></tr><tr><td class="h">1365</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i]; # recurse</td></tr>
<tr><td class="h">1366</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1367</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($treelet-&gt;[$i][0] ne &#39;E&#39;) {</td></tr>
<tr><td class="h">1368</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @stack, $treelet-&gt;[$i]; # recurse</td></tr>
<tr><td class="h">1369</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1371</td><td colspan="7"></td></tr><tr><td class="h">1372</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Ogling E node &quot;, pretty($treelet-&gt;[$i]), &quot;\n&quot;;</td></tr>
<tr><td class="h">1373</td><td colspan="7"></td></tr><tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# bitch if it&#39;s empty</td></tr>
<tr><td class="h">1375</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1375">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1375">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;&nbsp;@{$treelet-&gt;[$i]} == 2</td></tr>
<tr><td class="h">1376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or (@{$treelet-&gt;[$i]} == 3 and $treelet-&gt;[$i][2] eq &#39;&#39;)</td></tr>
<tr><td class="h">1377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1378</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;An empty E&lt;&gt;&quot; );</td></tr>
<tr><td class="h">1379</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$treelet-&gt;[$i] = &#39;E&lt;&gt;&#39;; # splice in a literal</td></tr>
<tr><td class="h">1380</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1382</td><td colspan="7"></td></tr><tr><td class="h">1383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# bitch if content is weird</td></tr>
<tr><td class="h">1384</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1384">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1384">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless(@{$treelet-&gt;[$i]} == 3 and !ref($content = $treelet-&gt;[$i][2])) {</td></tr>
<tr><td class="h">1385</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;An E&lt;...&gt; surrounding strange content&quot; );</td></tr>
<tr><td class="h">1386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replacer = $treelet-&gt;[$i]; # scratch</td></tr>
<tr><td class="h">1387</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1,&nbsp;&nbsp;&nbsp;# fake out a literal</td></tr>
<tr><td class="h">1388</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;E&lt;&#39;,</td></tr>
<tr><td class="h">1389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$replacer,2), # promote its content</td></tr>
<tr><td class="h">1390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;&gt;&#39;</td></tr>
<tr><td class="h">1391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t need to do --$i, as the &#39;E&lt;&#39; we just added isn&#39;t interesting.</td></tr>
<tr><td class="h">1393</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1395</td><td colspan="7"></td></tr><tr><td class="h">1396</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Ogling E&lt;$content&gt;\n&quot;;</td></tr>
<tr><td class="h">1397</td><td colspan="7"></td></tr><tr><td class="h">1398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# XXX E&lt;&gt;&#39;s contents *should* be a valid char in the scope of the current</td></tr>
<tr><td class="h">1399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# =encoding directive. Defaults to iso-8859-1, I believe. Fix this in the</td></tr>
<tr><td class="h">1400</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# future sometime.</td></tr>
<tr><td class="h">1401</td><td colspan="7"></td></tr><tr><td class="h">1402</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$charnum&nbsp;&nbsp;= Pod::Escapes::e2charnum($content);</td></tr>
<tr><td class="h">1403</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Considering E&lt;$content&gt; with char &quot;,</td></tr>
<tr><td class="h">1404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defined($charnum) ? $charnum : &quot;undef&quot;, &quot;.\n&quot;;</td></tr>
<tr><td class="h">1405</td><td colspan="7"></td></tr><tr><td class="h">1406</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1406">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1406">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1406">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!defined( $charnum )) {</td></tr>
<tr><td class="h">1407</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;I don&#39;t know how to deal with E&lt;$content&gt;.\n&quot;;</td></tr>
<tr><td class="h">1408</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $start_line, &quot;Unknown E content in E&lt;$content&gt;&quot; );</td></tr>
<tr><td class="h">1409</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replacer = &quot;E&lt;$content&gt;&quot;; # better than nothing</td></tr>
<tr><td class="h">1410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($charnum &gt;= 255 and !UNICODE) {</td></tr>
<tr><td class="h">1411</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replacer = ASCII ? &quot;\xA4&quot; : &quot;?&quot;;</td></tr>
<tr><td class="h">1412</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;This Perl version can&#39;t handle &quot;, </td></tr>
<tr><td class="h">1413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;E&lt;$content&gt; (chr $charnum), so replacing with $replacer\n&quot;;</td></tr>
<tr><td class="h">1414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1415</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replacer = Pod::Escapes::e2char($content);</td></tr>
<tr><td class="h">1416</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Replacing E&lt;$content&gt; with $replacer\n&quot;;</td></tr>
<tr><td class="h">1417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1418</td><td colspan="7"></td></tr><tr><td class="h">1419</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice(@$treelet, $i, 1, $replacer); # no need to back up $i, tho</td></tr>
<tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1422</td><td colspan="7"></td></tr><tr><td class="h">1423</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1425</td><td colspan="7"></td></tr><tr><td class="h">1426</td><td colspan="7"></td></tr><tr><td class="h">1427</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">1428</td><td colspan="7"></td></tr><tr><td class="h">1429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _treat_Ss {</td></tr>
<tr><td class="h">1430</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1430">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($self,$treelet) = @_;</td></tr>
<tr><td class="h">1431</td><td colspan="7"></td></tr><tr><td class="h">1432</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1432">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;_change_S_to_nbsp($treelet,0) if $self-&gt;{&#39;nbsp_for_S&#39;};</td></tr>
<tr><td class="h">1433</td><td colspan="7"></td></tr><tr><td class="h">1434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# TODO: or a change_nbsp_to_S</td></tr>
<tr><td class="h">1435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;Normalizing nbsp&#39;s to S is harder: for each text node, make S content</td></tr>
<tr><td class="h">1436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;out of anything matching m/([^ \xA0]*(?:\xA0+[^ \xA0]*)+)/</td></tr>
<tr><td class="h">1437</td><td colspan="7"></td></tr><tr><td class="h">1438</td><td colspan="7"></td></tr><tr><td class="h">1439</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1441</td><td colspan="7"></td></tr><tr><td class="h">1442</td><td colspan="7"></td></tr><tr><td class="h">1443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _change_S_to_nbsp { #&nbsp;&nbsp;a recursive function</td></tr>
<tr><td class="h">1444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Sanely assumes that the top node in the excursion won&#39;t be an S node.</td></tr>
<tr><td class="h">1445</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1445">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my($treelet, $in_s) = @_;</td></tr>
<tr><td class="h">1446</td><td colspan="7"></td></tr><tr><td class="h">1447</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;my $is_s = (&#39;S&#39; eq $treelet-&gt;[0]);</td></tr>
<tr><td class="h">1448</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1448">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;$in_s ||= $is_s; # So in_s is on either by this being an S element,</td></tr>
<tr><td class="h">1449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;or by an ancestor being an S element.</td></tr>
<tr><td class="h">1450</td><td colspan="7"></td></tr><tr><td class="h">1451</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;for(my $i = 2; $i &lt; @$treelet; ++$i) {</td></tr>
<tr><td class="h">1452</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1452">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(ref $treelet-&gt;[$i]) {</td></tr>
<tr><td class="h">1453</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1453">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _change_S_to_nbsp( $treelet-&gt;[$i], $in_s ) ) {</td></tr>
<tr><td class="h">1454</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $to_pull_up = $treelet-&gt;[$i];</td></tr>
<tr><td class="h">1455</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$to_pull_up,0,2;&nbsp;&nbsp;&nbsp;# ...leaving just its content</td></tr>
<tr><td class="h">1456</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$treelet, $i, 1, @$to_pull_up;&nbsp;&nbsp;# Pull up content</td></tr>
<tr><td class="h">1457</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i +=&nbsp;&nbsp;@$to_pull_up - 1;&nbsp;&nbsp;&nbsp;# Make $i skip the pulled-up stuff</td></tr>
<tr><td class="h">1458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1460</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1460">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$treelet-&gt;[$i] =~ s/\s/\xA0/g if ASCII and $in_s;</td></tr>
<tr><td class="h">1461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# (If not in ASCIIland, we can&#39;t assume that \xA0 == nbsp.)</td></tr>
<tr><td class="h">1462</td><td colspan="7"></td></tr><tr><td class="h">1463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note that if you apply nbsp_for_S to text, and so turn</td></tr>
<tr><td class="h">1464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# &quot;foo S&lt;bar baz&gt; quux&quot; into &quot;foo bar&amp;#160;faz quux&quot;, you</td></tr>
<tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# end up with something that fails to say &quot;and don&#39;t hyphenate</td></tr>
<tr><td class="h">1466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# any part of &#39;bar baz&#39;&quot;.&nbsp;&nbsp;However, hyphenation is such a vexing</td></tr>
<tr><td class="h">1467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# problem anyway, that most Pod renderers just don&#39;t render it</td></tr>
<tr><td class="h">1468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# at all.&nbsp;&nbsp;But if you do want to implement hyphenation, I guess</td></tr>
<tr><td class="h">1469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# that you&#39;d better have nbsp_for_S off.</td></tr>
<tr><td class="h">1470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1471</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1472</td><td colspan="7"></td></tr><tr><td class="h">1473</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;return $is_s;</td></tr>
<tr><td class="h">1474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1475</td><td colspan="7"></td></tr><tr><td class="h">1476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">1477</td><td colspan="7"></td></tr><tr><td class="h">1478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _accessorize {&nbsp;&nbsp;# A simple-minded method-maker</td></tr>
<tr><td class="h">1479</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1479">94</a></div></td><td></td><td><div>403</div><div>100</div><div>5320</div></td><td class="s">&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">1480</td><td><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1480">94</a></div></td><td></td><td><div>152</div></td><td class="s">&nbsp;&nbsp;foreach my $attrname (@_) {</td></tr>
<tr><td class="h">1481</td><td><div class="c3">2538</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1481">100</a></div></td><td></td><td></td><td></td><td><div>4063</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next if $attrname =~ m/::/; # a hack</td></tr>
<tr><td class="h">1482</td><td><div class="c3">2444</div></td><td></td><td></td><td></td><td></td><td><div>7974</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*{caller() . &#39;::&#39; . $attrname} = sub {</td></tr>
<tr><td class="h">1483</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1483">94</a></div></td><td></td><td><div>384</div><div>108</div><div>43100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use strict;</td></tr>
<tr><td class="h">1484</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1484">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1484">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1484">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Carp::CarpLevel = 1,&nbsp;&nbsp;Carp::croak(</td></tr>
<tr><td class="h">1485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Accessor usage: \$obj-&gt;$attrname() or \$obj-&gt;$attrname(\$new_value)&quot;</td></tr>
<tr><td class="h">1486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) unless (@_ == 1 or @_ == 2) and ref $_[0];</td></tr>
<tr><td class="h">1487</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1487">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@_ == 1) ?&nbsp;&nbsp;$_[0]-&gt;{$attrname}</td></tr>
<tr><td class="h">1488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ($_[0]-&gt;{$attrname} = $_[1]);</td></tr>
<tr><td class="h">1489</td><td><div class="c3">2444</div></td><td></td><td></td><td></td><td></td><td><div>4690</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1491</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Ya know, they say accessories make the ensemble!</td></tr>
<tr><td class="h">1492</td><td><div class="c3">94</div></td><td></td><td></td><td></td><td></td><td><div>158</div></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1494</td><td colspan="7"></td></tr><tr><td class="h">1495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">1496</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">1497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#=============================================================================</td></tr>
<tr><td class="h">1498</td><td colspan="7"></td></tr><tr><td class="h">1499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub filter {</td></tr>
<tr><td class="h">1500</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1500">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;my($class, $source) = @_;</td></tr>
<tr><td class="h">1501</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $new = $class-&gt;new;</td></tr>
<tr><td class="h">1502</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$new-&gt;output_fh(*STDOUT{IO});</td></tr>
<tr><td class="h">1503</td><td colspan="7"></td></tr><tr><td class="h">1504</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1504">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1504">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1504">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(ref($source || &#39;&#39;) eq &#39;SCALAR&#39;) {</td></tr>
<tr><td class="h">1505</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new-&gt;parse_string_document( $$source );</td></tr>
<tr><td class="h">1506</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif(ref($source)) {&nbsp;&nbsp;# it&#39;s a file handle</td></tr>
<tr><td class="h">1507</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new-&gt;parse_file($source);</td></tr>
<tr><td class="h">1508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {&nbsp;&nbsp;# it&#39;s a filename</td></tr>
<tr><td class="h">1509</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new-&gt;parse_file($source);</td></tr>
<tr><td class="h">1510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1511</td><td colspan="7"></td></tr><tr><td class="h">1512</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $new;</td></tr>
<tr><td class="h">1513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1514</td><td colspan="7"></td></tr><tr><td class="h">1515</td><td colspan="7"></td></tr><tr><td class="h">1516</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">1517</td><td colspan="7"></td></tr><tr><td class="h">1518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _out {</td></tr>
<tr><td class="h">1519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# For use in testing: Class-&gt;_out($source)</td></tr>
<tr><td class="h">1520</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;returns the transformation of $source</td></tr>
<tr><td class="h">1521</td><td colspan="7"></td></tr><tr><td class="h">1522</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1522">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $class = shift(@_);</td></tr>
<tr><td class="h">1523</td><td colspan="7"></td></tr><tr><td class="h">1524</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1524">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1524">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1524">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $mutor = shift(@_) if @_ and ref($_[0] || &#39;&#39;) eq &#39;CODE&#39;;</td></tr>
<tr><td class="h">1525</td><td colspan="7"></td></tr><tr><td class="h">1526</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot;\n\n&quot;, &#39;#&#39; x 76,</td></tr>
<tr><td class="h">1527</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&quot;\nAbout to parse source: {{\n$_[0]\n}}\n\n&quot;;</td></tr>
<tr><td class="h">1528</td><td colspan="7"></td></tr><tr><td class="h">1529</td><td colspan="7"></td></tr><tr><td class="h">1530</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1530">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1530">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $parser = ref $class &amp;&amp; $class-&gt;isa(__PACKAGE__) ? $class : $class-&gt;new;</td></tr>
<tr><td class="h">1531</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$parser-&gt;hide_line_numbers(1);</td></tr>
<tr><td class="h">1532</td><td colspan="7"></td></tr><tr><td class="h">1533</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $out = &#39;&#39;;</td></tr>
<tr><td class="h">1534</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$parser-&gt;output_string( \$out );</td></tr>
<tr><td class="h">1535</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot; _out to &quot;, \$out, &quot;\n&quot;;</td></tr>
<tr><td class="h">1536</td><td colspan="7"></td></tr><tr><td class="h">1537</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1537">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$mutor-&gt;($parser) if $mutor;</td></tr>
<tr><td class="h">1538</td><td colspan="7"></td></tr><tr><td class="h">1539</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$parser-&gt;parse_string_document( $_[0] );</td></tr>
<tr><td class="h">1540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# use Data::Dumper; print Dumper($parser), &quot;\n&quot;;</td></tr>
<tr><td class="h">1541</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $out;</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1543</td><td colspan="7"></td></tr><tr><td class="h">1544</td><td colspan="7"></td></tr><tr><td class="h">1545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _duo {</td></tr>
<tr><td class="h">1546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# For use in testing: Class-&gt;_duo($source1, $source2)</td></tr>
<tr><td class="h">1547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;returns the parse trees of $source1 and $source2.</td></tr>
<tr><td class="h">1548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Good in things like: &amp;ok( Class-&gt;duo(... , ...) );</td></tr>
<tr><td class="h">1549</td><td colspan="7"></td></tr><tr><td class="h">1550</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--subroutine.html#L1550">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $class = shift(@_);</td></tr>
<tr><td class="h">1551</td><td colspan="7"></td></tr><tr><td class="h">1552</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1552">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;Carp::croak &quot;But $class-&gt;_duo is useful only in list context!&quot;</td></tr>
<tr><td class="h">1553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;unless wantarray;</td></tr>
<tr><td class="h">1554</td><td colspan="7"></td></tr><tr><td class="h">1555</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1555">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1555">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--condition.html#L1555">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $mutor = shift(@_) if @_ and ref($_[0] || &#39;&#39;) eq &#39;CODE&#39;;</td></tr>
<tr><td class="h">1556</td><td colspan="7"></td></tr><tr><td class="h">1557</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1557">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;Carp::croak &quot;But $class-&gt;_duo takes two parameters, not: @_&quot;</td></tr>
<tr><td class="h">1558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;unless @_ == 2;</td></tr>
<tr><td class="h">1559</td><td colspan="7"></td></tr><tr><td class="h">1560</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my(@out);</td></tr>
<tr><td class="h">1561</td><td colspan="7"></td></tr><tr><td class="h">1562</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;while( @_ ) {</td></tr>
<tr><td class="h">1563</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parser = $class-&gt;new;</td></tr>
<tr><td class="h">1564</td><td colspan="7"></td></tr><tr><td class="h">1565</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @out, &#39;&#39;;</td></tr>
<tr><td class="h">1566</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$parser-&gt;output_string( \( $out[-1] ) );</td></tr>
<tr><td class="h">1567</td><td colspan="7"></td></tr><tr><td class="h">1568</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; _duo out to &quot;, $parser-&gt;output_string(),</td></tr>
<tr><td class="h">1569</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; = $parser-&gt;{&#39;output_string&#39;}\n&quot;;</td></tr>
<tr><td class="h">1570</td><td colspan="7"></td></tr><tr><td class="h">1571</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$parser-&gt;hide_line_numbers(1);</td></tr>
<tr><td class="h">1572</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-pm--branch.html#L1572">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$mutor-&gt;($parser) if $mutor;</td></tr>
<tr><td class="h">1573</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$parser-&gt;parse_string_document( shift( @_ ) );</td></tr>
<tr><td class="h">1574</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# use Data::Dumper; print Dumper($parser), &quot;\n&quot;;</td></tr>
<tr><td class="h">1575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1576</td><td colspan="7"></td></tr><tr><td class="h">1577</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return @out;</td></tr>
<tr><td class="h">1578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1579</td><td colspan="7"></td></tr><tr><td class="h">1580</td><td colspan="7"></td></tr><tr><td class="h">1581</td><td colspan="7"></td></tr><tr><td class="h">1582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">1583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
