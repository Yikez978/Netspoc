<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/local/lib/perl5/5.20.1/Pod/Simple/BlackBox.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/local/lib/perl5/5.20.1/Pod/Simple/BlackBox.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">1.7%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td colspan="7"></td></tr><tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Pod::Simple::BlackBox;</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># &quot;What&#39;s in the box?&quot;&nbsp;&nbsp;&quot;Pain.&quot;</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###########################################################################</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is where all the scary things happen: parsing lines into</td></tr>
<tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;paragraphs; and then into directives, verbatims, and then also</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;turning formatting sequences into treelets.</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Are you really sure you want to read this code?</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#-----------------------------------------------------------------------------</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">16</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The basic work of this module Pod::Simple::BlackBox is doing the dirty work</td></tr>
<tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># of parsing Pod into treelets (generally one per non-verbatim paragraph), and</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># to call the proper callbacks on the treelets.</td></tr>
<tr><td class="h">19</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Every node in a treelet is a [&#39;name&#39;, {attrhash}, ...children...]</td></tr>
<tr><td class="h">21</td><td colspan="7"></td></tr><tr><td class="h">22</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L22">94</a></div></td><td></td><td><div>307</div><div>122</div><div>420</div></td><td class="s">use integer; # vroom!</td></tr>
<tr><td class="h">23</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L23">94</a></div></td><td></td><td><div>1087</div><div>103</div><div>1864</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">24</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L24">94</a></div></td><td></td><td><div>339</div><div>103</div><div>1329</div></td><td class="s">use Carp ();</td></tr>
<tr><td class="h">25</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L25">94</a></div></td><td></td><td><div>323</div><div>94</div><div>4681</div></td><td class="s">use vars qw($VERSION );</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = &#39;3.28&#39;;</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#use constant DEBUG =&gt; 7;</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">29</td><td><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L29">94</a></div></td><td></td><td><div>371</div></td><td class="s">&nbsp;&nbsp;require Pod::Simple;</td></tr>
<tr><td class="h">30</td><td><div class="c3">94</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L30">50</a></div></td><td></td><td></td><td></td><td><div>514113</div></td><td class="s">&nbsp;&nbsp;*DEBUG = \&amp;Pod::Simple::DEBUG unless defined &amp;DEBUG</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">32</td><td colspan="7"></td></tr><tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">34</td><td colspan="7"></td></tr><tr><td class="h">35</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L35">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">sub parse_line { shift-&gt;parse_lines(@_) } # alias</td></tr>
<tr><td class="h">36</td><td colspan="7"></td></tr><tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - - -&nbsp;&nbsp;Turn back now!&nbsp;&nbsp;Run away!&nbsp;&nbsp;- - -</td></tr>
<tr><td class="h">38</td><td colspan="7"></td></tr><tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_lines {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Usage: $parser-&gt;parse_lines(@lines)</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# an undef means end-of-stream</td></tr>
<tr><td class="h">41</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L41">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">42</td><td colspan="7"></td></tr><tr><td class="h">43</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $code_handler = $self-&gt;{&#39;code_handler&#39;};</td></tr>
<tr><td class="h">44</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $cut_handler&nbsp;&nbsp;= $self-&gt;{&#39;cut_handler&#39;};</td></tr>
<tr><td class="h">45</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $wl_handler&nbsp;&nbsp;&nbsp;= $self-&gt;{&#39;whiteline_handler&#39;};</td></tr>
<tr><td class="h">46</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L46">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;} ||= 0;</td></tr>
<tr><td class="h">47</td><td colspan="7"></td></tr><tr><td class="h">48</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $scratch;</td></tr>
<tr><td class="h">49</td><td colspan="7"></td></tr><tr><td class="h">50</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 4 and </td></tr>
<tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;print &quot;# Parsing starting at line &quot;, $self-&gt;{&#39;line_count&#39;}, &quot;.\n&quot;;</td></tr>
<tr><td class="h">52</td><td colspan="7"></td></tr><tr><td class="h">53</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 5 and</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;print &quot;#&nbsp;&nbsp;About to parse lines: &quot;,</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join(&#39; &#39;, map defined($_) ? &quot;[$_]&quot; : &quot;EOF&quot;, @_), &quot;\n&quot;;</td></tr>
<tr><td class="h">56</td><td colspan="7"></td></tr><tr><td class="h">57</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L57">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $paras = ($self-&gt;{&#39;paras&#39;} ||= []);</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;# paragraph buffer.&nbsp;&nbsp;Because we need to defer processing of =over</td></tr>
<tr><td class="h">59</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;# directives and verbatim paragraphs.&nbsp;&nbsp;We call _ponder_paragraph_buffer</td></tr>
<tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;# to process this.</td></tr>
<tr><td class="h">61</td><td colspan="7"></td></tr><tr><td class="h">62</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L62">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;{&#39;pod_para_count&#39;} ||= 0;</td></tr>
<tr><td class="h">63</td><td colspan="7"></td></tr><tr><td class="h">64</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $line;</td></tr>
<tr><td class="h">65</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;foreach my $source_line (@_) {</td></tr>
<tr><td class="h">66</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L66">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{&#39;source_dead&#39;} ) {</td></tr>
<tr><td class="h">67</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;# Source is dead.\n&quot;;</td></tr>
<tr><td class="h">68</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L71">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $source_line ) {</td></tr>
<tr><td class="h">72</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;# Undef-line seen.\n&quot;;</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, [&#39;~end&#39;, {&#39;start_line&#39; =&gt; $self-&gt;{&#39;line_count&#39;}}];</td></tr>
<tr><td class="h">75</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, $paras-&gt;[-1], $paras-&gt;[-1];</td></tr>
<tr><td class="h">76</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# So that it definitely fills the buffer.</td></tr>
<tr><td class="h">77</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;source_dead&#39;} = 1;</td></tr>
<tr><td class="h">78</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_paragraph_buffer;</td></tr>
<tr><td class="h">79</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">81</td><td colspan="7"></td></tr><tr><td class="h">82</td><td colspan="7"></td></tr><tr><td class="h">83</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L83">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{&#39;line_count&#39;}++ ) {</td></tr>
<tr><td class="h">84</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($line = $source_line) =~ tr/\n\r//d;</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If we don&#39;t have two vars, we&#39;ll end up with that there</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# tr/// modding the (potentially read-only) original source line!</td></tr>
<tr><td class="h">87</td><td colspan="7"></td></tr><tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">89</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;First line: [$source_line]\n&quot;;</td></tr>
<tr><td class="h">90</td><td colspan="7"></td></tr><tr><td class="h">91</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L91">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L91">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L91">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($line = $source_line) =~ s/^\xEF\xBB\xBF//s ) {</td></tr>
<tr><td class="h">92</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;UTF-8 BOM seen.&nbsp;&nbsp;Faking a &#39;=encoding utf8&#39;.\n&quot;;</td></tr>
<tr><td class="h">93</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_encoding_line( &quot;=encoding utf8&quot; );</td></tr>
<tr><td class="h">94</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{&#39;_processed_encoding&#39;};</td></tr>
<tr><td class="h">95</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ tr/\n\r//d;</td></tr>
<tr><td class="h">96</td><td colspan="7"></td></tr><tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $line =~ s/^\xFE\xFF//s ) {</td></tr>
<tr><td class="h">98</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Big-endian UTF-16 BOM seen.&nbsp;&nbsp;Aborting parsing.\n&quot;;</td></tr>
<tr><td class="h">99</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;scream(</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;},</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;UTF16-BE Byte Encoding Mark found; but Pod::Simple v$Pod::Simple::VERSION doesn&#39;t implement UTF16 yet.&quot;</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">103</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @_;</td></tr>
<tr><td class="h">104</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @_, undef;</td></tr>
<tr><td class="h">105</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">106</td><td colspan="7"></td></tr><tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO: implement somehow?</td></tr>
<tr><td class="h">108</td><td colspan="7"></td></tr><tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $line =~ s/^\xFF\xFE//s ) {</td></tr>
<tr><td class="h">110</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Little-endian UTF-16 BOM seen.&nbsp;&nbsp;Aborting parsing.\n&quot;;</td></tr>
<tr><td class="h">111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;scream(</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;},</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;UTF16-LE Byte Encoding Mark found; but Pod::Simple v$Pod::Simple::VERSION doesn&#39;t implement UTF16 yet.&quot;</td></tr>
<tr><td class="h">114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @_;</td></tr>
<tr><td class="h">116</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @_, undef;</td></tr>
<tr><td class="h">117</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">118</td><td colspan="7"></td></tr><tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO: implement somehow?</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">122</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;First line is BOM-less.\n&quot;;</td></tr>
<tr><td class="h">123</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($line = $source_line) =~ tr/\n\r//d;</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Try to guess encoding. Inlined for performance reasons.</td></tr>
<tr><td class="h">128</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L128">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L128">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L128">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L128">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(!$self-&gt;{&#39;parse_characters&#39;} &amp;&amp; !$self-&gt;{&#39;encoding&#39;}</td></tr>
<tr><td class="h">129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($self-&gt;{&#39;in_pod&#39;} || $line =~ /^=/s)</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; $line =~ /[^\x00-\x7f]/</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">132</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L132">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $encoding = $line =~ /^[\x00-\x7f]*[\xC0-\xFD][\x80-\xBF]/ ? &#39;UTF-8&#39; : &#39;ISO8859-1&#39;;</td></tr>
<tr><td class="h">133</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_encoding_line( &quot;=encoding $encoding&quot; );</td></tr>
<tr><td class="h">134</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L134">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;_transcoder&#39;} &amp;&amp; $self-&gt;{&#39;_transcoder&#39;}-&gt;($line);</td></tr>
<tr><td class="h">135</td><td colspan="7"></td></tr><tr><td class="h">136</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($word) = $line =~ /(\S*[^\x00-\x7f]\S*)/;</td></tr>
<tr><td class="h">137</td><td colspan="7"></td></tr><tr><td class="h">138</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;},</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Non-ASCII character seen before =encoding in &#39;$word&#39;. Assuming $encoding&quot;</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">143</td><td colspan="7"></td></tr><tr><td class="h">144</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;# Parsing line: [$line]\n&quot;;</td></tr>
<tr><td class="h">145</td><td colspan="7"></td></tr><tr><td class="h">146</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L146">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(!$self-&gt;{&#39;in_pod&#39;}) {</td></tr>
<tr><td class="h">147</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L147">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($line =~ m/^=([a-zA-Z]+)/s) {</td></tr>
<tr><td class="h">148</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L148">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($1 eq &#39;cut&#39;) {</td></tr>
<tr><td class="h">149</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;scream(</td></tr>
<tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;},</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=cut found outside a pod block.&nbsp;&nbsp;Skipping to next block.&quot;</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">153</td><td colspan="7"></td></tr><tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## Before there were errata sections in the world, it was</td></tr>
<tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## least-pessimal to abort processing the file.&nbsp;&nbsp;But now we can</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## just barrel on thru (but still not start a pod block).</td></tr>
<tr><td class="h">157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#splice @_;</td></tr>
<tr><td class="h">158</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#push @_, undef;</td></tr>
<tr><td class="h">159</td><td colspan="7"></td></tr><tr><td class="h">160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">162</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;in_pod&#39;} = $self-&gt;{&#39;start_of_pod_block&#39;}</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;{&#39;last_was_blank&#39;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1;</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# And fall thru to the pod-mode block further down</td></tr>
<tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">167</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;# It&#39;s a code-line.\n&quot;;</td></tr>
<tr><td class="h">168</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L168">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$code_handler-&gt;(map $_, $line, $self-&gt;{&#39;line_count&#39;}, $self)</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $code_handler;</td></tr>
<tr><td class="h">170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note: this may cause code to be processed out of order relative</td></tr>
<tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to pods, but in order relative to cuts.</td></tr>
<tr><td class="h">172</td><td colspan="7"></td></tr><tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note also that we haven&#39;t yet applied the transcoding to $line</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;by time we call $code_handler!</td></tr>
<tr><td class="h">175</td><td colspan="7"></td></tr><tr><td class="h">176</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L176">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $line =~ m/^#\s*line\s+(\d+)\s*(?:\s&quot;([^&quot;]+)&quot;)?\s*$/ ) {</td></tr>
<tr><td class="h">177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That RE is from perlsyn, section &quot;Plain Old Comments (Not!)&quot;,</td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$fname = $2 if defined $2;</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#DEBUG &gt; 1 and defined $2 and print &quot;# Setting fname to \&quot;$fname\&quot;\n&quot;;</td></tr>
<tr><td class="h">180</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;# Setting nextline to $1\n&quot;;</td></tr>
<tr><td class="h">181</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;line_count&#39;} = $1 - 1;</td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">183</td><td colspan="7"></td></tr><tr><td class="h">184</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">187</td><td colspan="7"></td></tr><tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Else we&#39;re in pod mode:</td></tr>
<tr><td class="h">190</td><td colspan="7"></td></tr><tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Apply any necessary transcoding:</td></tr>
<tr><td class="h">192</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L192">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;_transcoder&#39;} &amp;&amp; $self-&gt;{&#39;_transcoder&#39;}-&gt;($line);</td></tr>
<tr><td class="h">193</td><td colspan="7"></td></tr><tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# HERE WE CATCH =encoding EARLY!</td></tr>
<tr><td class="h">195</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L195">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $line =~ m/^=encoding\s+\S+\s*$/s ) {</td></tr>
<tr><td class="h">196</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L196">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;parse_characters;&nbsp;&nbsp;&nbsp;# Ignore this line</td></tr>
<tr><td class="h">197</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line = $self-&gt;_handle_encoding_line( $line );</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">199</td><td colspan="7"></td></tr><tr><td class="h">200</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L200">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L200">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L200">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($line =~ m/^=cut/s) {</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# here ends the pod block, and therefore the previous pod para</td></tr>
<tr><td class="h">202</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Noting =cut at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;in_pod&#39;} = 0;</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ++$self-&gt;{&#39;pod_para_count&#39;};</td></tr>
<tr><td class="h">205</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_paragraph_buffer();</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# by now it&#39;s safe to consider the previous paragraph as done.</td></tr>
<tr><td class="h">207</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L207">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cut_handler-&gt;(map $_, $line, $self-&gt;{&#39;line_count&#39;}, $self)</td></tr>
<tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $cut_handler;</td></tr>
<tr><td class="h">209</td><td colspan="7"></td></tr><tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO: add to docs: Note: this may cause cuts to be processed out</td></tr>
<tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;of order relative to pods, but in order relative to code.</td></tr>
<tr><td class="h">212</td><td colspan="7"></td></tr><tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($line =~ m/^(\s*)$/s) {&nbsp;&nbsp;# it&#39;s a blank line</td></tr>
<tr><td class="h">214</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L214">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L214">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (defined $1 and $1 =~ /[^\S\r\n]/) { # it&#39;s a white line</td></tr>
<tr><td class="h">215</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L215">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$wl_handler-&gt;(map $_, $line, $self-&gt;{&#39;line_count&#39;}, $self)</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $wl_handler;</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">218</td><td colspan="7"></td></tr><tr><td class="h">219</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L219">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L219">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$self-&gt;{&#39;start_of_pod_block&#39;} and @$paras and $paras-&gt;[-1][0] eq &#39;~Verbatim&#39;) {</td></tr>
<tr><td class="h">220</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Saving blank line at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">221</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$paras-&gt;[-1]}, $line;</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;# otherwise it&#39;s not interesting</td></tr>
<tr><td class="h">223</td><td colspan="7"></td></tr><tr><td class="h">224</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L224">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L224">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$self-&gt;{&#39;start_of_pod_block&#39;} and !$self-&gt;{&#39;last_was_blank&#39;}) {</td></tr>
<tr><td class="h">225</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Noting para ends with blank line at ${$self}{&#39;line_count&#39;}\n&quot;; </td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">227</td><td colspan="7"></td></tr><tr><td class="h">228</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;last_was_blank&#39;} = 1;</td></tr>
<tr><td class="h">229</td><td colspan="7"></td></tr><tr><td class="h">230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($self-&gt;{&#39;last_was_blank&#39;}) {&nbsp;&nbsp;# A non-blank line starting a new para...</td></tr>
<tr><td class="h">231</td><td colspan="7"></td></tr><tr><td class="h">232</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L232">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L232">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($line =~ m/^(=[a-zA-Z][a-zA-Z0-9]*)(?:\s+|$)(.*)/s) {</td></tr>
<tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# THIS IS THE ONE PLACE WHERE WE CONSTRUCT NEW DIRECTIVE OBJECTS</td></tr>
<tr><td class="h">234</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = [$1, {&#39;start_line&#39; =&gt; $self-&gt;{&#39;line_count&#39;}}, $2];</td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Note that in &quot;=head1 foo&quot;, the WS is lost.</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Example: [&#39;=head1&#39;, {&#39;start_line&#39; =&gt; 123}, &#39; foo&#39;]</td></tr>
<tr><td class="h">237</td><td colspan="7"></td></tr><tr><td class="h">238</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$self-&gt;{&#39;pod_para_count&#39;};</td></tr>
<tr><td class="h">239</td><td colspan="7"></td></tr><tr><td class="h">240</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_paragraph_buffer();</td></tr>
<tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# by now it&#39;s safe to consider the previous paragraph as done.</td></tr>
<tr><td class="h">242</td><td colspan="7"></td></tr><tr><td class="h">243</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, $new; # the new incipient paragraph</td></tr>
<tr><td class="h">244</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Starting new ${$paras}[-1][0] para at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">245</td><td colspan="7"></td></tr><tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($line =~ m/^\s/s) {</td></tr>
<tr><td class="h">247</td><td colspan="7"></td></tr><tr><td class="h">248</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L248">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L248">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$self-&gt;{&#39;start_of_pod_block&#39;} and @$paras and $paras-&gt;[-1][0] eq &#39;~Verbatim&#39;) {</td></tr>
<tr><td class="h">249</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Resuming verbatim para at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">250</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$paras-&gt;[-1]}, $line;</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">252</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$self-&gt;{&#39;pod_para_count&#39;};</td></tr>
<tr><td class="h">253</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_paragraph_buffer();</td></tr>
<tr><td class="h">254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# by now it&#39;s safe to consider the previous paragraph as done.</td></tr>
<tr><td class="h">255</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Starting verbatim para at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">256</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, [&#39;~Verbatim&#39;, {&#39;start_line&#39; =&gt; $self-&gt;{&#39;line_count&#39;}}, $line];</td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">259</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$self-&gt;{&#39;pod_para_count&#39;};</td></tr>
<tr><td class="h">260</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_paragraph_buffer();</td></tr>
<tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# by now it&#39;s safe to consider the previous paragraph as done.</td></tr>
<tr><td class="h">262</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, [&#39;~Para&#39;,&nbsp;&nbsp;{&#39;start_line&#39; =&gt; $self-&gt;{&#39;line_count&#39;}}, $line];</td></tr>
<tr><td class="h">263</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Starting plain para at line ${$self}{&#39;line_count&#39;}\n&quot;;</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">265</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;last_was_blank&#39;} = $self-&gt;{&#39;start_of_pod_block&#39;} = 0;</td></tr>
<tr><td class="h">266</td><td colspan="7"></td></tr><tr><td class="h">267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# It&#39;s a non-blank line /continuing/ the current para</td></tr>
<tr><td class="h">269</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L269">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@$paras) {</td></tr>
<tr><td class="h">270</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Line ${$self}{&#39;line_count&#39;} continues current paragraph\n&quot;;</td></tr>
<tr><td class="h">271</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$paras-&gt;[-1]}, $line;</td></tr>
<tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Unexpected case!</td></tr>
<tr><td class="h">274</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Continuing a paragraph but \@\$paras is empty?&quot;;</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">276</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;last_was_blank&#39;} = $self-&gt;{&#39;start_of_pod_block&#39;} = 0;</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">278</td><td colspan="7"></td></tr><tr><td class="h">279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} # ends the big while loop</td></tr>
<tr><td class="h">280</td><td colspan="7"></td></tr><tr><td class="h">281</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print(pretty(@$paras), &quot;\n&quot;);</td></tr>
<tr><td class="h">282</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">284</td><td colspan="7"></td></tr><tr><td class="h">285</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">286</td><td colspan="7"></td></tr><tr><td class="h">287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handle_encoding_line {</td></tr>
<tr><td class="h">288</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L288">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($self, $line) = @_;</td></tr>
<tr><td class="h">289</td><td colspan="7"></td></tr><tr><td class="h">290</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L290">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return if $self-&gt;parse_characters;</td></tr>
<tr><td class="h">291</td><td colspan="7"></td></tr><tr><td class="h">292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# The point of this routine is to set $self-&gt;{&#39;_transcoder&#39;} as indicated.</td></tr>
<tr><td class="h">293</td><td colspan="7"></td></tr><tr><td class="h">294</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L294">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $line unless $line =~ m/^=encoding\s+(\S+)\s*$/s;</td></tr>
<tr><td class="h">295</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Found an encoding line \&quot;=encoding $1\&quot;\n&quot;;</td></tr>
<tr><td class="h">296</td><td colspan="7"></td></tr><tr><td class="h">297</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $e&nbsp;&nbsp;&nbsp;&nbsp;= $1;</td></tr>
<tr><td class="h">298</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $orig = $e;</td></tr>
<tr><td class="h">299</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @{ $self-&gt;{&#39;encoding_command_reqs&#39;} }, &quot;=encoding $orig&quot;;</td></tr>
<tr><td class="h">300</td><td colspan="7"></td></tr><tr><td class="h">301</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $enc_error;</td></tr>
<tr><td class="h">302</td><td colspan="7"></td></tr><tr><td class="h">303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Cf.&nbsp;&nbsp;&nbsp;perldoc Encode&nbsp;&nbsp;&nbsp;and&nbsp;&nbsp;&nbsp;perldoc Encode::Supported</td></tr>
<tr><td class="h">304</td><td colspan="7"></td></tr><tr><td class="h">305</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;require Pod::Simple::Transcode;</td></tr>
<tr><td class="h">306</td><td colspan="7"></td></tr><tr><td class="h">307</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L307">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L307">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L307">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L307">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if( $self-&gt;{&#39;encoding&#39;} ) {</td></tr>
<tr><td class="h">308</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $norm_current = $self-&gt;{&#39;encoding&#39;};</td></tr>
<tr><td class="h">309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $norm_e = $e;</td></tr>
<tr><td class="h">310</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $that ($norm_current, $norm_e) {</td></tr>
<tr><td class="h">311</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$that =&nbsp;&nbsp;lc($that);</td></tr>
<tr><td class="h">312</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$that =~ s/[-_]//g;</td></tr>
<tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">314</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L314">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($norm_current eq $norm_e) {</td></tr>
<tr><td class="h">315</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;The &#39;=encoding $orig&#39; line is &quot;,</td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;redundant.&nbsp;&nbsp;($norm_current eq $norm_e).&nbsp;&nbsp;Ignoring.\n&quot;;</td></tr>
<tr><td class="h">317</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$enc_error = &#39;&#39;;</td></tr>
<tr><td class="h">318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# But that doesn&#39;t necessarily mean that the earlier one went okay</td></tr>
<tr><td class="h">319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">320</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$enc_error = &quot;Encoding is already set to &quot; . $self-&gt;{&#39;encoding&#39;};</td></tr>
<tr><td class="h">321</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print $enc_error;</td></tr>
<tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">323</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif (</td></tr>
<tr><td class="h">324</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# OK, let&#39;s turn on the encoding</td></tr>
<tr><td class="h">325</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do {</td></tr>
<tr><td class="h">326</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Setting encoding to $e\n&quot;;</td></tr>
<tr><td class="h">327</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;encoding&#39;} = $e;</td></tr>
<tr><td class="h">328</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1;</td></tr>
<tr><td class="h">329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;and $e eq &#39;HACKRAW&#39;</td></tr>
<tr><td class="h">331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">332</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Putting in HACKRAW (no-op) encoding mode.\n&quot;;</td></tr>
<tr><td class="h">333</td><td colspan="7"></td></tr><tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif( Pod::Simple::Transcode::-&gt;encoding_is_available($e) ) {</td></tr>
<tr><td class="h">335</td><td colspan="7"></td></tr><tr><td class="h">336</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L336">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die($enc_error = &quot;WHAT? _transcoder is already set?!&quot;)</td></tr>
<tr><td class="h">337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $self-&gt;{&#39;_transcoder&#39;};&nbsp;&nbsp;&nbsp;# should never happen</td></tr>
<tr><td class="h">338</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;require Pod::Simple::Transcode;</td></tr>
<tr><td class="h">339</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;_transcoder&#39;} = Pod::Simple::Transcode::-&gt;make_transcoder($e);</td></tr>
<tr><td class="h">340</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval {</td></tr>
<tr><td class="h">341</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @x = (&#39;&#39;, &quot;abc&quot;, &quot;123&quot;);</td></tr>
<tr><td class="h">342</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;_transcoder&#39;}-&gt;(@x);</td></tr>
<tr><td class="h">343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">344</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L344">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$@ &amp;&amp; die( $enc_error =</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Really unexpected error setting up encoding $e: $@\nAborting&quot;</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">347</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;detected_encoding&#39;} = $e;</td></tr>
<tr><td class="h">348</td><td colspan="7"></td></tr><tr><td class="h">349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">350</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @supported = Pod::Simple::Transcode::-&gt;all_encodings;</td></tr>
<tr><td class="h">351</td><td colspan="7"></td></tr><tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Note unsupported, and complain</td></tr>
<tr><td class="h">353</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Encoding [$e] is unsupported.&quot;,</td></tr>
<tr><td class="h">354</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\nSupporteds: @supported\n&quot;;</td></tr>
<tr><td class="h">355</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $suggestion = &#39;&#39;;</td></tr>
<tr><td class="h">356</td><td colspan="7"></td></tr><tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Look for a near match:</td></tr>
<tr><td class="h">358</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $norm = lc($e);</td></tr>
<tr><td class="h">359</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$norm =~ tr[-_][]d;</td></tr>
<tr><td class="h">360</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $n;</td></tr>
<tr><td class="h">361</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $enc (@supported) {</td></tr>
<tr><td class="h">362</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$n = lc($enc);</td></tr>
<tr><td class="h">363</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$n =~ tr[-_][]d;</td></tr>
<tr><td class="h">364</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L364">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless $n eq $norm;</td></tr>
<tr><td class="h">365</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$suggestion = &quot;&nbsp;&nbsp;(Maybe \&quot;$e\&quot; should be \&quot;$enc\&quot;?)&quot;;</td></tr>
<tr><td class="h">366</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">367</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">368</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $encmodver = Pod::Simple::Transcode::-&gt;encmodver;</td></tr>
<tr><td class="h">369</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$enc_error = join &#39;&#39; =&gt;</td></tr>
<tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;This document probably does not appear as it should, because its &quot;,</td></tr>
<tr><td class="h">371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\&quot;=encoding $e\&quot; line calls for an unsupported encoding.&quot;,</td></tr>
<tr><td class="h">372</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$suggestion, &quot;&nbsp;&nbsp;[$encmodver\&#39;s supported encodings are: @supported]&quot;</td></tr>
<tr><td class="h">373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">374</td><td colspan="7"></td></tr><tr><td class="h">375</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;scream( $self-&gt;{&#39;line_count&#39;}, $enc_error );</td></tr>
<tr><td class="h">376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">377</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @{ $self-&gt;{&#39;encoding_command_statuses&#39;} }, $enc_error;</td></tr>
<tr><td class="h">378</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L378">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if (defined($self-&gt;{&#39;_processed_encoding&#39;})) {</td></tr>
<tr><td class="h">379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Should never happen</td></tr>
<tr><td class="h">380</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Nested processed encoding.&quot;;</td></tr>
<tr><td class="h">381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">382</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;{&#39;_processed_encoding&#39;} = $orig;</td></tr>
<tr><td class="h">383</td><td colspan="7"></td></tr><tr><td class="h">384</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $line;</td></tr>
<tr><td class="h">385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">386</td><td colspan="7"></td></tr><tr><td class="h">387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</td></tr>
<tr><td class="h">388</td><td colspan="7"></td></tr><tr><td class="h">389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handle_encoding_second_level {</td></tr>
<tr><td class="h">390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# By time this is called, the encoding (if well formed) will already</td></tr>
<tr><td class="h">391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;have been acted one.</td></tr>
<tr><td class="h">392</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L392">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($self, $para) = @_;</td></tr>
<tr><td class="h">393</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my @x = @$para;</td></tr>
<tr><td class="h">394</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @x, 2;</td></tr>
<tr><td class="h">395</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/^\s+//s;</td></tr>
<tr><td class="h">396</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/\s+$//s;</td></tr>
<tr><td class="h">397</td><td colspan="7"></td></tr><tr><td class="h">398</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;Ogling encoding directive: =encoding $content\n&quot;;</td></tr>
<tr><td class="h">399</td><td colspan="7"></td></tr><tr><td class="h">400</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L400">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if (defined($self-&gt;{&#39;_processed_encoding&#39;})) {</td></tr>
<tr><td class="h">401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#if($content ne $self-&gt;{&#39;_processed_encoding&#39;}) {</td></tr>
<tr><td class="h">402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Could it happen?</td></tr>
<tr><td class="h">403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#}</td></tr>
<tr><td class="h">404</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{&#39;_processed_encoding&#39;};</td></tr>
<tr><td class="h">405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# It&#39;s already been handled.&nbsp;&nbsp;Check for errors.</td></tr>
<tr><td class="h">406</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L406">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L406">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(! $self-&gt;{&#39;encoding_command_statuses&#39;} ) {</td></tr>
<tr><td class="h">407</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; CRAZY ERROR: It wasn&#39;t really handled?!\n&quot;;</td></tr>
<tr><td class="h">408</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $self-&gt;{&#39;encoding_command_statuses&#39;}[-1] ) {</td></tr>
<tr><td class="h">409</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf &quot;Couldn&#39;t do %s: %s&quot;,</td></tr>
<tr><td class="h">411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;encoding_command_reqs&#39;&nbsp;&nbsp;}[-1],</td></tr>
<tr><td class="h">412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;encoding_command_statuses&#39;}[-1],</td></tr>
<tr><td class="h">413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">415</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; (Yup, it was successfully handled already.)\n&quot;;</td></tr>
<tr><td class="h">416</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">417</td><td colspan="7"></td></tr><tr><td class="h">418</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Otherwise it&#39;s a syntax error</td></tr>
<tr><td class="h">420</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine( $para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Invalid =encoding syntax: $content&quot;</td></tr>
<tr><td class="h">422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">424</td><td colspan="7"></td></tr><tr><td class="h">425</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">426</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">427</td><td colspan="7"></td></tr><tr><td class="h">428</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`</td></tr>
<tr><td class="h">429</td><td colspan="7"></td></tr><tr><td class="h">430</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $m = -321;&nbsp;&nbsp;&nbsp;# magic line number</td></tr>
<tr><td class="h">432</td><td colspan="7"></td></tr><tr><td class="h">433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _gen_errata {</td></tr>
<tr><td class="h">434</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L434">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $self = $_[0];</td></tr>
<tr><td class="h">435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Return 0 or more fake-o paragraphs explaining the accumulated</td></tr>
<tr><td class="h">436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;errors on this document.</td></tr>
<tr><td class="h">437</td><td colspan="7"></td></tr><tr><td class="h">438</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L438">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L438">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return() unless $self-&gt;{&#39;errata&#39;} and keys %{$self-&gt;{&#39;errata&#39;}};</td></tr>
<tr><td class="h">439</td><td colspan="7"></td></tr><tr><td class="h">440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my @out;</td></tr>
<tr><td class="h">441</td><td colspan="7"></td></tr><tr><td class="h">442</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;foreach my $line (sort {$a &lt;=&gt; $b} keys %{$self-&gt;{&#39;errata&#39;}}) {</td></tr>
<tr><td class="h">443</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @out,</td></tr>
<tr><td class="h">444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=item&#39;, {&#39;start_line&#39; =&gt; $m}, &quot;Around line $line:&quot;],</td></tr>
<tr><td class="h">445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map( [&#39;~Para&#39;, {&#39;start_line&#39; =&gt; $m, &#39;~cooked&#39; =&gt; 1},</td></tr>
<tr><td class="h">446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[&#39;~Top&#39;, {&#39;start_line&#39; =&gt; $m},</td></tr>
<tr><td class="h">447</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$_</td></tr>
<tr><td class="h">448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#]</td></tr>
<tr><td class="h">449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</td></tr>
<tr><td class="h">450</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{$self-&gt;{&#39;errata&#39;}{$line}}</td></tr>
<tr><td class="h">451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">452</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">454</td><td colspan="7"></td></tr><tr><td class="h">455</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# TODO: report of unknown entities? unrenderable characters?</td></tr>
<tr><td class="h">456</td><td colspan="7"></td></tr><tr><td class="h">457</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unshift @out,</td></tr>
<tr><td class="h">458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=head1&#39;, {&#39;start_line&#39; =&gt; $m, &#39;errata&#39; =&gt; 1}, &#39;POD ERRORS&#39;],</td></tr>
<tr><td class="h">459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;~Para&#39;, {&#39;start_line&#39; =&gt; $m, &#39;~cooked&#39; =&gt; 1, &#39;errata&#39; =&gt; 1},</td></tr>
<tr><td class="h">460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Hey! &quot;,</td></tr>
<tr><td class="h">461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;B&#39;, {},</td></tr>
<tr><td class="h">462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;The above document had some coding errors, which are explained below:&#39;</td></tr>
<tr><td class="h">463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</td></tr>
<tr><td class="h">464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;],</td></tr>
<tr><td class="h">465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=over&#39;,&nbsp;&nbsp;{&#39;start_line&#39; =&gt; $m, &#39;errata&#39; =&gt; 1}, &#39;&#39;],</td></tr>
<tr><td class="h">466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">467</td><td colspan="7"></td></tr><tr><td class="h">468</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @out, </td></tr>
<tr><td class="h">469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=back&#39;,&nbsp;&nbsp;{&#39;start_line&#39; =&gt; $m, &#39;errata&#39; =&gt; 1}, &#39;&#39;],</td></tr>
<tr><td class="h">470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">471</td><td colspan="7"></td></tr><tr><td class="h">472</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot;\n&lt;&lt;\n&quot;, pretty(\@out), &quot;\n&gt;&gt;\n\n&quot;;</td></tr>
<tr><td class="h">473</td><td colspan="7"></td></tr><tr><td class="h">474</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return @out;</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">476</td><td colspan="7"></td></tr><tr><td class="h">477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">478</td><td colspan="7"></td></tr><tr><td class="h">479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">480</td><td colspan="7"></td></tr><tr><td class="h">481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##############################################################################</td></tr>
<tr><td class="h">482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##</td></tr>
<tr><td class="h">483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##&nbsp;&nbsp;stop reading now stop reading now stop reading now stop reading now stop</td></tr>
<tr><td class="h">484</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##</td></tr>
<tr><td class="h">485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HERE IT BECOMES REALLY SCARY</td></tr>
<tr><td class="h">486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##</td></tr>
<tr><td class="h">487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##&nbsp;&nbsp;stop reading now stop reading now stop reading now stop reading now stop</td></tr>
<tr><td class="h">488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##</td></tr>
<tr><td class="h">489</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##############################################################################</td></tr>
<tr><td class="h">490</td><td colspan="7"></td></tr><tr><td class="h">491</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_paragraph_buffer {</td></tr>
<tr><td class="h">492</td><td colspan="7"></td></tr><tr><td class="h">493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Para-token types as found in the buffer.</td></tr>
<tr><td class="h">494</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;~Verbatim, ~Para, ~end, =head1..4, =for, =begin, =end,</td></tr>
<tr><td class="h">495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;=over, =back, =item</td></tr>
<tr><td class="h">496</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;and the null =pod (to be complained about if over one line)</td></tr>
<tr><td class="h">497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">498</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# &quot;~data&quot; paragraphs are something we generate at this level, depending on</td></tr>
<tr><td class="h">499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# a currently open =over region</td></tr>
<tr><td class="h">500</td><td colspan="7"></td></tr><tr><td class="h">501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Events fired:&nbsp;&nbsp;Begin and end for:</td></tr>
<tr><td class="h">502</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directivename (like head1 .. head4), item, extend,</td></tr>
<tr><td class="h">503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (from =begin...=end, =for),</td></tr>
<tr><td class="h">504</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over-bullet, over-number, over-text, over-block,</td></tr>
<tr><td class="h">505</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item-bullet, item-number, item-text,</td></tr>
<tr><td class="h">506</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Document,</td></tr>
<tr><td class="h">507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data, Para, Verbatim</td></tr>
<tr><td class="h">508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B, C, longdirname (TODO -- wha?), etc. for all directives</td></tr>
<tr><td class="h">509</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# </td></tr>
<tr><td class="h">510</td><td colspan="7"></td></tr><tr><td class="h">511</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L511">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $self = $_[0];</td></tr>
<tr><td class="h">512</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $paras;</td></tr>
<tr><td class="h">513</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L513">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return unless @{$paras = $self-&gt;{&#39;paras&#39;}};</td></tr>
<tr><td class="h">514</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L514">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $curr_open = ($self-&gt;{&#39;curr_open&#39;} ||= []);</td></tr>
<tr><td class="h">515</td><td colspan="7"></td></tr><tr><td class="h">516</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $scratch;</td></tr>
<tr><td class="h">517</td><td colspan="7"></td></tr><tr><td class="h">518</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 10 and print &quot;# Paragraph buffer: &lt;&lt;&quot;, pretty($paras), &quot;&gt;&gt;\n&quot;;</td></tr>
<tr><td class="h">519</td><td colspan="7"></td></tr><tr><td class="h">520</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# We have something in our buffer.&nbsp;&nbsp;So apparently the document has started.</td></tr>
<tr><td class="h">521</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L521">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless($self-&gt;{&#39;doc_has_started&#39;}) {</td></tr>
<tr><td class="h">522</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;doc_has_started&#39;} = 1;</td></tr>
<tr><td class="h">523</td><td colspan="7"></td></tr><tr><td class="h">524</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $starting_contentless;</td></tr>
<tr><td class="h">525</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L525">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$starting_contentless =</td></tr>
<tr><td class="h">526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</td></tr>
<tr><td class="h">527</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!@$curr_open&nbsp;&nbsp;</td></tr>
<tr><td class="h">528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and @$paras and ! grep $_-&gt;[0] ne &#39;~end&#39;, @$paras</td></tr>
<tr><td class="h">529</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# i.e., if the paras is all ~ends</td></tr>
<tr><td class="h">530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">532</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;# Starting &quot;, </td></tr>
<tr><td class="h">533</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$starting_contentless ? &#39;contentless&#39; : &#39;contentful&#39;,</td></tr>
<tr><td class="h">534</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; document\n&quot;</td></tr>
<tr><td class="h">535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">536</td><td colspan="7"></td></tr><tr><td class="h">537</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L537">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_element_start(</td></tr>
<tr><td class="h">538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($scratch = &#39;Document&#39;),</td></tr>
<tr><td class="h">539</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;start_line&#39; =&gt; $paras-&gt;[0][1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">541</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$starting_contentless ? ( &#39;contentless&#39; =&gt; 1 ) : (),</td></tr>
<tr><td class="h">542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</td></tr>
<tr><td class="h">543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">545</td><td colspan="7"></td></tr><tr><td class="h">546</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($para, $para_type);</td></tr>
<tr><td class="h">547</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;while(@$paras) {</td></tr>
<tr><td class="h">548</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L548">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L548">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;last if @$paras == 1 and</td></tr>
<tr><td class="h">549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( $paras-&gt;[0][0] eq &#39;=over&#39; or $paras-&gt;[0][0] eq &#39;~Verbatim&#39;</td></tr>
<tr><td class="h">550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $paras-&gt;[0][0] eq &#39;=item&#39; )</td></tr>
<tr><td class="h">551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Those&#39;re the three kinds of paragraphs that require lookahead.</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;Actually, an &quot;=item Foo&quot; inside an &lt;over type=text&gt; region</td></tr>
<tr><td class="h">554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;and any =item inside an &lt;over type=block&gt; region (rare)</td></tr>
<tr><td class="h">555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;don&#39;t require any lookahead, but all others (bullets</td></tr>
<tr><td class="h">556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;and numbers) do.</td></tr>
<tr><td class="h">557</td><td colspan="7"></td></tr><tr><td class="h">558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># TODO: whinge about many kinds of directives in non-resolving =for regions?</td></tr>
<tr><td class="h">559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># TODO: many?&nbsp;&nbsp;like what?&nbsp;&nbsp;=head1 etc?</td></tr>
<tr><td class="h">560</td><td colspan="7"></td></tr><tr><td class="h">561</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para = shift @$paras;</td></tr>
<tr><td class="h">562</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para_type = $para-&gt;[0];</td></tr>
<tr><td class="h">563</td><td colspan="7"></td></tr><tr><td class="h">564</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Pondering a $para_type paragraph, given the stack: (&quot;,</td></tr>
<tr><td class="h">565</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dump_curr_open(), &quot;)\n&quot;;</td></tr>
<tr><td class="h">566</td><td colspan="7"></td></tr><tr><td class="h">567</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L567">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L567">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L567">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L567">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($para_type eq &#39;=for&#39;) {</td></tr>
<tr><td class="h">568</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L568">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_for($para,$curr_open,$paras);</td></tr>
<tr><td class="h">569</td><td colspan="7"></td></tr><tr><td class="h">570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=begin&#39;) {</td></tr>
<tr><td class="h">571</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L571">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_begin($para,$curr_open,$paras);</td></tr>
<tr><td class="h">572</td><td colspan="7"></td></tr><tr><td class="h">573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=end&#39;) {</td></tr>
<tr><td class="h">574</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L574">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_end($para,$curr_open,$paras);</td></tr>
<tr><td class="h">575</td><td colspan="7"></td></tr><tr><td class="h">576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;~end&#39;) { # The virtual end-document signal</td></tr>
<tr><td class="h">577</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L577">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_doc_end($para,$curr_open,$paras);</td></tr>
<tr><td class="h">578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">579</td><td colspan="7"></td></tr><tr><td class="h">580</td><td colspan="7"></td></tr><tr><td class="h">581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~</td></tr>
<tr><td class="h">582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~</td></tr>
<tr><td class="h">583</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L583">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(grep $_-&gt;[1]{&#39;~ignore&#39;}, @$curr_open) {</td></tr>
<tr><td class="h">584</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and</td></tr>
<tr><td class="h">585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;Skipping $para_type paragraph because in ignore mode.\n&quot;;</td></tr>
<tr><td class="h">586</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">587</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">588</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~</td></tr>
<tr><td class="h">589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~</td></tr>
<tr><td class="h">590</td><td colspan="7"></td></tr><tr><td class="h">591</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L591">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L591">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L591">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($para_type eq &#39;=pod&#39;) {</td></tr>
<tr><td class="h">592</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_pod($para,$curr_open,$paras);</td></tr>
<tr><td class="h">593</td><td colspan="7"></td></tr><tr><td class="h">594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=over&#39;) {</td></tr>
<tr><td class="h">595</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L595">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_over($para,$curr_open,$paras);</td></tr>
<tr><td class="h">596</td><td colspan="7"></td></tr><tr><td class="h">597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=back&#39;) {</td></tr>
<tr><td class="h">598</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L598">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $self-&gt;_ponder_back($para,$curr_open,$paras);</td></tr>
<tr><td class="h">599</td><td colspan="7"></td></tr><tr><td class="h">600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">601</td><td colspan="7"></td></tr><tr><td class="h">602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# All non-magical codes!!!</td></tr>
<tr><td class="h">603</td><td colspan="7"></td></tr><tr><td class="h">604</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Here we start using $para_type for our own twisted purposes, to</td></tr>
<tr><td class="h">605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;mean how it should get treated, not as what the element name</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;should be.</td></tr>
<tr><td class="h">607</td><td colspan="7"></td></tr><tr><td class="h">608</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Pondering non-magical $para_type\n&quot;;</td></tr>
<tr><td class="h">609</td><td colspan="7"></td></tr><tr><td class="h">610</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $i;</td></tr>
<tr><td class="h">611</td><td colspan="7"></td></tr><tr><td class="h">612</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Enforce some =headN discipline</td></tr>
<tr><td class="h">613</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L613">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L613">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($para_type =~ m/^=head\d$/s</td></tr>
<tr><td class="h">614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and ! $self-&gt;{&#39;accept_heads_anywhere&#39;}</td></tr>
<tr><td class="h">615</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and @$curr_open</td></tr>
<tr><td class="h">616</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $curr_open-&gt;[-1][0] eq &#39;=over&#39;</td></tr>
<tr><td class="h">617</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">618</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot;&#39;=$para_type&#39; inside an &#39;=over&#39;!\n&quot;;</td></tr>
<tr><td class="h">619</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You forgot a &#39;=back&#39; before &#39;$para_type&#39;&quot;</td></tr>
<tr><td class="h">622</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras, [&#39;=back&#39;, {}, &#39;&#39;], $para;&nbsp;&nbsp;&nbsp;# close the =over</td></tr>
<tr><td class="h">624</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">625</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">626</td><td colspan="7"></td></tr><tr><td class="h">627</td><td colspan="7"></td></tr><tr><td class="h">628</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L628">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L628">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($para_type eq &#39;=item&#39;) {</td></tr>
<tr><td class="h">629</td><td colspan="7"></td></tr><tr><td class="h">630</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $over;</td></tr>
<tr><td class="h">631</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L631">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L631">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless(@$curr_open and</td></tr>
<tr><td class="h">632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$over = (grep { $_-&gt;[0] eq &#39;=over&#39; } @$curr_open)[-1]) {</td></tr>
<tr><td class="h">633</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">635</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;=item&#39; outside of any &#39;=over&#39;&quot;</td></tr>
<tr><td class="h">636</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">637</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras,</td></tr>
<tr><td class="h">638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=over&#39;, {&#39;start_line&#39; =&gt; $para-&gt;[1]{&#39;start_line&#39;}}, &#39;&#39;],</td></tr>
<tr><td class="h">639</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para</td></tr>
<tr><td class="h">640</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">641</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">642</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">643</td><td colspan="7"></td></tr><tr><td class="h">644</td><td colspan="7"></td></tr><tr><td class="h">645</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $over_type = $over-&gt;[1]{&#39;~type&#39;};</td></tr>
<tr><td class="h">646</td><td colspan="7"></td></tr><tr><td class="h">647</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L647">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L647">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L647">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L647">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L647">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!$over_type) {</td></tr>
<tr><td class="h">648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Shouldn&#39;t happen1</td></tr>
<tr><td class="h">649</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Typeless over in stack, starting at line &quot;</td></tr>
<tr><td class="h">650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $over-&gt;[1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">651</td><td colspan="7"></td></tr><tr><td class="h">652</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($over_type eq &#39;block&#39;) {</td></tr>
<tr><td class="h">653</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L653">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless($curr_open-&gt;[-1][1]{&#39;~bitched_about&#39;}) {</td></tr>
<tr><td class="h">654</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curr_open-&gt;[-1][1]{&#39;~bitched_about&#39;} = 1;</td></tr>
<tr><td class="h">655</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curr_open-&gt;[-1][1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You can&#39;t have =items (as at line &quot;</td></tr>
<tr><td class="h">658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $para-&gt;[1]{&#39;start_line&#39;}</td></tr>
<tr><td class="h">659</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;) unless the first thing after the =over is an =item&quot;</td></tr>
<tr><td class="h">660</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">661</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Just turn it into a paragraph and reconsider it</td></tr>
<tr><td class="h">663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;~Para&#39;;</td></tr>
<tr><td class="h">664</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras, $para;</td></tr>
<tr><td class="h">665</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">666</td><td colspan="7"></td></tr><tr><td class="h">667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($over_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">668</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">669</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">670</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">671</td><td colspan="7"></td></tr><tr><td class="h">672</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L672">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L672">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L672">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Nothing special needs doing for &#39;text&#39;</td></tr>
<tr><td class="h">674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;number&#39; or $item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">675</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">676</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected text after =item, not a $item_type&quot;</td></tr>
<tr><td class="h">678</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">679</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Undo our clobbering:</td></tr>
<tr><td class="h">680</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">681</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $para-&gt;[1]{&#39;number&#39;};</td></tr>
<tr><td class="h">682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Only a PROPER item-number element is allowed</td></tr>
<tr><td class="h">683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to have a number attribute.</td></tr>
<tr><td class="h">684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">685</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">687</td><td colspan="7"></td></tr><tr><td class="h">688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# =item-text thingies don&#39;t need any assimilation, it seems.</td></tr>
<tr><td class="h">689</td><td colspan="7"></td></tr><tr><td class="h">690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($over_type eq &#39;number&#39;) {</td></tr>
<tr><td class="h">691</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">693</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">694</td><td colspan="7"></td></tr><tr><td class="h">695</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $expected_value = ++ $curr_open-&gt;[-1][1]{&#39;~counter&#39;};</td></tr>
<tr><td class="h">696</td><td colspan="7"></td></tr><tr><td class="h">697</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L697">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L697">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L697">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L697">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hm, it&#39;s not numeric.&nbsp;&nbsp;Correct for this.</td></tr>
<tr><td class="h">699</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;</td></tr>
<tr><td class="h">700</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">703</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">704</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">705</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# restore the bullet, blocking the assimilation of next para</td></tr>
<tr><td class="h">706</td><td colspan="7"></td></tr><tr><td class="h">707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hm, it&#39;s not numeric.&nbsp;&nbsp;Correct for this.</td></tr>
<tr><td class="h">709</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;</td></tr>
<tr><td class="h">710</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">711</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">713</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Text content will still be there and will block next ~Para</td></tr>
<tr><td class="h">715</td><td colspan="7"></td></tr><tr><td class="h">716</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type ne &#39;number&#39;) {</td></tr>
<tr><td class="h">717</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unknown item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">718</td><td colspan="7"></td></tr><tr><td class="h">719</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($expected_value == $para-&gt;[1]{&#39;number&#39;}) {</td></tr>
<tr><td class="h">720</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Numeric item has the expected value of $expected_value\n&quot;;</td></tr>
<tr><td class="h">721</td><td colspan="7"></td></tr><tr><td class="h">722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">723</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Numeric item has &quot;, $para-&gt;[1]{&#39;number&#39;},</td></tr>
<tr><td class="h">724</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; instead of the expected value of $expected_value\n&quot;;</td></tr>
<tr><td class="h">725</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">727</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You have &#39;=item &quot; . $para-&gt;[1]{&#39;number&#39;} .</td></tr>
<tr><td class="h">728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39; instead of the expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">730</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;&nbsp;&nbsp;# correcting!!</td></tr>
<tr><td class="h">731</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">732</td><td colspan="7"></td></tr><tr><td class="h">733</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L733">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@$para == 2) {</td></tr>
<tr><td class="h">734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For the cases where we /didn&#39;t/ push to @$para</td></tr>
<tr><td class="h">735</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L735">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($paras-&gt;[0][0] eq &#39;~Para&#39;) {</td></tr>
<tr><td class="h">736</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Assimilating following ~Para content into $over_type item\n&quot;;</td></tr>
<tr><td class="h">737</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, splice @{shift @$paras},2;</td></tr>
<tr><td class="h">738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">739</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Can&#39;t assimilate following &quot;, $paras-&gt;[0][0], &quot;\n&quot;;</td></tr>
<tr><td class="h">740</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, &#39;&#39;;&nbsp;&nbsp;# Just so it&#39;s not contentless</td></tr>
<tr><td class="h">741</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">743</td><td colspan="7"></td></tr><tr><td class="h">744</td><td colspan="7"></td></tr><tr><td class="h">745</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($over_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">746</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">748</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">749</td><td colspan="7"></td></tr><tr><td class="h">750</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L750">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L750">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L750">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# as expected!</td></tr>
<tr><td class="h">752</td><td colspan="7"></td></tr><tr><td class="h">753</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L753">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $para-&gt;[1]{&#39;~_freaky_para_hack&#39;} ) {</td></tr>
<tr><td class="h">754</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Accomodating &#39;=item * Foo&#39; tolerance hack.\n&quot;;</td></tr>
<tr><td class="h">755</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, delete $para-&gt;[1]{&#39;~_freaky_para_hack&#39;};</td></tr>
<tr><td class="h">756</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">757</td><td colspan="7"></td></tr><tr><td class="h">758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;number&#39;) {</td></tr>
<tr><td class="h">759</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item *&#39;&quot;</td></tr>
<tr><td class="h">762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">763</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and block assimilation of the next paragraph</td></tr>
<tr><td class="h">765</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $para-&gt;[1]{&#39;number&#39;};</td></tr>
<tr><td class="h">766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Only a PROPER item-number element is allowed</td></tr>
<tr><td class="h">767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to have a number attribute.</td></tr>
<tr><td class="h">768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">769</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">770</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item *&#39;&quot;</td></tr>
<tr><td class="h">772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# But doesn&#39;t need processing.&nbsp;&nbsp;But it&#39;ll block assimilation</td></tr>
<tr><td class="h">774</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;of the next para.</td></tr>
<tr><td class="h">775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">776</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">778</td><td colspan="7"></td></tr><tr><td class="h">779</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L779">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@$para == 2) {</td></tr>
<tr><td class="h">780</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For the cases where we /didn&#39;t/ push to @$para</td></tr>
<tr><td class="h">781</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L781">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($paras-&gt;[0][0] eq &#39;~Para&#39;) {</td></tr>
<tr><td class="h">782</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Assimilating following ~Para content into $over_type item\n&quot;;</td></tr>
<tr><td class="h">783</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, splice @{shift @$paras},2;</td></tr>
<tr><td class="h">784</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">785</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Can&#39;t assimilate following &quot;, $paras-&gt;[0][0], &quot;\n&quot;;</td></tr>
<tr><td class="h">786</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, &#39;&#39;;&nbsp;&nbsp;# Just so it&#39;s not contentless</td></tr>
<tr><td class="h">787</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">789</td><td colspan="7"></td></tr><tr><td class="h">790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">791</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled =over type \&quot;$over_type\&quot;?&quot;;</td></tr>
<tr><td class="h">792</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Shouldn&#39;t happen!</td></tr>
<tr><td class="h">793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">794</td><td colspan="7"></td></tr><tr><td class="h">795</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;Plain&#39;;</td></tr>
<tr><td class="h">796</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] .= &#39;-&#39; . $over_type;</td></tr>
<tr><td class="h">797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Whew.&nbsp;&nbsp;Now fall thru and process it.</td></tr>
<tr><td class="h">798</td><td colspan="7"></td></tr><tr><td class="h">799</td><td colspan="7"></td></tr><tr><td class="h">800</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=extend&#39;) {</td></tr>
<tr><td class="h">801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Well, might as well implement it here.</td></tr>
<tr><td class="h">802</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_extend($para);</td></tr>
<tr><td class="h">803</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;&nbsp;&nbsp;# and skip</td></tr>
<tr><td class="h">804</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;=encoding&#39;) {</td></tr>
<tr><td class="h">805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Not actually acted on here, but we catch errors here.</td></tr>
<tr><td class="h">806</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_encoding_second_level($para);</td></tr>
<tr><td class="h">807</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L807">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless $self-&gt;keep_encoding_directive;</td></tr>
<tr><td class="h">808</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;Plain&#39;;</td></tr>
<tr><td class="h">809</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;~Verbatim&#39;) {</td></tr>
<tr><td class="h">810</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;Verbatim&#39;;</td></tr>
<tr><td class="h">811</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;?Verbatim&#39;;</td></tr>
<tr><td class="h">812</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;~Para&#39;) {</td></tr>
<tr><td class="h">813</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;Para&#39;;</td></tr>
<tr><td class="h">814</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;?Plain&#39;;</td></tr>
<tr><td class="h">815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;Data&#39;) {</td></tr>
<tr><td class="h">816</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;Data&#39;;</td></tr>
<tr><td class="h">817</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;?Data&#39;;</td></tr>
<tr><td class="h">818</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $para_type =~ s/^=//s</td></tr>
<tr><td class="h">819</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and defined( $para_type = $self-&gt;{&#39;accept_directives&#39;}{$para_type} )</td></tr>
<tr><td class="h">820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">821</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Pondering known directive ${$para}[0] as $para_type\n&quot;;</td></tr>
<tr><td class="h">822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">823</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# An unknown directive!</td></tr>
<tr><td class="h">824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and printf &quot;Unhandled directive %s (Handled: %s)\n&quot;,</td></tr>
<tr><td class="h">825</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0], join(&#39; &#39;, sort keys %{$self-&gt;{&#39;accept_directives&#39;}} )</td></tr>
<tr><td class="h">826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">827</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">828</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Unknown directive: $para-&gt;[0]&quot;</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">831</td><td colspan="7"></td></tr><tr><td class="h">832</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# And maybe treat it as text instead of just letting it go?</td></tr>
<tr><td class="h">833</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">835</td><td colspan="7"></td></tr><tr><td class="h">836</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L836">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($para_type =~ s/^\?//s) {</td></tr>
<tr><td class="h">837</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L837">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(! @$curr_open) {&nbsp;&nbsp;# usual case</td></tr>
<tr><td class="h">838</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Treating $para_type paragraph as such because stack is empty.\n&quot;;</td></tr>
<tr><td class="h">839</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">840</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @fors = grep $_-&gt;[0] eq &#39;=for&#39;, @$curr_open;</td></tr>
<tr><td class="h">841</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Containing fors: &quot;,</td></tr>
<tr><td class="h">842</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join(&#39;,&#39;, map $_-&gt;[1]{&#39;target&#39;}, @fors), &quot;\n&quot;;</td></tr>
<tr><td class="h">843</td><td colspan="7"></td></tr><tr><td class="h">844</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L844">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L844">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(! @fors) {</td></tr>
<tr><td class="h">845</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Treating $para_type paragraph as such because stack has no =for&#39;s\n&quot;;</td></tr>
<tr><td class="h">846</td><td colspan="7"></td></tr><tr><td class="h">847</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#} elsif(grep $_-&gt;[1]{&#39;~resolve&#39;}, @fors) {</td></tr>
<tr><td class="h">848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#} elsif(not grep !$_-&gt;[1]{&#39;~resolve&#39;}, @fors) {</td></tr>
<tr><td class="h">849</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( $fors[-1][1]{&#39;~resolve&#39;} ) {</td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Look to the immediately containing for</td></tr>
<tr><td class="h">851</td><td colspan="7"></td></tr><tr><td class="h">852</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L852">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($para_type eq &#39;Data&#39;) {</td></tr>
<tr><td class="h">853</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Treating Data paragraph as Plain/Verbatim because the containing =for ($fors[-1][1]{&#39;target&#39;}) is a resolver\n&quot;;</td></tr>
<tr><td class="h">854</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;Para&#39;;</td></tr>
<tr><td class="h">855</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para_type = &#39;Plain&#39;;</td></tr>
<tr><td class="h">856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">857</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Treating $para_type paragraph as such because the containing =for ($fors[-1][1]{&#39;target&#39;}) is a resolver\n&quot;;</td></tr>
<tr><td class="h">858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">859</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">860</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Treating $para_type paragraph as Data because the containing =for ($fors[-1][1]{&#39;target&#39;}) is a non-resolver\n&quot;;</td></tr>
<tr><td class="h">861</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = $para_type = &#39;Data&#39;;</td></tr>
<tr><td class="h">862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">864</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">865</td><td colspan="7"></td></tr><tr><td class="h">866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</td></tr>
<tr><td class="h">867</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L867">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L867">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L867">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($para_type eq &#39;Plain&#39;) {</td></tr>
<tr><td class="h">868</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_Plain($para);</td></tr>
<tr><td class="h">869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;Verbatim&#39;) {</td></tr>
<tr><td class="h">870</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_Verbatim($para);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">871</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($para_type eq &#39;Data&#39;) {</td></tr>
<tr><td class="h">872</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ponder_Data($para);</td></tr>
<tr><td class="h">873</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">874</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;\$para type is $para_type -- how did that happen?&quot;;</td></tr>
<tr><td class="h">875</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Shouldn&#39;t happen.</td></tr>
<tr><td class="h">876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">877</td><td colspan="7"></td></tr><tr><td class="h">878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</td></tr>
<tr><td class="h">879</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] =~ s/^[~=]//s;</td></tr>
<tr><td class="h">880</td><td colspan="7"></td></tr><tr><td class="h">881</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;\n&quot;, pretty($para), &quot;\n&quot;;</td></tr>
<tr><td class="h">882</td><td colspan="7"></td></tr><tr><td class="h">883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# traverse the treelet (which might well be just one string scalar)</td></tr>
<tr><td class="h">884</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L884">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">885</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_traverse_treelet_bit(@$para);</td></tr>
<tr><td class="h">886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">888</td><td colspan="7"></td></tr><tr><td class="h">889</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">891</td><td colspan="7"></td></tr><tr><td class="h">892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###########################################################################</td></tr>
<tr><td class="h">893</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># The sub-ponderers...</td></tr>
<tr><td class="h">894</td><td colspan="7"></td></tr><tr><td class="h">895</td><td colspan="7"></td></tr><tr><td class="h">896</td><td colspan="7"></td></tr><tr><td class="h">897</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_for {</td></tr>
<tr><td class="h">898</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L898">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">899</td><td colspan="7"></td></tr><tr><td class="h">900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Fake it out as a begin/end</td></tr>
<tr><td class="h">901</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $target;</td></tr>
<tr><td class="h">902</td><td colspan="7"></td></tr><tr><td class="h">903</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L903">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(grep $_-&gt;[1]{&#39;~ignore&#39;}, @$curr_open) {</td></tr>
<tr><td class="h">904</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Ignoring ignorable =for\n&quot;;</td></tr>
<tr><td class="h">905</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">907</td><td colspan="7"></td></tr><tr><td class="h">908</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for(my $i = 2; $i &lt; @$para; ++$i) {</td></tr>
<tr><td class="h">909</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L909">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($para-&gt;[$i] =~ s/^\s*(\S+)\s*//s) {</td></tr>
<tr><td class="h">910</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$target = $1;</td></tr>
<tr><td class="h">911</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">912</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">914</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L914">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless(defined $target) {</td></tr>
<tr><td class="h">915</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">916</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">917</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=for without a target?&quot;</td></tr>
<tr><td class="h">918</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">919</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">921</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and</td></tr>
<tr><td class="h">922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;print &quot;Faking out a =for $target as a =begin $target / =end $target\n&quot;;</td></tr>
<tr><td class="h">923</td><td colspan="7"></td></tr><tr><td class="h">924</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[0] = &#39;Data&#39;;</td></tr>
<tr><td class="h">925</td><td colspan="7"></td></tr><tr><td class="h">926</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unshift @$paras,</td></tr>
<tr><td class="h">927</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=begin&#39;,</td></tr>
<tr><td class="h">928</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#39;start_line&#39; =&gt; $para-&gt;[1]{&#39;start_line&#39;}, &#39;~really&#39; =&gt; &#39;=for&#39;},</td></tr>
<tr><td class="h">929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$target,</td></tr>
<tr><td class="h">930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;],</td></tr>
<tr><td class="h">931</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para,</td></tr>
<tr><td class="h">932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=end&#39;,</td></tr>
<tr><td class="h">933</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#39;start_line&#39; =&gt; $para-&gt;[1]{&#39;start_line&#39;}, &#39;~really&#39; =&gt; &#39;=for&#39;},</td></tr>
<tr><td class="h">934</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$target,</td></tr>
<tr><td class="h">935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;],</td></tr>
<tr><td class="h">936</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">937</td><td colspan="7"></td></tr><tr><td class="h">938</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">940</td><td colspan="7"></td></tr><tr><td class="h">941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_begin {</td></tr>
<tr><td class="h">942</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L942">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">943</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @$para, 2;</td></tr>
<tr><td class="h">944</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/^\s+//s;</td></tr>
<tr><td class="h">945</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/\s+$//s;</td></tr>
<tr><td class="h">946</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L946">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless(length($content)) {</td></tr>
<tr><td class="h">947</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">948</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">949</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=begin without a target?&quot;</td></tr>
<tr><td class="h">950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">951</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Ignoring targetless =begin\n&quot;;</td></tr>
<tr><td class="h">952</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">954</td><td colspan="7"></td></tr><tr><td class="h">955</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($target, $title) = $content =~ m/^(\S+)\s*(.*)$/;</td></tr>
<tr><td class="h">956</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L956">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;title&#39;} = $title if ($title);</td></tr>
<tr><td class="h">957</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;target&#39;} = $target;&nbsp;&nbsp;# without any &#39;:&#39;</td></tr>
<tr><td class="h">958</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content = $target; # strip off the title</td></tr>
<tr><td class="h">959</td><td colspan="7"></td></tr><tr><td class="h">960</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/^:!/!:/s;</td></tr>
<tr><td class="h">961</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $neg;&nbsp;&nbsp;# whether this is a negation-match</td></tr>
<tr><td class="h">962</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L962">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$neg = 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $content =~ s/^!//s;</td></tr>
<tr><td class="h">963</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $to_resolve;&nbsp;&nbsp;# whether to process formatting codes</td></tr>
<tr><td class="h">964</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L964">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$to_resolve = 1 if $content =~ s/^://s;</td></tr>
<tr><td class="h">965</td><td colspan="7"></td></tr><tr><td class="h">966</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $dont_ignore; # whether this target matches us</td></tr>
<tr><td class="h">967</td><td colspan="7"></td></tr><tr><td class="h">968</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L968">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;foreach my $target_name (</td></tr>
<tr><td class="h">969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;split(&#39;,&#39;, $content, -1),</td></tr>
<tr><td class="h">970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$neg ? () : &#39;*&#39;</td></tr>
<tr><td class="h">971</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">972</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and</td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot; Considering whether =begin $content matches $target_name\n&quot;;</td></tr>
<tr><td class="h">974</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L974">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;next unless $self-&gt;{&#39;accept_targets&#39;}{$target_name};</td></tr>
<tr><td class="h">975</td><td colspan="7"></td></tr><tr><td class="h">976</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and</td></tr>
<tr><td class="h">977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&nbsp;&nbsp;It DOES match the acceptable target $target_name!\n&quot;;</td></tr>
<tr><td class="h">978</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L978">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$to_resolve = 1</td></tr>
<tr><td class="h">979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $self-&gt;{&#39;accept_targets&#39;}{$target_name} eq &#39;force_resolve&#39;;</td></tr>
<tr><td class="h">980</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$dont_ignore = 1;</td></tr>
<tr><td class="h">981</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;target_matching&#39;} = $target_name;</td></tr>
<tr><td class="h">982</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;last; # stop looking at other target names</td></tr>
<tr><td class="h">983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">984</td><td colspan="7"></td></tr><tr><td class="h">985</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L985">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if($neg) {</td></tr>
<tr><td class="h">986</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L986">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $dont_ignore ) {</td></tr>
<tr><td class="h">987</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dont_ignore = &#39;&#39;;</td></tr>
<tr><td class="h">988</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $para-&gt;[1]{&#39;target_matching&#39;};</td></tr>
<tr><td class="h">989</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; But the leading ! means that this is a NON-match!\n&quot;;</td></tr>
<tr><td class="h">990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">991</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dont_ignore = 1;</td></tr>
<tr><td class="h">992</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;target_matching&#39;} = &#39;!&#39;;</td></tr>
<tr><td class="h">993</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 2 and print &quot; But the leading ! means that this IS a match!\n&quot;;</td></tr>
<tr><td class="h">994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">996</td><td colspan="7"></td></tr><tr><td class="h">997</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[0] = &#39;=for&#39;;&nbsp;&nbsp;# Just what we happen to call these, internally</td></tr>
<tr><td class="h">998</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L998">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;~really&#39;} ||= &#39;=begin&#39;;</td></tr>
<tr><td class="h">999</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L999">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;~ignore&#39;}&nbsp;&nbsp;&nbsp;= (! $dont_ignore) || 0;</td></tr>
<tr><td class="h">1000</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1000">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;~resolve&#39;}&nbsp;&nbsp;= $to_resolve || 0;</td></tr>
<tr><td class="h">1001</td><td colspan="7"></td></tr><tr><td class="h">1002</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Making note to &quot;, $dont_ignore ? &#39;not &#39; : &#39;&#39;,</td></tr>
<tr><td class="h">1003</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&quot;ignore contents of this region\n&quot;;</td></tr>
<tr><td class="h">1004</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and $dont_ignore and print &quot; Making note to treat contents as &quot;,</td></tr>
<tr><td class="h">1005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($to_resolve ? &#39;verbatim/plain&#39; : &#39;data&#39;), &quot; paragraphs\n&quot;;</td></tr>
<tr><td class="h">1006</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; (Stack now: &quot;, $self-&gt;_dump_curr_open(), &quot;)\n&quot;;</td></tr>
<tr><td class="h">1007</td><td colspan="7"></td></tr><tr><td class="h">1008</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @$curr_open, $para;</td></tr>
<tr><td class="h">1009</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1009">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1009">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(!$dont_ignore or scalar grep $_-&gt;[1]{&#39;~ignore&#39;}, @$curr_open) {</td></tr>
<tr><td class="h">1010</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Ignoring ignorable =begin\n&quot;;</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1012</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1012">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">1013</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_element_start((my $scratch=&#39;for&#39;), $para-&gt;[1]);</td></tr>
<tr><td class="h">1014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1015</td><td colspan="7"></td></tr><tr><td class="h">1016</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1017</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1018</td><td colspan="7"></td></tr><tr><td class="h">1019</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_end {</td></tr>
<tr><td class="h">1020</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1020">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1021</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @$para, 2;</td></tr>
<tr><td class="h">1022</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/^\s+//s;</td></tr>
<tr><td class="h">1023</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$content =~ s/\s+$//s;</td></tr>
<tr><td class="h">1024</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot;Ogling &#39;=end $content&#39; directive\n&quot;;</td></tr>
<tr><td class="h">1025</td><td colspan="7"></td></tr><tr><td class="h">1026</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1026">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless(length($content)) {</td></tr>
<tr><td class="h">1027</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1027">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1027">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;=end&#39; without a target?&quot; . (</td></tr>
<tr><td class="h">1030</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( @$curr_open and $curr_open-&gt;[-1][0] eq &#39;=for&#39; )</td></tr>
<tr><td class="h">1031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? ( &quot; (Should be \&quot;=end &quot; . $curr_open-&gt;[-1][1]{&#39;target&#39;} . &#39;&quot;)&#39; )</td></tr>
<tr><td class="h">1032</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;&#39;</td></tr>
<tr><td class="h">1033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1035</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Ignoring targetless =end\n&quot;;</td></tr>
<tr><td class="h">1036</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1037</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1038</td><td colspan="7"></td></tr><tr><td class="h">1039</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1039">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless($content =~ m/^\S+$/) {&nbsp;&nbsp;# i.e., unless it&#39;s one word</td></tr>
<tr><td class="h">1040</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1041</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1042</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;=end $content&#39; is invalid.&nbsp;&nbsp;(Stack: &quot;</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $self-&gt;_dump_curr_open() . &#39;)&#39;</td></tr>
<tr><td class="h">1044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1045</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Ignoring mistargetted =end $content\n&quot;;</td></tr>
<tr><td class="h">1046</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1048</td><td colspan="7"></td></tr><tr><td class="h">1049</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1049">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1049">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless(@$curr_open and $curr_open-&gt;[-1][0] eq &#39;=for&#39;) {</td></tr>
<tr><td class="h">1050</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1051</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=end $content without matching =begin.&nbsp;&nbsp;(Stack: &quot;</td></tr>
<tr><td class="h">1053</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $self-&gt;_dump_curr_open() . &#39;)&#39;</td></tr>
<tr><td class="h">1054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1055</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Ignoring mistargetted =end $content\n&quot;;</td></tr>
<tr><td class="h">1056</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1058</td><td colspan="7"></td></tr><tr><td class="h">1059</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1059">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless($content eq $curr_open-&gt;[-1][1]{&#39;target&#39;}) {</td></tr>
<tr><td class="h">1060</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1062</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=end $content doesn&#39;t match =begin &quot; </td></tr>
<tr><td class="h">1063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $curr_open-&gt;[-1][1]{&#39;target&#39;}</td></tr>
<tr><td class="h">1064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;.&nbsp;&nbsp;(Stack: &quot;</td></tr>
<tr><td class="h">1065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $self-&gt;_dump_curr_open() . &#39;)&#39;</td></tr>
<tr><td class="h">1066</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1067</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Ignoring mistargetted =end $content at line $para-&gt;[1]{&#39;start_line&#39;}\n&quot;;</td></tr>
<tr><td class="h">1068</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1070</td><td colspan="7"></td></tr><tr><td class="h">1071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Else it&#39;s okay to close...</td></tr>
<tr><td class="h">1072</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1072">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(grep $_-&gt;[1]{&#39;~ignore&#39;}, @$curr_open) {</td></tr>
<tr><td class="h">1073</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Not firing any event for this =end $content because in an ignored region\n&quot;;</td></tr>
<tr><td class="h">1074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# And that may be because of this to-be-closed =for region, or some</td></tr>
<tr><td class="h">1075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;other one, but it doesn&#39;t matter.</td></tr>
<tr><td class="h">1076</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1077</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$curr_open-&gt;[-1][1]{&#39;start_line&#39;} = $para-&gt;[1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">1078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# what&#39;s that for?</td></tr>
<tr><td class="h">1079</td><td colspan="7"></td></tr><tr><td class="h">1080</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1080">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">1081</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_element_end( my $scratch = &#39;for&#39;, $para-&gt;[1]);</td></tr>
<tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1083</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Popping $curr_open-&gt;[-1][0] $curr_open-&gt;[-1][1]{&#39;target&#39;} because of =end $content\n&quot;;</td></tr>
<tr><td class="h">1084</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;pop @$curr_open;</td></tr>
<tr><td class="h">1085</td><td colspan="7"></td></tr><tr><td class="h">1086</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">} </td></tr>
<tr><td class="h">1088</td><td colspan="7"></td></tr><tr><td class="h">1089</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_doc_end {</td></tr>
<tr><td class="h">1090</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1090">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1091</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1091">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(@$curr_open) { # Deal with things left open</td></tr>
<tr><td class="h">1092</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Stack is nonempty at end-document: (&quot;,</td></tr>
<tr><td class="h">1093</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dump_curr_open(), &quot;)\n&quot;;</td></tr>
<tr><td class="h">1094</td><td colspan="7"></td></tr><tr><td class="h">1095</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 9 and print &quot;Stack: &quot;, pretty($curr_open), &quot;\n&quot;;</td></tr>
<tr><td class="h">1096</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras, $self-&gt;_closers_for_all_curr_open;</td></tr>
<tr><td class="h">1097</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make sure there is exactly one ~end in the parastack, at the end:</td></tr>
<tr><td class="h">1098</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@$paras = grep $_-&gt;[0] ne &#39;~end&#39;, @$paras;</td></tr>
<tr><td class="h">1099</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @$paras, $para, $para;</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We need two -- once for the next cycle where we</td></tr>
<tr><td class="h">1101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;generate errata, and then another to be at the end</td></tr>
<tr><td class="h">1102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;when that loop back around to process the errata.</td></tr>
<tr><td class="h">1103</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1104</td><td colspan="7"></td></tr><tr><td class="h">1105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1106</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Okay, stack is empty now.\n&quot;;</td></tr>
<tr><td class="h">1107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1108</td><td colspan="7"></td></tr><tr><td class="h">1109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Try generating errata section, if applicable</td></tr>
<tr><td class="h">1110</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1110">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless($self-&gt;{&#39;~tried_gen_errata&#39;}) {</td></tr>
<tr><td class="h">1111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;~tried_gen_errata&#39;} = 1;</td></tr>
<tr><td class="h">1112</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @extras = $self-&gt;_gen_errata();</td></tr>
<tr><td class="h">1113</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1113">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@extras) {</td></tr>
<tr><td class="h">1114</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras, @extras;</td></tr>
<tr><td class="h">1115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Generated errata... relooping...\n&quot;;</td></tr>
<tr><td class="h">1116</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;&nbsp;&nbsp;# I.e., loop around again to process these fake-o paragraphs</td></tr>
<tr><td class="h">1117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1119</td><td colspan="7"></td></tr><tr><td class="h">1120</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;splice @$paras; # Well, that&#39;s that for this paragraph buffer.</td></tr>
<tr><td class="h">1121</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot;Throwing end-document event.\n&quot;;</td></tr>
<tr><td class="h">1122</td><td colspan="7"></td></tr><tr><td class="h">1123</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;_handle_element_end( my $scratch = &#39;Document&#39; );</td></tr>
<tr><td class="h">1124</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return 1; # Hasta la byebye</td></tr>
<tr><td class="h">1125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1126</td><td colspan="7"></td></tr><tr><td class="h">1127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_pod {</td></tr>
<tr><td class="h">1128</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1128">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1129</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1129">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&quot;=pod directives shouldn&#39;t be over one line long!&nbsp;&nbsp;Ignoring all &quot;</td></tr>
<tr><td class="h">1132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. (@$para - 2) . &quot; lines of content&quot;</td></tr>
<tr><td class="h">1133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) if @$para &gt; 3;</td></tr>
<tr><td class="h">1134</td><td colspan="7"></td></tr><tr><td class="h">1135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Content ignored unless &#39;pod_handler&#39; is set</td></tr>
<tr><td class="h">1136</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1136">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if (my $pod_handler = $self-&gt;{&#39;pod_handler&#39;}) {</td></tr>
<tr><td class="h">1137</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($line_num, $line) = map $_, $para-&gt;[1]{&#39;start_line&#39;}, $para-&gt;[2];</td></tr>
<tr><td class="h">1138</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1138">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line = $line eq &#39;&#39; ? &quot;=pod&quot; : &quot;=pod $line&quot;; # imitate cut_handler output</td></tr>
<tr><td class="h">1139</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pod_handler-&gt;($line, $line_num, $self);</td></tr>
<tr><td class="h">1140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1141</td><td colspan="7"></td></tr><tr><td class="h">1142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# The surrounding methods set content_seen, so let us remain consistent.</td></tr>
<tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# I do not know why it was not here before -- should it not be here?</td></tr>
<tr><td class="h">1144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# $self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">1145</td><td colspan="7"></td></tr><tr><td class="h">1146</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1148</td><td colspan="7"></td></tr><tr><td class="h">1149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_over {</td></tr>
<tr><td class="h">1150</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1150">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1151</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1151">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return 1 unless @$paras;</td></tr>
<tr><td class="h">1152</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $list_type;</td></tr>
<tr><td class="h">1153</td><td colspan="7"></td></tr><tr><td class="h">1154</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1154">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1154">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1154">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if($paras-&gt;[0][0] eq &#39;=item&#39;) { # most common case</td></tr>
<tr><td class="h">1155</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$list_type = $self-&gt;_get_initial_item_type($paras-&gt;[0]);</td></tr>
<tr><td class="h">1156</td><td colspan="7"></td></tr><tr><td class="h">1157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($paras-&gt;[0][0] eq &#39;=back&#39;) {</td></tr>
<tr><td class="h">1158</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Ignore empty lists by default</td></tr>
<tr><td class="h">1159</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1159">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;{&#39;parse_empty_lists&#39;}) {</td></tr>
<tr><td class="h">1160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$list_type = &#39;empty&#39;;</td></tr>
<tr><td class="h">1161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1162</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift @$paras;</td></tr>
<tr><td class="h">1163</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($paras-&gt;[0][0] eq &#39;~end&#39;) {</td></tr>
<tr><td class="h">1166</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=over is the last thing in the document?!&quot;</td></tr>
<tr><td class="h">1169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1170</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1; # But feh, ignore it.</td></tr>
<tr><td class="h">1171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1172</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$list_type = &#39;block&#39;;</td></tr>
<tr><td class="h">1173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1174</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;~type&#39;} = $list_type;</td></tr>
<tr><td class="h">1175</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @$curr_open, $para;</td></tr>
<tr><td class="h">1176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;# yes, we reuse the paragraph as a stack item</td></tr>
<tr><td class="h">1177</td><td colspan="7"></td></tr><tr><td class="h">1178</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @$para, 2;</td></tr>
<tr><td class="h">1179</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $overness;</td></tr>
<tr><td class="h">1180</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1180">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1180">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if($content =~ m/^\s*$/s) {</td></tr>
<tr><td class="h">1181</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;indent&#39;} = 4;</td></tr>
<tr><td class="h">1182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($content =~ m/^\s*((?:\d*\.)?\d+)\s*$/s) {</td></tr>
<tr><td class="h">1183</td><td><div class="c3">94</div><div class="c3">94</div><div class="c3">94</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1183">94</a></div></td><td></td><td><div>431</div><div>109</div><div>303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no integer;</td></tr>
<tr><td class="h">1184</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;indent&#39;} = $1;</td></tr>
<tr><td class="h">1185</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1185">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($1 == 0) {</td></tr>
<tr><td class="h">1186</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1188</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Can&#39;t have a 0 in =over $content&quot;</td></tr>
<tr><td class="h">1189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1190</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;indent&#39;} = 4;</td></tr>
<tr><td class="h">1191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1193</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=over should be: &#39;=over&#39; or &#39;=over positive_number&#39;&quot;</td></tr>
<tr><td class="h">1196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1197</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;indent&#39;} = 4;</td></tr>
<tr><td class="h">1198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1199</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;=over found of type $list_type\n&quot;;</td></tr>
<tr><td class="h">1200</td><td colspan="7"></td></tr><tr><td class="h">1201</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1201">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">1202</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;_handle_element_start((my $scratch = &#39;over-&#39; . $list_type), $para-&gt;[1]);</td></tr>
<tr><td class="h">1203</td><td colspan="7"></td></tr><tr><td class="h">1204</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1206</td><td colspan="7"></td></tr><tr><td class="h">1207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_back {</td></tr>
<tr><td class="h">1208</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1208">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# TODO: fire off &lt;/item-number&gt; or &lt;/item-bullet&gt; or &lt;/item-text&gt; ??</td></tr>
<tr><td class="h">1210</td><td colspan="7"></td></tr><tr><td class="h">1211</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $content = join &#39; &#39;, splice @$para, 2;</td></tr>
<tr><td class="h">1212</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1212">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if($content =~ m/\S/) {</td></tr>
<tr><td class="h">1213</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=back doesn&#39;t take any parameters, but you said =back $content&quot;</td></tr>
<tr><td class="h">1216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1218</td><td colspan="7"></td></tr><tr><td class="h">1219</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1219">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1219">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(@$curr_open and $curr_open-&gt;[-1][0] eq &#39;=over&#39;) {</td></tr>
<tr><td class="h">1220</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;=back happily closes matching =over\n&quot;;</td></tr>
<tr><td class="h">1221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Expected case: we&#39;re closing the most recently opened thing</td></tr>
<tr><td class="h">1222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my $over = pop @$curr_open;</td></tr>
<tr><td class="h">1223</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1223">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;content_seen&#39;} ||= 1;</td></tr>
<tr><td class="h">1224</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_element_end( my $scratch =</td></tr>
<tr><td class="h">1225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;over-&#39; . ( (pop @$curr_open)-&gt;[1]{&#39;~type&#39;} ), $para-&gt;[1]</td></tr>
<tr><td class="h">1226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1228</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;=back found without a matching =over.&nbsp;&nbsp;Stack: (&quot;,</td></tr>
<tr><td class="h">1229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join(&#39;, &#39;, map $_-&gt;[0], @$curr_open), &quot;).\n&quot;;</td></tr>
<tr><td class="h">1230</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;=back without =over&#39;</td></tr>
<tr><td class="h">1233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1234</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1; # and ignore it</td></tr>
<tr><td class="h">1235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1237</td><td colspan="7"></td></tr><tr><td class="h">1238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_item {</td></tr>
<tr><td class="h">1239</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1239">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para,$curr_open,$paras) = @_;</td></tr>
<tr><td class="h">1240</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $over;</td></tr>
<tr><td class="h">1241</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1241">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1241">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless(@$curr_open and</td></tr>
<tr><td class="h">1242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$over = (grep { $_-&gt;[0] eq &#39;=over&#39; } @$curr_open)[-1]) {</td></tr>
<tr><td class="h">1243</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;=item&#39; outside of any &#39;=over&#39;&quot;</td></tr>
<tr><td class="h">1246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1247</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras,</td></tr>
<tr><td class="h">1248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;=over&#39;, {&#39;start_line&#39; =&gt; $para-&gt;[1]{&#39;start_line&#39;}}, &#39;&#39;],</td></tr>
<tr><td class="h">1249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para</td></tr>
<tr><td class="h">1250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">1251</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1253</td><td colspan="7"></td></tr><tr><td class="h">1254</td><td colspan="7"></td></tr><tr><td class="h">1255</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $over_type = $over-&gt;[1]{&#39;~type&#39;};</td></tr>
<tr><td class="h">1256</td><td colspan="7"></td></tr><tr><td class="h">1257</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1257">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1257">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1257">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1257">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1257">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(!$over_type) {</td></tr>
<tr><td class="h">1258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Shouldn&#39;t happen1</td></tr>
<tr><td class="h">1259</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Typeless over in stack, starting at line &quot;</td></tr>
<tr><td class="h">1260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $over-&gt;[1]{&#39;start_line&#39;};</td></tr>
<tr><td class="h">1261</td><td colspan="7"></td></tr><tr><td class="h">1262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($over_type eq &#39;block&#39;) {</td></tr>
<tr><td class="h">1263</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1263">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($curr_open-&gt;[-1][1]{&#39;~bitched_about&#39;}) {</td></tr>
<tr><td class="h">1264</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curr_open-&gt;[-1][1]{&#39;~bitched_about&#39;} = 1;</td></tr>
<tr><td class="h">1265</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curr_open-&gt;[-1][1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You can&#39;t have =items (as at line &quot;</td></tr>
<tr><td class="h">1268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $para-&gt;[1]{&#39;start_line&#39;}</td></tr>
<tr><td class="h">1269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;) unless the first thing after the =over is an =item&quot;</td></tr>
<tr><td class="h">1270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Just turn it into a paragraph and reconsider it</td></tr>
<tr><td class="h">1273</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[0] = &#39;~Para&#39;;</td></tr>
<tr><td class="h">1274</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unshift @$paras, $para;</td></tr>
<tr><td class="h">1275</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1276</td><td colspan="7"></td></tr><tr><td class="h">1277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($over_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">1278</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">1279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">1280</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">1281</td><td colspan="7"></td></tr><tr><td class="h">1282</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1282">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1282">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1282">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">1283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Nothing special needs doing for &#39;text&#39;</td></tr>
<tr><td class="h">1284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;number&#39; or $item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">1285</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected text after =item, not a $item_type&quot;</td></tr>
<tr><td class="h">1288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Undo our clobbering:</td></tr>
<tr><td class="h">1290</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">1291</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $para-&gt;[1]{&#39;number&#39;};</td></tr>
<tr><td class="h">1292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Only a PROPER item-number element is allowed</td></tr>
<tr><td class="h">1293</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to have a number attribute.</td></tr>
<tr><td class="h">1294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1295</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">1296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1297</td><td colspan="7"></td></tr><tr><td class="h">1298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# =item-text thingies don&#39;t need any assimilation, it seems.</td></tr>
<tr><td class="h">1299</td><td colspan="7"></td></tr><tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($over_type eq &#39;number&#39;) {</td></tr>
<tr><td class="h">1301</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">1302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">1303</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">1304</td><td colspan="7"></td></tr><tr><td class="h">1305</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $expected_value = ++ $curr_open-&gt;[-1][1]{&#39;~counter&#39;};</td></tr>
<tr><td class="h">1306</td><td colspan="7"></td></tr><tr><td class="h">1307</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1307">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1307">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1307">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1307">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">1308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hm, it&#39;s not numeric.&nbsp;&nbsp;Correct for this.</td></tr>
<tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;</td></tr>
<tr><td class="h">1310</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">1313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1314</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">1315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# restore the bullet, blocking the assimilation of next para</td></tr>
<tr><td class="h">1316</td><td colspan="7"></td></tr><tr><td class="h">1317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">1318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hm, it&#39;s not numeric.&nbsp;&nbsp;Correct for this.</td></tr>
<tr><td class="h">1319</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;</td></tr>
<tr><td class="h">1320</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">1323</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1324</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Text content will still be there and will block next ~Para</td></tr>
<tr><td class="h">1325</td><td colspan="7"></td></tr><tr><td class="h">1326</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type ne &#39;number&#39;) {</td></tr>
<tr><td class="h">1327</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unknown item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">1328</td><td colspan="7"></td></tr><tr><td class="h">1329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($expected_value == $para-&gt;[1]{&#39;number&#39;}) {</td></tr>
<tr><td class="h">1330</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Numeric item has the expected value of $expected_value\n&quot;;</td></tr>
<tr><td class="h">1331</td><td colspan="7"></td></tr><tr><td class="h">1332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1333</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot; Numeric item has &quot;, $para-&gt;[1]{&#39;number&#39;},</td></tr>
<tr><td class="h">1334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; instead of the expected value of $expected_value\n&quot;;</td></tr>
<tr><td class="h">1335</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;You have &#39;=item &quot; . $para-&gt;[1]{&#39;number&#39;} .</td></tr>
<tr><td class="h">1338</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39; instead of the expected &#39;=item $expected_value&#39;&quot;</td></tr>
<tr><td class="h">1339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1340</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;number&#39;} = $expected_value;&nbsp;&nbsp;# correcting!!</td></tr>
<tr><td class="h">1341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1342</td><td colspan="7"></td></tr><tr><td class="h">1343</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1343">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@$para == 2) {</td></tr>
<tr><td class="h">1344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For the cases where we /didn&#39;t/ push to @$para</td></tr>
<tr><td class="h">1345</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1345">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($paras-&gt;[0][0] eq &#39;~Para&#39;) {</td></tr>
<tr><td class="h">1346</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Assimilating following ~Para content into $over_type item\n&quot;;</td></tr>
<tr><td class="h">1347</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, splice @{shift @$paras},2;</td></tr>
<tr><td class="h">1348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1349</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Can&#39;t assimilate following &quot;, $paras-&gt;[0][0], &quot;\n&quot;;</td></tr>
<tr><td class="h">1350</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, &#39;&#39;;&nbsp;&nbsp;# Just so it&#39;s not contentless</td></tr>
<tr><td class="h">1351</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1352</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1353</td><td colspan="7"></td></tr><tr><td class="h">1354</td><td colspan="7"></td></tr><tr><td class="h">1355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif($over_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">1356</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $item_type = $self-&gt;_get_item_type($para);</td></tr>
<tr><td class="h">1357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# That kills the content of the item if it&#39;s a number or bullet.</td></tr>
<tr><td class="h">1358</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot; Item is of type &quot;, $para-&gt;[0], &quot; under $over_type\n&quot;;</td></tr>
<tr><td class="h">1359</td><td colspan="7"></td></tr><tr><td class="h">1360</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1360">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1360">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1360">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($item_type eq &#39;bullet&#39;) {</td></tr>
<tr><td class="h">1361</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# as expected!</td></tr>
<tr><td class="h">1362</td><td colspan="7"></td></tr><tr><td class="h">1363</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1363">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $para-&gt;[1]{&#39;~_freaky_para_hack&#39;} ) {</td></tr>
<tr><td class="h">1364</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Accomodating &#39;=item * Foo&#39; tolerance hack.\n&quot;;</td></tr>
<tr><td class="h">1365</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, delete $para-&gt;[1]{&#39;~_freaky_para_hack&#39;};</td></tr>
<tr><td class="h">1366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1367</td><td colspan="7"></td></tr><tr><td class="h">1368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;number&#39;) {</td></tr>
<tr><td class="h">1369</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item *&#39;&quot;</td></tr>
<tr><td class="h">1372</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1373</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, $para-&gt;[1]{&#39;~orig_content&#39;};</td></tr>
<tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and block assimilation of the next paragraph</td></tr>
<tr><td class="h">1375</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $para-&gt;[1]{&#39;number&#39;};</td></tr>
<tr><td class="h">1376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Only a PROPER item-number element is allowed</td></tr>
<tr><td class="h">1377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;to have a number attribute.</td></tr>
<tr><td class="h">1378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($item_type eq &#39;text&#39;) {</td></tr>
<tr><td class="h">1379</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;},</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Expected &#39;=item *&#39;&quot;</td></tr>
<tr><td class="h">1382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# But doesn&#39;t need processing.&nbsp;&nbsp;But it&#39;ll block assimilation</td></tr>
<tr><td class="h">1384</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;of the next para.</td></tr>
<tr><td class="h">1385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled item type $item_type&quot;; # should never happen</td></tr>
<tr><td class="h">1387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1388</td><td colspan="7"></td></tr><tr><td class="h">1389</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1389">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@$para == 2) {</td></tr>
<tr><td class="h">1390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For the cases where we /didn&#39;t/ push to @$para</td></tr>
<tr><td class="h">1391</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1391">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($paras-&gt;[0][0] eq &#39;~Para&#39;) {</td></tr>
<tr><td class="h">1392</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Assimilating following ~Para content into $over_type item\n&quot;;</td></tr>
<tr><td class="h">1393</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, splice @{shift @$paras},2;</td></tr>
<tr><td class="h">1394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1395</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Can&#39;t assimilate following &quot;, $paras-&gt;[0][0], &quot;\n&quot;;</td></tr>
<tr><td class="h">1396</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$para, &#39;&#39;;&nbsp;&nbsp;# Just so it&#39;s not contentless</td></tr>
<tr><td class="h">1397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1399</td><td colspan="7"></td></tr><tr><td class="h">1400</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1401</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unhandled =over type \&quot;$over_type\&quot;?&quot;;</td></tr>
<tr><td class="h">1402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Shouldn&#39;t happen!</td></tr>
<tr><td class="h">1403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1404</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[0] .= &#39;-&#39; . $over_type;</td></tr>
<tr><td class="h">1405</td><td colspan="7"></td></tr><tr><td class="h">1406</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1408</td><td colspan="7"></td></tr><tr><td class="h">1409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_Plain {</td></tr>
<tr><td class="h">1410</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1410">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para) = @_;</td></tr>
<tr><td class="h">1411</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot; giving plain treatment...\n&quot;;</td></tr>
<tr><td class="h">1412</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1412">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1412">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless( @$para == 2 or ( @$para == 3 and $para-&gt;[2] eq &#39;&#39; )</td></tr>
<tr><td class="h">1413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;or $para-&gt;[1]{&#39;~cooked&#39;}</td></tr>
<tr><td class="h">1414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1415</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @$para,</td></tr>
<tr><td class="h">1416</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@{$self-&gt;_make_treelet(</td></tr>
<tr><td class="h">1417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join(&quot;\n&quot;, splice(@$para, 2)),</td></tr>
<tr><td class="h">1418</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;}</td></tr>
<tr><td class="h">1419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)};</td></tr>
<tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Empty paragraphs don&#39;t need a treelet for any reason I can see.</td></tr>
<tr><td class="h">1422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# And precooked paragraphs already have a treelet.</td></tr>
<tr><td class="h">1423</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1425</td><td colspan="7"></td></tr><tr><td class="h">1426</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_Verbatim {</td></tr>
<tr><td class="h">1427</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1427">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para) = @_;</td></tr>
<tr><td class="h">1428</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot; giving verbatim treatment...\n&quot;;</td></tr>
<tr><td class="h">1429</td><td colspan="7"></td></tr><tr><td class="h">1430</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;xml:space&#39;} = &#39;preserve&#39;;</td></tr>
<tr><td class="h">1431</td><td colspan="7"></td></tr><tr><td class="h">1432</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $indent = $self-&gt;strip_verbatim_indent;</td></tr>
<tr><td class="h">1433</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1433">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1433">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if ($indent &amp;&amp; ref $indent eq &#39;CODE&#39;) {</td></tr>
<tr><td class="h">1434</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @shifted = (shift @{$para}, shift @{$para});</td></tr>
<tr><td class="h">1435</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent = $indent-&gt;($para);</td></tr>
<tr><td class="h">1436</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @{$para}, @shifted;</td></tr>
<tr><td class="h">1437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1438</td><td colspan="7"></td></tr><tr><td class="h">1439</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for(my $i = 2; $i &lt; @$para; $i++) {</td></tr>
<tr><td class="h">1440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $line ($para-&gt;[$i]) { # just for aliasing</td></tr>
<tr><td class="h">1441</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Strip indentation.</td></tr>
<tr><td class="h">1442</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1442">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1442">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1442">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ s/^\Q$indent// if $indent</td></tr>
<tr><td class="h">1443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !($self-&gt;{accept_codes} &amp;&amp; $self-&gt;{accept_codes}{VerbatimFormatted});</td></tr>
<tr><td class="h">1444</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $line =~</td></tr>
<tr><td class="h">1445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Sort of adapted from Text::Tabs -- yes, it&#39;s hardwired in that</td></tr>
<tr><td class="h">1446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# tabs are at every EIGHTH column.&nbsp;&nbsp;For portability, it has to be</td></tr>
<tr><td class="h">1447</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# one setting everywhere, and 8th wins.</td></tr>
<tr><td class="h">1448</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s/^([^\t]*)(\t+)/$1.(&quot; &quot; x ((length($2)&lt;&lt;3)-(length($1)&amp;7)))/e</td></tr>
<tr><td class="h">1449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) {}</td></tr>
<tr><td class="h">1450</td><td colspan="7"></td></tr><tr><td class="h">1451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO: whinge about (or otherwise treat) unindented or overlong lines</td></tr>
<tr><td class="h">1452</td><td colspan="7"></td></tr><tr><td class="h">1453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1455</td><td colspan="7"></td></tr><tr><td class="h">1456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Now the VerbatimFormatted hoodoo...</td></tr>
<tr><td class="h">1457</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1457">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1457">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1457">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if( $self-&gt;{&#39;accept_codes&#39;} and</td></tr>
<tr><td class="h">1458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{&#39;accept_codes&#39;}{&#39;VerbatimFormatted&#39;}</td></tr>
<tr><td class="h">1459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1460</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1460">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while(@$para &gt; 3 and $para-&gt;[-1] !~ m/\S/) { pop @$para }</td></tr>
<tr><td class="h">1461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Kill any number of terminal newlines</td></tr>
<tr><td class="h">1462</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbatim_format($para);</td></tr>
<tr><td class="h">1463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} elsif ($self-&gt;{&#39;codes_in_verbatim&#39;}) {</td></tr>
<tr><td class="h">1464</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @$para,</td></tr>
<tr><td class="h">1465</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@{$self-&gt;_make_treelet(</td></tr>
<tr><td class="h">1466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join(&quot;\n&quot;, splice(@$para, 2)),</td></tr>
<tr><td class="h">1467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[1]{&#39;start_line&#39;}, $para-&gt;[1]{&#39;xml:space&#39;}</td></tr>
<tr><td class="h">1468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)};</td></tr>
<tr><td class="h">1469</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[-1] =~ s/\n+$//s; # Kill any number of terminal newlines</td></tr>
<tr><td class="h">1470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1471</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1471">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @$para, join &quot;\n&quot;, splice(@$para, 2) if @$para &gt; 3;</td></tr>
<tr><td class="h">1472</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para-&gt;[-1] =~ s/\n+$//s; # Kill any number of terminal newlines</td></tr>
<tr><td class="h">1473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1474</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1476</td><td colspan="7"></td></tr><tr><td class="h">1477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ponder_Data {</td></tr>
<tr><td class="h">1478</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1478">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my ($self,$para) = @_;</td></tr>
<tr><td class="h">1479</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG and print &quot; giving data treatment...\n&quot;;</td></tr>
<tr><td class="h">1480</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$para-&gt;[1]{&#39;xml:space&#39;} = &#39;preserve&#39;;</td></tr>
<tr><td class="h">1481</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1481">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;push @$para, join &quot;\n&quot;, splice(@$para, 2) if @$para &gt; 3;</td></tr>
<tr><td class="h">1482</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1484</td><td colspan="7"></td></tr><tr><td class="h">1485</td><td colspan="7"></td></tr><tr><td class="h">1486</td><td colspan="7"></td></tr><tr><td class="h">1487</td><td colspan="7"></td></tr><tr><td class="h">1488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###########################################################################</td></tr>
<tr><td class="h">1489</td><td colspan="7"></td></tr><tr><td class="h">1490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _traverse_treelet_bit {&nbsp;&nbsp;# for use only by the routine above</td></tr>
<tr><td class="h">1491</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1491">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($self, $name) = splice @_,0,2;</td></tr>
<tr><td class="h">1492</td><td colspan="7"></td></tr><tr><td class="h">1493</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $scratch;</td></tr>
<tr><td class="h">1494</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;_handle_element_start(($scratch=$name), shift @_);</td></tr>
<tr><td class="h">1495</td><td colspan="7"></td></tr><tr><td class="h">1496</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;while (@_) {</td></tr>
<tr><td class="h">1497</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $x = shift;</td></tr>
<tr><td class="h">1498</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1498">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (ref($x)) {</td></tr>
<tr><td class="h">1499</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;_traverse_treelet_bit($self, @$x);</td></tr>
<tr><td class="h">1500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1501</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1501">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x .= shift while @_ &amp;&amp; !ref($_[0]);</td></tr>
<tr><td class="h">1502</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_handle_text($x);</td></tr>
<tr><td class="h">1503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1504</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1505</td><td colspan="7"></td></tr><tr><td class="h">1506</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$self-&gt;_handle_element_end($scratch=$name);</td></tr>
<tr><td class="h">1507</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1509</td><td colspan="7"></td></tr><tr><td class="h">1510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">1511</td><td colspan="7"></td></tr><tr><td class="h">1512</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _closers_for_all_curr_open {</td></tr>
<tr><td class="h">1513</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1513">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $self = $_[0];</td></tr>
<tr><td class="h">1514</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my @closers;</td></tr>
<tr><td class="h">1515</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1515">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;foreach my $still_open (@{&nbsp;&nbsp;$self-&gt;{&#39;curr_open&#39;} || return&nbsp;&nbsp;}) {</td></tr>
<tr><td class="h">1516</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @copy = @$still_open;</td></tr>
<tr><td class="h">1517</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$copy[1] = {%{ $copy[1] }};</td></tr>
<tr><td class="h">1518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#$copy[1]{&#39;start_line&#39;} = -1;</td></tr>
<tr><td class="h">1519</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1519">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1519">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($copy[0] eq &#39;=for&#39;) {</td></tr>
<tr><td class="h">1520</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy[0] = &#39;=end&#39;;</td></tr>
<tr><td class="h">1521</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif($copy[0] eq &#39;=over&#39;) {</td></tr>
<tr><td class="h">1522</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine(</td></tr>
<tr><td class="h">1523</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$still_open-&gt;[1]{start_line} ,</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;=over without closing =back&quot;</td></tr>
<tr><td class="h">1525</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1526</td><td colspan="7"></td></tr><tr><td class="h">1527</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy[0] = &#39;=back&#39;;</td></tr>
<tr><td class="h">1528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1529</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;I don&#39;t know how to auto-close an open $copy[0] region&quot;;</td></tr>
<tr><td class="h">1530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1531</td><td colspan="7"></td></tr><tr><td class="h">1532</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1532">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( @copy &gt; 2 ) {</td></tr>
<tr><td class="h">1533</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @copy, $copy[1]{&#39;target&#39;};</td></tr>
<tr><td class="h">1534</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1534">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy[-1] = &#39;&#39; unless defined $copy[-1];</td></tr>
<tr><td class="h">1535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# since =over&#39;s don&#39;t have targets</td></tr>
<tr><td class="h">1536</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1537</td><td colspan="7"></td></tr><tr><td class="h">1538</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$copy[1]{&#39;fake-closer&#39;} = 1;</td></tr>
<tr><td class="h">1539</td><td colspan="7"></td></tr><tr><td class="h">1540</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;Queuing up fake-o event: &quot;, pretty(\@copy), &quot;\n&quot;;</td></tr>
<tr><td class="h">1541</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unshift @closers, \@copy;</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1543</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return @closers;</td></tr>
<tr><td class="h">1544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1545</td><td colspan="7"></td></tr><tr><td class="h">1546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#--------------------------------------------------------------------------</td></tr>
<tr><td class="h">1547</td><td colspan="7"></td></tr><tr><td class="h">1548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _verbatim_format {</td></tr>
<tr><td class="h">1549</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1549">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($it, $p) = @_;</td></tr>
<tr><td class="h">1550</td><td colspan="7"></td></tr><tr><td class="h">1551</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $formatting;</td></tr>
<tr><td class="h">1552</td><td colspan="7"></td></tr><tr><td class="h">1553</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for(my $i = 2; $i &lt; @$p; $i++) { # work backwards over the lines</td></tr>
<tr><td class="h">1554</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;_verbatim_format appends a newline to $i: $p-&gt;[$i]\n&quot;;</td></tr>
<tr><td class="h">1555</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;[$i] .= &quot;\n&quot;;</td></tr>
<tr><td class="h">1556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Unlike with simple Verbatim blocks, we don&#39;t end up just doing</td></tr>
<tr><td class="h">1557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a join(&quot;\n&quot;, ...) on the contents, so we have to append a</td></tr>
<tr><td class="h">1558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# newline to ever line, and then nix the last one later.</td></tr>
<tr><td class="h">1559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1560</td><td colspan="7"></td></tr><tr><td class="h">1561</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if( DEBUG &gt; 4 ) {</td></tr>
<tr><td class="h">1562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&lt;&lt;\n&quot;;</td></tr>
<tr><td class="h">1563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for(my $i = $#$p; $i &gt;= 2; $i--) { # work backwards over the lines</td></tr>
<tr><td class="h">1564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;_verbatim_format $i: $p-&gt;[$i]&quot;;</td></tr>
<tr><td class="h">1565</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print &quot;&gt;&gt;\n&quot;;</td></tr>
<tr><td class="h">1567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1568</td><td colspan="7"></td></tr><tr><td class="h">1569</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for(my $i = $#$p; $i &gt; 2; $i--) {</td></tr>
<tr><td class="h">1570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# work backwards over the lines, except the first (#2)</td></tr>
<tr><td class="h">1571</td><td colspan="7"></td></tr><tr><td class="h">1572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#next unless $p-&gt;[$i]&nbsp;&nbsp;&nbsp;=~ m{^#:([ \^\/\%]*)\n?$}s</td></tr>
<tr><td class="h">1573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $p-&gt;[$i-1] !~ m{^#:[ \^\/\%]*\n?$}s;</td></tr>
<tr><td class="h">1574</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# look at a formatty line preceding a nonformatty one</td></tr>
<tr><td class="h">1575</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;Scrutinizing line $i: $$p[$i]\n&quot;;</td></tr>
<tr><td class="h">1576</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1576">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($p-&gt;[$i]&nbsp;&nbsp;&nbsp;=~ m{^#:([ \^\/\%]*)\n?$}s) {</td></tr>
<tr><td class="h">1577</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;&nbsp;&nbsp;It&#39;s a formatty line.&nbsp;&nbsp;&quot;,</td></tr>
<tr><td class="h">1578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Peeking at previous line &quot;, $i-1, &quot;: $$p[$i-1]: \n&quot;;</td></tr>
<tr><td class="h">1579</td><td colspan="7"></td></tr><tr><td class="h">1580</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1580">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $p-&gt;[$i-1] =~ m{^#:[ \^\/\%]*\n?$}s ) {</td></tr>
<tr><td class="h">1581</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;&nbsp;&nbsp;Previous line is formatty!&nbsp;&nbsp;Skipping this one.\n&quot;;</td></tr>
<tr><td class="h">1582</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1584</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;&nbsp;&nbsp;Previous line is non-formatty!&nbsp;&nbsp;Yay!\n&quot;;</td></tr>
<tr><td class="h">1585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1587</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;&nbsp;&nbsp;It&#39;s not a formatty line.&nbsp;&nbsp;Ignoring\n&quot;;</td></tr>
<tr><td class="h">1588</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1590</td><td colspan="7"></td></tr><tr><td class="h">1591</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# A formatty line has to have #: in the first two columns, and uses</td></tr>
<tr><td class="h">1592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# &quot;^&quot; to mean bold, &quot;/&quot; to mean underline, and &quot;%&quot; to mean bold italic.</td></tr>
<tr><td class="h">1593</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Example:</td></tr>
<tr><td class="h">1594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;What do you want?&nbsp;&nbsp;i like pie. [or whatever]</td></tr>
<tr><td class="h">1595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# #:^^^^^^^^^^^^^^^^^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/////////////&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">1596</td><td colspan="7"></td></tr><tr><td class="h">1597</td><td colspan="7"></td></tr><tr><td class="h">1598</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;_verbatim_format considers:\n&lt;$p-&gt;[$i-1]&gt;\n&lt;$p-&gt;[$i]&gt;\n&quot;;</td></tr>
<tr><td class="h">1599</td><td colspan="7"></td></tr><tr><td class="h">1600</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$formatting = &#39;&nbsp;&nbsp;&#39; . $1;</td></tr>
<tr><td class="h">1601</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$formatting =~ s/\s+$//s; # nix trailing whitespace</td></tr>
<tr><td class="h">1602</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1602">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1602">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless(length $formatting and $p-&gt;[$i-1] =~ m/\S/) { # no-op</td></tr>
<tr><td class="h">1603</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$p,$i,1; # remove this line</td></tr>
<tr><td class="h">1604</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i--; # don&#39;t consider next line</td></tr>
<tr><td class="h">1605</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1607</td><td colspan="7"></td></tr><tr><td class="h">1608</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1608">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( length($formatting) &gt;= length($p-&gt;[$i-1]) ) {</td></tr>
<tr><td class="h">1609</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$formatting = substr($formatting, 0, length($p-&gt;[$i-1]) - 1) . &#39; &#39;;</td></tr>
<tr><td class="h">1610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1611</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$formatting .= &#39; &#39; x (length($p-&gt;[$i-1]) - length($formatting));</td></tr>
<tr><td class="h">1612</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1613</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make $formatting and the previous line be exactly the same length,</td></tr>
<tr><td class="h">1614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# with $formatting having a &quot; &quot; as the last character.</td></tr>
<tr><td class="h">1615</td><td colspan="7"></td></tr><tr><td class="h">1616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;Formatting &lt;$formatting&gt;&nbsp;&nbsp;&nbsp;&nbsp;on &lt;&quot;, $p-&gt;[$i-1], &quot;&gt;\n&quot;;</td></tr>
<tr><td class="h">1617</td><td colspan="7"></td></tr><tr><td class="h">1618</td><td colspan="7"></td></tr><tr><td class="h">1619</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @new_line;</td></tr>
<tr><td class="h">1620</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $formatting =~ m{\G(( +)|(\^+)|(\/+)|(\%+))}g ) {</td></tr>
<tr><td class="h">1621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print &quot;Format matches $1\n&quot;;</td></tr>
<tr><td class="h">1622</td><td colspan="7"></td></tr><tr><td class="h">1623</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1623">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($2) {</td></tr>
<tr><td class="h">1624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print &quot;SKIPPING &lt;$2&gt;\n&quot;;</td></tr>
<tr><td class="h">1625</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @new_line,</td></tr>
<tr><td class="h">1626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substr($p-&gt;[$i-1], pos($formatting)-length($1), length($1));</td></tr>
<tr><td class="h">1627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1628</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print &quot;SNARING $+\n&quot;;</td></tr>
<tr><td class="h">1629</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1629">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1629">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1629">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @new_line, [</td></tr>
<tr><td class="h">1630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</td></tr>
<tr><td class="h">1631</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$3 ? &#39;VerbatimB&#39;&nbsp;&nbsp;:</td></tr>
<tr><td class="h">1632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$4 ? &#39;VerbatimI&#39;&nbsp;&nbsp;:</td></tr>
<tr><td class="h">1633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$5 ? &#39;VerbatimBI&#39; : die(&quot;Should never get called&quot;)</td></tr>
<tr><td class="h">1634</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;), {},</td></tr>
<tr><td class="h">1635</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substr($p-&gt;[$i-1], pos($formatting)-length($1), length($1))</td></tr>
<tr><td class="h">1636</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];</td></tr>
<tr><td class="h">1637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print &quot;Formatting &lt;$new_line[-1][-1]&gt; as $new_line[-1][0]\n&quot;;</td></tr>
<tr><td class="h">1638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1639</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1640</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @nixed =&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">1641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice @$p, $i-1, 2, @new_line; # replace myself and the next line</td></tr>
<tr><td class="h">1642</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 10 and print &quot;Nixed count: &quot;, scalar(@nixed), &quot;\n&quot;;</td></tr>
<tr><td class="h">1643</td><td colspan="7"></td></tr><tr><td class="h">1644</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 6 and print &quot;New version of the above line is these tokens (&quot;,</td></tr>
<tr><td class="h">1645</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scalar(@new_line), &quot;):&quot;,</td></tr>
<tr><td class="h">1646</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map( ref($_)?&quot;&lt;@$_&gt; &quot;:&quot;&lt;$_&gt;&quot;, @new_line ), &quot;\n&quot;;</td></tr>
<tr><td class="h">1647</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$i--; # So the next line we scrutinize is the line before the one</td></tr>
<tr><td class="h">1648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;that we just went and formatted</td></tr>
<tr><td class="h">1649</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1650</td><td colspan="7"></td></tr><tr><td class="h">1651</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$p-&gt;[0] = &#39;VerbatimFormatted&#39;;</td></tr>
<tr><td class="h">1652</td><td colspan="7"></td></tr><tr><td class="h">1653</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Collapse adjacent text nodes, just for kicks.</td></tr>
<tr><td class="h">1654</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for( my $i = 2; $i &gt; $#$p; $i++ ) { # work forwards over the tokens except for the last</td></tr>
<tr><td class="h">1655</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1655">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1655">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !ref($p-&gt;[$i]) and !ref($p-&gt;[$i + 1]) ) {</td></tr>
<tr><td class="h">1656</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;_verbatim_format merges {$p-&gt;[$i]} and {$p-&gt;[$i+1]}\n&quot;;</td></tr>
<tr><td class="h">1657</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;[$i] .= splice @$p, $i+1, 1; # merge</td></tr>
<tr><td class="h">1658</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$i;&nbsp;&nbsp;# and back up</td></tr>
<tr><td class="h">1659</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1660</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1661</td><td colspan="7"></td></tr><tr><td class="h">1662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Now look for the last text token, and remove the terminal newline</td></tr>
<tr><td class="h">1663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for( my $i = $#$p; $i &gt;= 2; $i-- ) {</td></tr>
<tr><td class="h">1664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# work backwards over the tokens, even the first</td></tr>
<tr><td class="h">1665</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1665">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !ref($p-&gt;[$i]) ) {</td></tr>
<tr><td class="h">1666</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1666">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($p-&gt;[$i] =~ s/\n$//s) {</td></tr>
<tr><td class="h">1667</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print &quot;_verbatim_format killed the terminal newline on #$i: {$p-&gt;[$i]}, after {$p-&gt;[$i-1]}\n&quot;;</td></tr>
<tr><td class="h">1668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1669</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 5 and print</td></tr>
<tr><td class="h">1670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;No terminal newline on #$i: {$p-&gt;[$i]}, after {$p-&gt;[$i-1]} !?\n&quot;;</td></tr>
<tr><td class="h">1671</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1672</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last; # we only want the next one</td></tr>
<tr><td class="h">1673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1675</td><td colspan="7"></td></tr><tr><td class="h">1676</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1678</td><td colspan="7"></td></tr><tr><td class="h">1679</td><td colspan="7"></td></tr><tr><td class="h">1680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">1681</td><td colspan="7"></td></tr><tr><td class="h">1682</td><td colspan="7"></td></tr><tr><td class="h">1683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _treelet_from_formatting_codes {</td></tr>
<tr><td class="h">1684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Given a paragraph, returns a treelet.&nbsp;&nbsp;Full of scary tokenizing code.</td></tr>
<tr><td class="h">1685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;Like [ &#39;~Top&#39;, {&#39;start_line&#39; =&gt; $start_line},</td></tr>
<tr><td class="h">1686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;I like &quot;,</td></tr>
<tr><td class="h">1687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ &#39;B&#39;, {}, &quot;pie&quot; ],</td></tr>
<tr><td class="h">1688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;!&quot;</td></tr>
<tr><td class="h">1689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</td></tr>
<tr><td class="h">1690</td><td colspan="7"></td></tr><tr><td class="h">1691</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1691">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($self, $para, $start_line, $preserve_space) = @_;</td></tr>
<tr><td class="h">1692</td><td colspan="7"></td></tr><tr><td class="h">1693</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $treelet = [&#39;~Top&#39;, {&#39;start_line&#39; =&gt; $start_line},];</td></tr>
<tr><td class="h">1694</td><td colspan="7"></td></tr><tr><td class="h">1695</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1695">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1695">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;unless ($preserve_space || $self-&gt;{&#39;preserve_whitespace&#39;}) {</td></tr>
<tr><td class="h">1696</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para =~ s/\s+/ /g; # collapse and trim all whitespace first.</td></tr>
<tr><td class="h">1697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para =~ s/ $//;</td></tr>
<tr><td class="h">1698</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$para =~ s/^ //;</td></tr>
<tr><td class="h">1699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1700</td><td colspan="7"></td></tr><tr><td class="h">1701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Only apparent problem the above code is that N&lt;&lt;&nbsp;&nbsp;&gt;&gt; turns into</td></tr>
<tr><td class="h">1702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# N&lt;&lt; &gt;&gt;.&nbsp;&nbsp;But then, word wrapping does that too!&nbsp;&nbsp;So don&#39;t do that!</td></tr>
<tr><td class="h">1703</td><td colspan="7"></td></tr><tr><td class="h">1704</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my @stack;</td></tr>
<tr><td class="h">1705</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my @lineage = ($treelet);</td></tr>
<tr><td class="h">1706</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $raw = &#39;&#39;; # raw content of L&lt;&gt; fcode before splitting/processing</td></tr>
<tr><td class="h">1707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# XXX &#39;raw&#39; is not 100% accurate: all surrounding whitespace is condensed</td></tr>
<tr><td class="h">1708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# into just 1 &#39; &#39;. Is this the regex&#39;s doing or &#39;raw&#39;s?</td></tr>
<tr><td class="h">1709</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $inL = 0;</td></tr>
<tr><td class="h">1710</td><td colspan="7"></td></tr><tr><td class="h">1711</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;Paragraph:\n$para\n\n&quot;;</td></tr>
<tr><td class="h">1712</td><td colspan="7"></td></tr><tr><td class="h">1713</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Here begins our frightening tokenizer RE.&nbsp;&nbsp;The following regex matches</td></tr>
<tr><td class="h">1714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# text in four main parts:</td></tr>
<tr><td class="h">1715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1716</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;* Start-codes.&nbsp;&nbsp;The first alternative matches C&lt; or C&lt;&lt;, the latter</td></tr>
<tr><td class="h">1717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;followed by some whitespace.&nbsp;&nbsp;$1 will hold the entire start code</td></tr>
<tr><td class="h">1718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;(including any space following a multiple-angle-bracket delimiter),</td></tr>
<tr><td class="h">1719</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;and $2 will hold only the additional brackets past the first in a</td></tr>
<tr><td class="h">1720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;multiple-bracket delimiter.&nbsp;&nbsp;length($2) + 1 will be the number of</td></tr>
<tr><td class="h">1721</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;closing brackets we have to find.</td></tr>
<tr><td class="h">1722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1723</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;* Closing brackets.&nbsp;&nbsp;Match some amount of whitespace followed by</td></tr>
<tr><td class="h">1724</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;multiple close brackets.&nbsp;&nbsp;The logic to see if this closes anything</td></tr>
<tr><td class="h">1725</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;is down below.&nbsp;&nbsp;Note that in order to parse C&lt;&lt;&nbsp;&nbsp;&gt;&gt; correctly, we</td></tr>
<tr><td class="h">1726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;have to use look-behind (?&lt;=\s\s), since the match of the starting</td></tr>
<tr><td class="h">1727</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;code will have consumed the whitespace.</td></tr>
<tr><td class="h">1728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;* A single closing bracket, to close a simple code like C&lt;&gt;.</td></tr>
<tr><td class="h">1730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1731</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;* Something that isn&#39;t a start or end code.&nbsp;&nbsp;We have to be careful</td></tr>
<tr><td class="h">1732</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;about accepting whitespace, since perlpodspec says that any whitespace</td></tr>
<tr><td class="h">1733</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;before a multiple-bracket closing delimiter should be ignored.</td></tr>
<tr><td class="h">1734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1735</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;while($para =~</td></tr>
<tr><td class="h">1736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;m/\G</td></tr>
<tr><td class="h">1737</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(?:</td></tr>
<tr><td class="h">1738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Match starting codes, including the whitespace following a</td></tr>
<tr><td class="h">1739</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# multiple-delimiter start code.&nbsp;&nbsp;$1 gets the whole start code and</td></tr>
<tr><td class="h">1740</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $2 gets all but one of the &lt;s in the multiple-bracket case.</td></tr>
<tr><td class="h">1741</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;([A-Z]&lt;(?:(&lt;+)\s+)?)</td></tr>
<tr><td class="h">1742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1743</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Match multiple-bracket end codes.&nbsp;&nbsp;$3 gets the whitespace that</td></tr>
<tr><td class="h">1744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# should be discarded before an end bracket but kept in other cases</td></tr>
<tr><td class="h">1745</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and $4 gets the end brackets themselves.</td></tr>
<tr><td class="h">1746</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\s+|(?&lt;=\s\s))(&gt;{2,})</td></tr>
<tr><td class="h">1747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\s?&gt;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $5: simple end-codes</td></tr>
<tr><td class="h">1749</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $6: stuff containing no start-codes or end-codes</td></tr>
<tr><td class="h">1751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(?:</td></tr>
<tr><td class="h">1752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[^A-Z\s&gt;]</td></tr>
<tr><td class="h">1753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1754</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(?:</td></tr>
<tr><td class="h">1755</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[A-Z](?!&lt;)</td></tr>
<tr><td class="h">1756</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1757</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# whitespace is ok, but we don&#39;t want to eat the whitespace before</td></tr>
<tr><td class="h">1759</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a multiple-bracket end code.</td></tr>
<tr><td class="h">1760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# NOTE: we may still have problems with e.g. S&lt;&lt;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;</td></tr>
<tr><td class="h">1761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(?:</td></tr>
<tr><td class="h">1762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s(?!\s*&gt;{2,})</td></tr>
<tr><td class="h">1763</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)+</td></tr>
<tr><td class="h">1765</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;/xgo</td></tr>
<tr><td class="h">1768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;) {</td></tr>
<tr><td class="h">1769</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot;\nParagraphic tokenstack = (@stack)\n&quot;;</td></tr>
<tr><td class="h">1770</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1770">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1770">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1770">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1770">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(defined $1) {</td></tr>
<tr><td class="h">1771</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1771">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(defined $2) {</td></tr>
<tr><td class="h">1772</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Found complex start-text code \&quot;$1\&quot;\n&quot;;</td></tr>
<tr><td class="h">1773</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @stack, length($2) + 1; </td></tr>
<tr><td class="h">1774</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# length of the necessary complex end-code string</td></tr>
<tr><td class="h">1775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1776</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Found simple start-text code \&quot;$1\&quot;\n&quot;;</td></tr>
<tr><td class="h">1777</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @stack, 0;&nbsp;&nbsp;# signal that we&#39;re looking for simple</td></tr>
<tr><td class="h">1778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1779</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @lineage, [ substr($1,0,1), {}, ];&nbsp;&nbsp;# new node object</td></tr>
<tr><td class="h">1780</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-2] }, $lineage[-1];</td></tr>
<tr><td class="h">1781</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1781">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (&#39;L&#39; eq substr($1,0,1)) {</td></tr>
<tr><td class="h">1782</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1782">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$raw = $inL ? $raw.$1 : &#39;&#39;; # reset raw content accumulator</td></tr>
<tr><td class="h">1783</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inL = 1;</td></tr>
<tr><td class="h">1784</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1785</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1785">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$raw .= $1 if $inL;</td></tr>
<tr><td class="h">1786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1787</td><td colspan="7"></td></tr><tr><td class="h">1788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(defined $4) {</td></tr>
<tr><td class="h">1789</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Found apparent complex end-text code \&quot;$3$4\&quot;\n&quot;;</td></tr>
<tr><td class="h">1790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# This is where it gets messy...</td></tr>
<tr><td class="h">1791</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1791">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1791">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1791">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1791">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(! @stack) {</td></tr>
<tr><td class="h">1792</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We saw &quot; &gt;&gt;&gt;&gt;&quot; but needed nothing.&nbsp;&nbsp;This is ALL just stuff then.</td></tr>
<tr><td class="h">1793</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; But it&#39;s really just stuff.\n&quot;;</td></tr>
<tr><td class="h">1794</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, $3, $4;</td></tr>
<tr><td class="h">1795</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1796</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif(!$stack[-1]) {</td></tr>
<tr><td class="h">1797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We saw &quot; &gt;&gt;&gt;&gt;&quot; but needed only &quot;&gt;&quot;.&nbsp;&nbsp;Back pos up.</td></tr>
<tr><td class="h">1798</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; And that&#39;s more than we needed to close simple.\n&quot;;</td></tr>
<tr><td class="h">1799</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, $3; # That was a for-real space, too.</td></tr>
<tr><td class="h">1800</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos($para) = pos($para) - length($4) + 1;</td></tr>
<tr><td class="h">1801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($stack[-1] == length($4)) {</td></tr>
<tr><td class="h">1802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We found &quot; &gt;&gt;&gt;&gt;&quot;, and it was exactly what we needed.&nbsp;&nbsp;Commonest case.</td></tr>
<tr><td class="h">1803</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; And that&#39;s exactly what we needed to close complex.\n&quot;;</td></tr>
<tr><td class="h">1804</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif($stack[-1] &lt; length($4)) {</td></tr>
<tr><td class="h">1805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We saw &quot; &gt;&gt;&gt;&gt;&quot; but needed only &quot; &gt;&gt;&quot;.&nbsp;&nbsp;Back pos up.</td></tr>
<tr><td class="h">1806</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; And that&#39;s more than we needed to close complex.\n&quot;;</td></tr>
<tr><td class="h">1807</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos($para) = pos($para) - length($4) + $stack[-1];</td></tr>
<tr><td class="h">1808</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1809</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We saw &quot; &gt;&gt;&gt;&gt;&quot; but needed &quot; &gt;&gt;&gt;&gt;&gt;&gt;&quot;.&nbsp;&nbsp;So this is all just stuff!</td></tr>
<tr><td class="h">1810</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; But it&#39;s really just stuff, because we needed more.\n&quot;;</td></tr>
<tr><td class="h">1811</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, $3, $4;</td></tr>
<tr><td class="h">1812</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1813</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print &quot;\nHOOBOY &quot;, scalar(@{$lineage[-1]}), &quot;!!!\n&quot;;</td></tr>
<tr><td class="h">1815</td><td colspan="7"></td></tr><tr><td class="h">1816</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1816">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, &#39;&#39; if 2 == @{ $lineage[-1] };</td></tr>
<tr><td class="h">1817</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Keep the element from being childless</td></tr>
<tr><td class="h">1818</td><td colspan="7"></td></tr><tr><td class="h">1819</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @stack;</td></tr>
<tr><td class="h">1820</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @lineage;</td></tr>
<tr><td class="h">1821</td><td colspan="7"></td></tr><tr><td class="h">1822</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1822">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless (@stack) { # not in an L if there are no open fcodes</td></tr>
<tr><td class="h">1823</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inL = 0;</td></tr>
<tr><td class="h">1824</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1824">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1824">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ref $lineage[-1][-1] &amp;&amp; $lineage[-1][-1][0] eq &#39;L&#39;) {</td></tr>
<tr><td class="h">1825</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lineage[-1][-1][1]{&#39;raw&#39;} = $raw</td></tr>
<tr><td class="h">1826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1827</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1828</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1828">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$raw .= $3.$4 if $inL;</td></tr>
<tr><td class="h">1829</td><td colspan="7"></td></tr><tr><td class="h">1830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(defined $5) {</td></tr>
<tr><td class="h">1831</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Found apparent simple end-text code \&quot;$5\&quot;\n&quot;;</td></tr>
<tr><td class="h">1832</td><td colspan="7"></td></tr><tr><td class="h">1833</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1833">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1833">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@stack and ! $stack[-1]) {</td></tr>
<tr><td class="h">1834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We&#39;re indeed expecting a simple end-code</td></tr>
<tr><td class="h">1835</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; It&#39;s indeed an end-code.\n&quot;;</td></tr>
<tr><td class="h">1836</td><td colspan="7"></td></tr><tr><td class="h">1837</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1837">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1837">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(length($5) == 2) { # There was a space there: &quot; &gt;&quot;</td></tr>
<tr><td class="h">1838</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, &#39; &#39;;</td></tr>
<tr><td class="h">1839</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} elsif( 2 == @{ $lineage[-1] } ) { # Closing a childless element</td></tr>
<tr><td class="h">1840</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, &#39;&#39;; # keep it from being really childless</td></tr>
<tr><td class="h">1841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1842</td><td colspan="7"></td></tr><tr><td class="h">1843</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @stack;</td></tr>
<tr><td class="h">1844</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @lineage;</td></tr>
<tr><td class="h">1845</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1846</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 4 and print &quot; It&#39;s just stuff.\n&quot;;</td></tr>
<tr><td class="h">1847</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, $5;</td></tr>
<tr><td class="h">1848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1849</td><td colspan="7"></td></tr><tr><td class="h">1850</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1850">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless (@stack) { # not in an L if there are no open fcodes</td></tr>
<tr><td class="h">1851</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inL = 0;</td></tr>
<tr><td class="h">1852</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1852">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1852">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ref $lineage[-1][-1] &amp;&amp; $lineage[-1][-1][0] eq &#39;L&#39;) {</td></tr>
<tr><td class="h">1853</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lineage[-1][-1][1]{&#39;raw&#39;} = $raw</td></tr>
<tr><td class="h">1854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1856</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1856">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$raw .= $5 if $inL;</td></tr>
<tr><td class="h">1857</td><td colspan="7"></td></tr><tr><td class="h">1858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(defined $6) {</td></tr>
<tr><td class="h">1859</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 3 and print &quot;Found stuff \&quot;$6\&quot;\n&quot;;</td></tr>
<tr><td class="h">1860</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, $6;</td></tr>
<tr><td class="h">1861</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1861">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$raw .= $6 if $inL;</td></tr>
<tr><td class="h">1862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# XXX does not capture multiplace whitespaces -- &#39;raw&#39; ends up with</td></tr>
<tr><td class="h">1863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at most 1 leading/trailing whitespace, why not all of it?</td></tr>
<tr><td class="h">1864</td><td colspan="7"></td></tr><tr><td class="h">1865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# should never ever ever ever happen</td></tr>
<tr><td class="h">1867</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG and print &quot;AYYAYAAAAA at line &quot;, __LINE__, &quot;\n&quot;;</td></tr>
<tr><td class="h">1868</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;SPORK 512512!&quot;;</td></tr>
<tr><td class="h">1869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1870</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1871</td><td colspan="7"></td></tr><tr><td class="h">1872</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1872">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;if(@stack) { # Uhoh, some sequences weren&#39;t closed.</td></tr>
<tr><td class="h">1873</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $x= &quot;...&quot;;</td></tr>
<tr><td class="h">1874</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while(@stack) {</td></tr>
<tr><td class="h">1875</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1875">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $lineage[-1] }, &#39;&#39; if 2 == @{ $lineage[-1] };</td></tr>
<tr><td class="h">1876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hmmmmm!</td></tr>
<tr><td class="h">1877</td><td colspan="7"></td></tr><tr><td class="h">1878</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= (pop @lineage)-&gt;[0];</td></tr>
<tr><td class="h">1879</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ender_length =&nbsp;&nbsp;pop @stack;</td></tr>
<tr><td class="h">1880</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1880">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($ender_length) {</td></tr>
<tr><td class="h">1881</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--$ender_length;</td></tr>
<tr><td class="h">1882</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $code . (&quot;&lt;&quot; x $ender_length) . &quot; $x &quot; . (&quot;&gt;&quot; x $ender_length);</td></tr>
<tr><td class="h">1883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1884</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = $code . &quot;&lt;$x&gt;&quot;;</td></tr>
<tr><td class="h">1885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1887</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DEBUG &gt; 1 and print &quot;Unterminated $x sequence\n&quot;;</td></tr>
<tr><td class="h">1888</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;whine($start_line,</td></tr>
<tr><td class="h">1889</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Unterminated $x sequence&quot;,</td></tr>
<tr><td class="h">1890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1892</td><td colspan="7"></td></tr><tr><td class="h">1893</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $treelet;</td></tr>
<tr><td class="h">1894</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1895</td><td colspan="7"></td></tr><tr><td class="h">1896</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">1897</td><td colspan="7"></td></tr><tr><td class="h">1898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub text_content_of_treelet {&nbsp;&nbsp;# method: $parser-&gt;text_content_of_treelet($lol)</td></tr>
<tr><td class="h">1899</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1899">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;return stringify_lol($_[1]);</td></tr>
<tr><td class="h">1900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1901</td><td colspan="7"></td></tr><tr><td class="h">1902</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub stringify_lol {&nbsp;&nbsp;# function: stringify_lol($lol)</td></tr>
<tr><td class="h">1903</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1903">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;my $string_form = &#39;&#39;;</td></tr>
<tr><td class="h">1904</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;_stringify_lol( $_[0] =&gt; \$string_form );</td></tr>
<tr><td class="h">1905</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $string_form;</td></tr>
<tr><td class="h">1906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1907</td><td colspan="7"></td></tr><tr><td class="h">1908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _stringify_lol {&nbsp;&nbsp;# the real recursor</td></tr>
<tr><td class="h">1909</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1909">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my($lol, $to) = @_;</td></tr>
<tr><td class="h">1910</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;for(my $i = 2; $i &lt; @$lol; ++$i) {</td></tr>
<tr><td class="h">1911</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1911">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1911">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1911">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ref($lol-&gt;[$i] || &#39;&#39;) and UNIVERSAL::isa($lol-&gt;[$i], &#39;ARRAY&#39;) ) {</td></tr>
<tr><td class="h">1912</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_stringify_lol( $lol-&gt;[$i], $to);&nbsp;&nbsp;# recurse!</td></tr>
<tr><td class="h">1913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1914</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$to .= $lol-&gt;[$i];</td></tr>
<tr><td class="h">1915</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1916</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1917</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1918</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1919</td><td colspan="7"></td></tr><tr><td class="h">1920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">1921</td><td colspan="7"></td></tr><tr><td class="h">1922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dump_curr_open { # return a string representation of the stack</td></tr>
<tr><td class="h">1923</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1923">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $curr_open = $_[0]{&#39;curr_open&#39;};</td></tr>
<tr><td class="h">1924</td><td colspan="7"></td></tr><tr><td class="h">1925</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1925">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return &#39;[empty]&#39; unless @$curr_open;</td></tr>
<tr><td class="h">1926</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return join &#39;; &#39;,</td></tr>
<tr><td class="h">1927</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;map {;</td></tr>
<tr><td class="h">1928</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1928">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1928">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($_-&gt;[0] eq &#39;=for&#39;)</td></tr>
<tr><td class="h">1929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? ( ($_-&gt;[1]{&#39;~really&#39;} || &#39;=over&#39;)</td></tr>
<tr><td class="h">1930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &#39; &#39; . $_-&gt;[1]{&#39;target&#39;})</td></tr>
<tr><td class="h">1931</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $_-&gt;[0]</td></tr>
<tr><td class="h">1932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1933</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@$curr_open</td></tr>
<tr><td class="h">1934</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;;</td></tr>
<tr><td class="h">1935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1936</td><td colspan="7"></td></tr><tr><td class="h">1937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###########################################################################</td></tr>
<tr><td class="h">1938</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %pretty_form = (</td></tr>
<tr><td class="h">1939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\a&quot; =&gt; &#39;\a&#39;, # ding!</td></tr>
<tr><td class="h">1940</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\b&quot; =&gt; &#39;\b&#39;, # BS</td></tr>
<tr><td class="h">1941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\e&quot; =&gt; &#39;\e&#39;, # ESC</td></tr>
<tr><td class="h">1942</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\f&quot; =&gt; &#39;\f&#39;, # FF</td></tr>
<tr><td class="h">1943</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\t&quot; =&gt; &#39;\t&#39;, # tab</td></tr>
<tr><td class="h">1944</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\cm&quot; =&gt; &#39;\cm&#39;,</td></tr>
<tr><td class="h">1945</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\cj&quot; =&gt; &#39;\cj&#39;,</td></tr>
<tr><td class="h">1946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&quot;\n&quot; =&gt; &#39;\n&#39;, # probably overrides one of either \cm or \cj</td></tr>
<tr><td class="h">1947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;&quot;&#39; =&gt; &#39;\&quot;&#39;,</td></tr>
<tr><td class="h">1948</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;\\&#39; =&gt; &#39;\\\\&#39;,</td></tr>
<tr><td class="h">1949</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;$&#39; =&gt; &#39;\\$&#39;,</td></tr>
<tr><td class="h">1950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;@&#39; =&gt; &#39;\\@&#39;,</td></tr>
<tr><td class="h">1951</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;%&#39; =&gt; &#39;\\%&#39;,</td></tr>
<tr><td class="h">1952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&#39;#&#39; =&gt; &#39;\\#&#39;,</td></tr>
<tr><td class="h">1953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">1954</td><td colspan="7"></td></tr><tr><td class="h">1955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub pretty { # adopted from Class::Classless</td></tr>
<tr><td class="h">1956</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Not the most brilliant routine, but passable.</td></tr>
<tr><td class="h">1957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# Don&#39;t give it a cyclic data structure!</td></tr>
<tr><td class="h">1958</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L1958">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;my @stuff = @_; # copy</td></tr>
<tr><td class="h">1959</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $x;</td></tr>
<tr><td class="h">1960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $out =</td></tr>
<tr><td class="h">1961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# join &quot;,\n&quot; .</td></tr>
<tr><td class="h">1962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;join &quot;, &quot;,</td></tr>
<tr><td class="h">1963</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;map {;</td></tr>
<tr><td class="h">1964</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1964">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1964">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--condition.html#L1964">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(!defined($_)) {</td></tr>
<tr><td class="h">1965</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;undef&quot;;</td></tr>
<tr><td class="h">1966</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(ref($_) eq &#39;ARRAY&#39; or ref($_) eq &#39;Pod::Simple::LinkSection&#39;) {</td></tr>
<tr><td class="h">1967</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = &quot;[ &quot; . pretty(@$_) . &quot; ]&quot; ;</td></tr>
<tr><td class="h">1968</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x;</td></tr>
<tr><td class="h">1969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(ref($_) eq &#39;SCALAR&#39;) {</td></tr>
<tr><td class="h">1970</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = &quot;\\&quot; . pretty($$_) ;</td></tr>
<tr><td class="h">1971</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x;</td></tr>
<tr><td class="h">1972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(ref($_) eq &#39;HASH&#39;) {</td></tr>
<tr><td class="h">1973</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $hr = $_;</td></tr>
<tr><td class="h">1974</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x = &quot;{&quot; . join(&quot;, &quot;,</td></tr>
<tr><td class="h">1975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map(pretty($_) . &#39;=&gt;&#39; . pretty($hr-&gt;{$_}),</td></tr>
<tr><td class="h">1976</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort keys %$hr ) ) . &quot;}&quot; ;</td></tr>
<tr><td class="h">1977</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$x;</td></tr>
<tr><td class="h">1978</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(!length($_)) { q{&#39;&#39;} # empty string</td></tr>
<tr><td class="h">1979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} elsif(</td></tr>
<tr><td class="h">1980</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$_ eq &#39;0&#39; # very common case</td></tr>
<tr><td class="h">1981</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or(</td></tr>
<tr><td class="h">1982</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m/^-?(?:[123456789]\d*|0)(?:\.\d+)?$/s</td></tr>
<tr><td class="h">1983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and $_ ne &#39;-0&#39; # the strange case that that RE lets thru</td></tr>
<tr><td class="h">1984</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1985</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;) { $_;</td></tr>
<tr><td class="h">1986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1987</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( chr(65) eq &#39;A&#39; ) {</td></tr>
<tr><td class="h">1988</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&lt;([^\x20\x21\x23\x27-\x3F\x41-\x5B\x5D-\x7E])&gt;</td></tr>
<tr><td class="h">1989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&lt;$pretty_form{$1} || &#39;\\x&#39;.(unpack(&quot;H2&quot;,$1))&gt;eg;</td></tr>
<tr><td class="h">1990</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--branch.html#L1990">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;$pretty_form{$1} || &#39;\\x{&#39;.sprintf(&quot;%x&quot;, ord($1)).&#39;}&#39;&gt;eg;</td></tr>
<tr><td class="h">1991</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">1992</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# We&#39;re in some crazy non-ASCII world!</td></tr>
<tr><td class="h">1993</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&lt;([^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789])&gt;</td></tr>
<tr><td class="h">1994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&lt;$pretty_form{$1} || &#39;\\x&#39;.(unpack(&quot;H2&quot;,$1))&gt;eg;</td></tr>
<tr><td class="h">1995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;$pretty_form{$1} || &#39;\\x{&#39;.sprintf(&quot;%x&quot;, ord($1)).&#39;}&#39;&gt;eg;</td></tr>
<tr><td class="h">1996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1997</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq{&quot;$_&quot;};</td></tr>
<tr><td class="h">1998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} @stuff;</td></tr>
<tr><td class="h">2000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# $out =~ s/\n */ /g if length($out) &lt; 75;</td></tr>
<tr><td class="h">2001</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;return $out;</td></tr>
<tr><td class="h">2002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2003</td><td colspan="7"></td></tr><tr><td class="h">2004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">2005</td><td colspan="7"></td></tr><tr><td class="h">2006</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># A rather unsubtle method of blowing away all the state information</td></tr>
<tr><td class="h">2007</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># from a parser object so it can be reused. Provided as a utility for</td></tr>
<tr><td class="h">2008</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># backward compatibility in Pod::Man, etc. but not recommended for</td></tr>
<tr><td class="h">2009</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># general use.</td></tr>
<tr><td class="h">2010</td><td colspan="7"></td></tr><tr><td class="h">2011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub reinit {</td></tr>
<tr><td class="h">2012</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Pod-Simple-BlackBox-pm--subroutine.html#L2012">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2013</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;foreach (qw(source_dead source_filename doc_has_started</td></tr>
<tr><td class="h">2014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">start_of_pod_block content_seen last_was_blank paras curr_open</td></tr>
<tr><td class="h">2015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">line_count pod_para_count in_pod ~tried_gen_errata errata errors_seen</td></tr>
<tr><td class="h">2016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Title)) {</td></tr>
<tr><td class="h">2017</td><td colspan="7"></td></tr><tr><td class="h">2018</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{$_};</td></tr>
<tr><td class="h">2019</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2020</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2021</td><td colspan="7"></td></tr><tr><td class="h">2022</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</td></tr>
<tr><td class="h">2023</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">2024</td><td colspan="7"></td></tr></table>
</body>
</html>
