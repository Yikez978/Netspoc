<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/local/lib/perl5/5.20.1/Test/More.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/local/lib/perl5/5.20.1/Test/More.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">10.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Test::More;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L3">44</a></div></td><td></td><td><div>813</div><div>100</div><div>1354</div></td><td class="s">use 5.006;</td></tr>
<tr><td class="h">4</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L4">44</a></div></td><td></td><td><div>165</div><div>230</div><div>959</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L5">44</a></div></td><td></td><td><div>156</div><div>47</div><div>3680</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">6</td><td colspan="7"></td></tr><tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#---- perlcritic exemptions. ----#</td></tr>
<tr><td class="h">8</td><td colspan="7"></td></tr><tr><td class="h">9</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># We use a lot of subroutine prototypes</td></tr>
<tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">## no critic (Subroutines::ProhibitSubroutinePrototypes)</td></tr>
<tr><td class="h">11</td><td colspan="7"></td></tr><tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Can&#39;t use Carp because it might cause use_ok() to accidentally succeed</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># even though the module being used forgot to use Carp.&nbsp;&nbsp;Yes, this</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># actually happened.</td></tr>
<tr><td class="h">15</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _carp {</td></tr>
<tr><td class="h">16</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L16">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $file, $line ) = ( caller(1) )[ 1, 2 ];</td></tr>
<tr><td class="h">17</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return warn @_, &quot; at $file line $line\n&quot;;</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">19</td><td colspan="7"></td></tr><tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;1.001002&#39;;</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = eval $VERSION;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">22</td><td colspan="7"></td></tr><tr><td class="h">23</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L23">44</a></div></td><td></td><td><div>8410</div><div>711</div><div>178</div></td><td class="s">use Test::Builder::Module 0.99;</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our @ISA&nbsp;&nbsp;&nbsp;&nbsp;= qw(Test::Builder::Module);</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our @EXPORT = qw(ok use_ok require_ok</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;is isnt like unlike is_deeply</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;cmp_ok</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;skip todo todo_skip</td></tr>
<tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;pass fail</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;eq_array eq_hash eq_set</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;$TODO</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;plan</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;done_testing</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;can_ok isa_ok new_ok</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;diag note explain</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;subtest</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;BAIL_OUT</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">39</td><td colspan="7"></td></tr><tr><td class="h">40 - 163</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

Test::More - yet another framework for writing test scripts

=head1 SYNOPSIS

&nbsp;&nbsp;use Test::More tests =&gt; 23;
&nbsp;&nbsp;# or
&nbsp;&nbsp;use Test::More skip_all =&gt; $reason;
&nbsp;&nbsp;# or
&nbsp;&nbsp;use Test::More;&nbsp;&nbsp;&nbsp;# see done_testing()

&nbsp;&nbsp;require_ok( &#39;Some::Module&#39; );

&nbsp;&nbsp;# Various ways to say &quot;ok&quot;
&nbsp;&nbsp;ok($got eq $expected, $test_name);

&nbsp;&nbsp;is&nbsp;&nbsp;($got, $expected, $test_name);
&nbsp;&nbsp;isnt($got, $expected, $test_name);

&nbsp;&nbsp;# Rather than print STDERR &quot;# here&#39;s what went wrong\n&quot;
&nbsp;&nbsp;diag(&quot;here&#39;s what went wrong&quot;);

&nbsp;&nbsp;like&nbsp;&nbsp;($got, qr/expected/, $test_name);
&nbsp;&nbsp;unlike($got, qr/expected/, $test_name);

&nbsp;&nbsp;cmp_ok($got, &#39;==&#39;, $expected, $test_name);

&nbsp;&nbsp;is_deeply($got_complex_structure, $expected_complex_structure, $test_name);

&nbsp;&nbsp;SKIP: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip $why, $how_many unless $have_some_feature;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok( foo(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_name );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( foo(42), 23, $test_name );
&nbsp;&nbsp;};

&nbsp;&nbsp;TODO: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $TODO = $why;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok( foo(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_name );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( foo(42), 23, $test_name );
&nbsp;&nbsp;};

&nbsp;&nbsp;can_ok($module, @methods);
&nbsp;&nbsp;isa_ok($object, $class);

&nbsp;&nbsp;pass($test_name);
&nbsp;&nbsp;fail($test_name);

&nbsp;&nbsp;BAIL_OUT($why);

&nbsp;&nbsp;# UNIMPLEMENTED!!!
&nbsp;&nbsp;my @status = Test::More::status;


=head1 DESCRIPTION

B&lt;STOP!&gt; If you&#39;re just getting started writing tests, have a look at
L&lt;Test::Simple&gt; first.&nbsp;&nbsp;This is a drop in replacement for Test::Simple
which you can switch to once you get the hang of basic testing.

The purpose of this module is to provide a wide range of testing
utilities.&nbsp;&nbsp;Various ways to say &quot;ok&quot; with better diagnostics,
facilities to skip tests, test future features and compare complicated
data structures.&nbsp;&nbsp;While you can do almost anything with a simple
C&lt;ok()&gt; function, it doesn&#39;t provide good diagnostic output.


=head2 I love it when a plan comes together

Before anything else, you need a testing plan.&nbsp;&nbsp;This basically declares
how many tests your script is going to run to protect against premature
failure.

The preferred way to do this is to declare a plan when you C&lt;use Test::More&gt;.

&nbsp;&nbsp;use Test::More tests =&gt; 23;

There are cases when you will not know beforehand how many tests your
script is going to run.&nbsp;&nbsp;In this case, you can declare your tests at
the end.

&nbsp;&nbsp;use Test::More;

&nbsp;&nbsp;... run your tests ...

&nbsp;&nbsp;done_testing( $number_of_tests_run );

Sometimes you really don&#39;t know how many tests were run, or it&#39;s too
difficult to calculate.&nbsp;&nbsp;In which case you can leave off
$number_of_tests_run.

In some cases, you&#39;ll want to completely skip an entire testing script.

&nbsp;&nbsp;use Test::More skip_all =&gt; $skip_reason;

Your script will declare a skip with the reason why you skipped and
exit immediately with a zero (success).&nbsp;&nbsp;See L&lt;Test::Harness&gt; for
details.

If you want to control what functions Test::More will export, you
have to use the &#39;import&#39; option.&nbsp;&nbsp;For example, to import everything
but &#39;fail&#39;, you&#39;d do:

&nbsp;&nbsp;use Test::More tests =&gt; 23, import =&gt; [&#39;!fail&#39;];

Alternatively, you can use the plan() function.&nbsp;&nbsp;Useful for when you
have to calculate the number of tests.

&nbsp;&nbsp;use Test::More;
&nbsp;&nbsp;plan tests =&gt; keys %Stuff * 3;

or for deciding between running the tests at all:

&nbsp;&nbsp;use Test::More;
&nbsp;&nbsp;if( $^O eq &#39;MacOS&#39; ) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plan skip_all =&gt; &#39;Test irrelevant on MacOS&#39;;
&nbsp;&nbsp;}
&nbsp;&nbsp;else {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plan tests =&gt; 42;
&nbsp;&nbsp;}

=cut</pre></td></tr>
<tr><td class="h">164</td><td colspan="7"></td></tr><tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub plan {</td></tr>
<tr><td class="h">166</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L166">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">167</td><td colspan="7"></td></tr><tr><td class="h">168</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;plan(@_);</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">170</td><td colspan="7"></td></tr><tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This implements &quot;use Test::More &#39;no_diag&#39;&quot; but the behavior is</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># deprecated.</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub import_extra {</td></tr>
<tr><td class="h">174</td><td><div class="c3">84</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L174">84</a></div></td><td><div class="c3">1</div></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = shift;</td></tr>
<tr><td class="h">175</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $list&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">176</td><td colspan="7"></td></tr><tr><td class="h">177</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @other = ();</td></tr>
<tr><td class="h">178</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $idx&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">179</td><td><div class="c3">84</div><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>80</div><div>218</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $idx &lt;= $#{$list} ) {</td></tr>
<tr><td class="h">180</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $item = $list-&gt;[$idx];</td></tr>
<tr><td class="h">181</td><td colspan="7"></td></tr><tr><td class="h">182</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L182">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L182">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $item and $item eq &#39;no_diag&#39; ) {</td></tr>
<tr><td class="h">183</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;builder-&gt;no_diag(1);</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">186</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @other, $item;</td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">188</td><td colspan="7"></td></tr><tr><td class="h">189</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$idx++;</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">191</td><td colspan="7"></td></tr><tr><td class="h">192</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@$list = @other;</td></tr>
<tr><td class="h">193</td><td colspan="7"></td></tr><tr><td class="h">194</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">196</td><td colspan="7"></td></tr><tr><td class="h">197 - 216</td><td colspan="6"></td><td class="s"><pre>=over 4

=item B&lt;done_testing&gt;

&nbsp;&nbsp;&nbsp;&nbsp;done_testing();
&nbsp;&nbsp;&nbsp;&nbsp;done_testing($number_of_tests);

If you don&#39;t know how many tests you&#39;re going to run, you can issue
the plan when you&#39;re done running tests.

$number_of_tests is the same as plan(), it&#39;s the number of tests you
expected to run.&nbsp;&nbsp;You can omit this, in which case the number of tests
you ran doesn&#39;t matter, just the fact that your tests ran to
conclusion.

This is safer than and replaces the &quot;no_plan&quot; plan.

=back

=cut</pre></td></tr>
<tr><td class="h">217</td><td colspan="7"></td></tr><tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub done_testing {</td></tr>
<tr><td class="h">219</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L219">44</a></div></td><td><div class="c3">1</div></td><td><div>394</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">220</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;done_testing(@_);</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">222</td><td colspan="7"></td></tr><tr><td class="h">223 - 288</td><td colspan="6"></td><td class="s"><pre>=head2 Test names

By convention, each test is assigned a number in order.&nbsp;&nbsp;This is
largely done automatically for you.&nbsp;&nbsp;However, it&#39;s often very useful to
assign a name to each test.&nbsp;&nbsp;Which would you rather see:

&nbsp;&nbsp;ok 4
&nbsp;&nbsp;not ok 5
&nbsp;&nbsp;ok 6

or

&nbsp;&nbsp;ok 4 - basic multi-variable
&nbsp;&nbsp;not ok 5 - simple exponential
&nbsp;&nbsp;ok 6 - force == mass * acceleration

The later gives you some idea of what failed.&nbsp;&nbsp;It also makes it easier
to find the test in your script, simply search for &quot;simple
exponential&quot;.

All test functions take a name argument.&nbsp;&nbsp;It&#39;s optional, but highly
suggested that you use it.

=head2 I&#39;m ok, you&#39;re not ok.

The basic purpose of this module is to print out either &quot;ok #&quot; or &quot;not
ok #&quot; depending on if a given test succeeded or failed.&nbsp;&nbsp;Everything
else is just gravy.

All of the following print &quot;ok&quot; or &quot;not ok&quot; depending on if the test
succeeded or failed.&nbsp;&nbsp;They all also return true or false,
respectively.

=over 4

=item B&lt;ok&gt;

&nbsp;&nbsp;ok($got eq $expected, $test_name);

This simply evaluates any expression (C&lt;$got eq $expected&gt; is just a
simple example) and uses that to determine if the test succeeded or
failed.&nbsp;&nbsp;A true expression passes, a false one fails.&nbsp;&nbsp;Very simple.

For example:

&nbsp;&nbsp;&nbsp;&nbsp;ok( $exp{9} == 81,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;simple exponential&#39; );
&nbsp;&nbsp;&nbsp;&nbsp;ok( Film-&gt;can(&#39;db_Main&#39;),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;set_db()&#39; );
&nbsp;&nbsp;&nbsp;&nbsp;ok( $p-&gt;tests == 4,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;saw tests&#39; );
&nbsp;&nbsp;&nbsp;&nbsp;ok( !grep(!defined $_, @items),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;all items defined&#39; );

(Mnemonic:&nbsp;&nbsp;&quot;This is ok.&quot;)

$test_name is a very short description of the test that will be printed
out.&nbsp;&nbsp;It makes it very easy to find a test in your script when it fails
and gives others an idea of your intentions.&nbsp;&nbsp;$test_name is optional,
but we B&lt;very&gt; strongly encourage its use.

Should an ok() fail, it will produce some diagnostics:

&nbsp;&nbsp;&nbsp;&nbsp;not ok 18 - sufficient mucus
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;Failed test &#39;sufficient mucus&#39;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;in foo.t at line 42.

This is the same as Test::Simple&#39;s ok() routine.

=cut</pre></td></tr>
<tr><td class="h">289</td><td colspan="7"></td></tr><tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ok ($;$) {</td></tr>
<tr><td class="h">291</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L291">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $test, $name ) = @_;</td></tr>
<tr><td class="h">292</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">293</td><td colspan="7"></td></tr><tr><td class="h">294</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">296</td><td colspan="7"></td></tr><tr><td class="h">297 - 371</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is&gt;

=item B&lt;isnt&gt;

&nbsp;&nbsp;is&nbsp;&nbsp;( $got, $expected, $test_name );
&nbsp;&nbsp;isnt( $got, $expected, $test_name );

Similar to ok(), is() and isnt() compare their two arguments
with C&lt;eq&gt; and C&lt;ne&gt; respectively and use the result of that to
determine if the test succeeded or failed.&nbsp;&nbsp;So these:

&nbsp;&nbsp;&nbsp;&nbsp;# Is the ultimate answer 42?
&nbsp;&nbsp;&nbsp;&nbsp;is( ultimate_answer(), 42,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Meaning of Life&quot; );

&nbsp;&nbsp;&nbsp;&nbsp;# $foo isn&#39;t empty
&nbsp;&nbsp;&nbsp;&nbsp;isnt( $foo, &#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Got some foo&quot; );

are similar to these:

&nbsp;&nbsp;&nbsp;&nbsp;ok( ultimate_answer() eq 42,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Meaning of Life&quot; );
&nbsp;&nbsp;&nbsp;&nbsp;ok( $foo ne &#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Got some foo&quot; );

C&lt;undef&gt; will only ever match C&lt;undef&gt;.&nbsp;&nbsp;So you can test a value
against C&lt;undef&gt; like this:

&nbsp;&nbsp;&nbsp;&nbsp;is($not_defined, undef, &quot;undefined as expected&quot;);

(Mnemonic:&nbsp;&nbsp;&quot;This is that.&quot;&nbsp;&nbsp;&quot;This isn&#39;t that.&quot;)

So why use these?&nbsp;&nbsp;They produce better diagnostics on failure.&nbsp;&nbsp;ok()
cannot know what you are testing for (beyond the name), but is() and
isnt() know what the test was and why it failed.&nbsp;&nbsp;For example this
test:

&nbsp;&nbsp;&nbsp;&nbsp;my $foo = &#39;waffle&#39;;&nbsp;&nbsp;my $bar = &#39;yarblokos&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;is( $foo, $bar,&nbsp;&nbsp;&nbsp;&#39;Is foo the same as bar?&#39; );

Will produce something like this:

&nbsp;&nbsp;&nbsp;&nbsp;not ok 17 - Is foo the same as bar?
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;Failed test &#39;Is foo the same as bar?&#39;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;in foo.t at line 139.
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got: &#39;waffle&#39;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expected: &#39;yarblokos&#39;

So you can figure out what went wrong without rerunning the test.

You are encouraged to use is() and isnt() over ok() where possible,
however do not be tempted to use them to find out if something is
true or false!

&nbsp;&nbsp;# XXX BAD!
&nbsp;&nbsp;is( exists $brooklyn{tree}, 1, &#39;A tree grows in Brooklyn&#39; );

This does not check if C&lt;exists $brooklyn{tree}&gt; is true, it checks if
it returns 1.&nbsp;&nbsp;Very different.&nbsp;&nbsp;Similar caveats exist for false and 0.
In these cases, use ok().

&nbsp;&nbsp;ok( exists $brooklyn{tree},&nbsp;&nbsp;&nbsp;&nbsp;&#39;A tree grows in Brooklyn&#39; );

A simple call to isnt() usually does not provide a strong test but there
are cases when you cannot say much more about a value than that it is
different from some other value:

&nbsp;&nbsp;new_ok $obj, &quot;Foo&quot;;

&nbsp;&nbsp;my $clone = $obj-&gt;clone;
&nbsp;&nbsp;isa_ok $obj, &quot;Foo&quot;, &quot;Foo-&gt;clone&quot;;

&nbsp;&nbsp;isnt $obj, $clone, &quot;clone() produces a different object&quot;;

For those grammatical pedants out there, there&#39;s an C&lt;isn&#39;t()&gt;
function which is an alias of isnt().

=cut</pre></td></tr>
<tr><td class="h">372</td><td colspan="7"></td></tr><tr><td class="h">373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is ($$;$) {</td></tr>
<tr><td class="h">374</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L374">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">375</td><td colspan="7"></td></tr><tr><td class="h">376</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;is_eq(@_);</td></tr>
<tr><td class="h">377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">378</td><td colspan="7"></td></tr><tr><td class="h">379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isnt ($$;$) {</td></tr>
<tr><td class="h">380</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L380">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">381</td><td colspan="7"></td></tr><tr><td class="h">382</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;isnt_eq(@_);</td></tr>
<tr><td class="h">383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">384</td><td colspan="7"></td></tr><tr><td class="h">385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*isn&#39;t = \&amp;isnt;</td></tr>
<tr><td class="h">386</td><td colspan="7"></td></tr><tr><td class="h">387 - 415</td><td colspan="6"></td><td class="s"><pre>=item B&lt;like&gt;

&nbsp;&nbsp;like( $got, qr/expected/, $test_name );

Similar to ok(), like() matches $got against the regex C&lt;qr/expected/&gt;.

So this:

&nbsp;&nbsp;&nbsp;&nbsp;like($got, qr/expected/, &#39;this is like that&#39;);

is similar to:

&nbsp;&nbsp;&nbsp;&nbsp;ok( $got =~ m/expected/, &#39;this is like that&#39;);

(Mnemonic &quot;This is like that&quot;.)

The second argument is a regular expression.&nbsp;&nbsp;It may be given as a
regex reference (i.e. C&lt;qr//&gt;) or (for better compatibility with older
perls) as a string that looks like a regex (alternative delimiters are
currently not supported):

&nbsp;&nbsp;&nbsp;&nbsp;like( $got, &#39;/expected/&#39;, &#39;this is like that&#39; );

Regex options may be placed on the end (C&lt;&#39;/expected/i&#39;&gt;).

Its advantages over ok() are similar to that of is() and isnt().&nbsp;&nbsp;Better
diagnostics on failure.

=cut</pre></td></tr>
<tr><td class="h">416</td><td colspan="7"></td></tr><tr><td class="h">417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub like ($$;$) {</td></tr>
<tr><td class="h">418</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L418">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">419</td><td colspan="7"></td></tr><tr><td class="h">420</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;like(@_);</td></tr>
<tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">422</td><td colspan="7"></td></tr><tr><td class="h">423 - 430</td><td colspan="6"></td><td class="s"><pre>=item B&lt;unlike&gt;

&nbsp;&nbsp;unlike( $got, qr/expected/, $test_name );

Works exactly as like(), only it checks if $got B&lt;does not&gt; match the
given pattern.

=cut</pre></td></tr>
<tr><td class="h">431</td><td colspan="7"></td></tr><tr><td class="h">432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unlike ($$;$) {</td></tr>
<tr><td class="h">433</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L433">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">434</td><td colspan="7"></td></tr><tr><td class="h">435</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;unlike(@_);</td></tr>
<tr><td class="h">436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">437</td><td colspan="7"></td></tr><tr><td class="h">438 - 476</td><td colspan="6"></td><td class="s"><pre>=item B&lt;cmp_ok&gt;

&nbsp;&nbsp;cmp_ok( $got, $op, $expected, $test_name );

Halfway between C&lt;ok()&gt; and C&lt;is()&gt; lies C&lt;cmp_ok()&gt;.&nbsp;&nbsp;This allows you
to compare two arguments using any binary perl operator.&nbsp;&nbsp;The test
passes if the comparison is true and fails otherwise.

&nbsp;&nbsp;&nbsp;&nbsp;# ok( $got eq $expected );
&nbsp;&nbsp;&nbsp;&nbsp;cmp_ok( $got, &#39;eq&#39;, $expected, &#39;this eq that&#39; );

&nbsp;&nbsp;&nbsp;&nbsp;# ok( $got == $expected );
&nbsp;&nbsp;&nbsp;&nbsp;cmp_ok( $got, &#39;==&#39;, $expected, &#39;this == that&#39; );

&nbsp;&nbsp;&nbsp;&nbsp;# ok( $got &amp;&amp; $expected );
&nbsp;&nbsp;&nbsp;&nbsp;cmp_ok( $got, &#39;&amp;&amp;&#39;, $expected, &#39;this &amp;&amp; that&#39; );
&nbsp;&nbsp;&nbsp;&nbsp;...etc...

Its advantage over ok() is when the test fails you&#39;ll know what $got
and $expected were:

&nbsp;&nbsp;&nbsp;&nbsp;not ok 1
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;Failed test in foo.t at line 12.
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;23&#39;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef

It&#39;s also useful in those cases where you are comparing numbers and
is()&#39;s use of C&lt;eq&gt; will interfere:

&nbsp;&nbsp;&nbsp;&nbsp;cmp_ok( $big_hairy_number, &#39;==&#39;, $another_big_hairy_number );

It&#39;s especially useful when comparing greater-than or smaller-than 
relation between values:

&nbsp;&nbsp;&nbsp;&nbsp;cmp_ok( $some_value, &#39;&lt;=&#39;, $upper_limit );


=cut</pre></td></tr>
<tr><td class="h">477</td><td colspan="7"></td></tr><tr><td class="h">478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cmp_ok($$$;$) {</td></tr>
<tr><td class="h">479</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L479">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">480</td><td colspan="7"></td></tr><tr><td class="h">481</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;cmp_ok(@_);</td></tr>
<tr><td class="h">482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">483</td><td colspan="7"></td></tr><tr><td class="h">484 - 511</td><td colspan="6"></td><td class="s"><pre>=item B&lt;can_ok&gt;

&nbsp;&nbsp;can_ok($module, @methods);
&nbsp;&nbsp;can_ok($object, @methods);

Checks to make sure the $module or $object can do these @methods
(works with functions, too).

&nbsp;&nbsp;&nbsp;&nbsp;can_ok(&#39;Foo&#39;, qw(this that whatever));

is almost exactly like saying:

&nbsp;&nbsp;&nbsp;&nbsp;ok( Foo-&gt;can(&#39;this&#39;) &amp;&amp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Foo-&gt;can(&#39;that&#39;) &amp;&amp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Foo-&gt;can(&#39;whatever&#39;) 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);

only without all the typing and with a better interface.&nbsp;&nbsp;Handy for
quickly testing an interface.

No matter how many @methods you check, a single can_ok() call counts
as one test.&nbsp;&nbsp;If you desire otherwise, use:

&nbsp;&nbsp;&nbsp;&nbsp;foreach my $meth (@methods) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can_ok(&#39;Foo&#39;, $meth);
&nbsp;&nbsp;&nbsp;&nbsp;}

=cut</pre></td></tr>
<tr><td class="h">512</td><td colspan="7"></td></tr><tr><td class="h">513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub can_ok ($@) {</td></tr>
<tr><td class="h">514</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L514">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $proto, @methods ) = @_;</td></tr>
<tr><td class="h">515</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L515">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = ref $proto || $proto;</td></tr>
<tr><td class="h">516</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">517</td><td colspan="7"></td></tr><tr><td class="h">518</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L518">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($class) {</td></tr>
<tr><td class="h">519</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $tb-&gt;ok( 0, &quot;-&gt;can(...)&quot; );</td></tr>
<tr><td class="h">520</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&#39;&nbsp;&nbsp;&nbsp;&nbsp;can_ok() called with empty class or reference&#39;);</td></tr>
<tr><td class="h">521</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">523</td><td colspan="7"></td></tr><tr><td class="h">524</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L524">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless(@methods) {</td></tr>
<tr><td class="h">525</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $tb-&gt;ok( 0, &quot;$class-&gt;can(...)&quot; );</td></tr>
<tr><td class="h">526</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&#39;&nbsp;&nbsp;&nbsp;&nbsp;can_ok() called with no methods&#39;);</td></tr>
<tr><td class="h">527</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">529</td><td colspan="7"></td></tr><tr><td class="h">530</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @nok = ();</td></tr>
<tr><td class="h">531</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $method (@methods) {</td></tr>
<tr><td class="h">532</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L532">0</a></div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L532">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;_try( sub { $proto-&gt;can($method) } ) or push @nok, $method;</td></tr>
<tr><td class="h">533</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">534</td><td colspan="7"></td></tr><tr><td class="h">535</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L535">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $name = (@methods == 1) ? &quot;$class-&gt;can(&#39;$methods[0]&#39;)&quot; :</td></tr>
<tr><td class="h">536</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;$class-&gt;can(...)&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">537</td><td colspan="7"></td></tr><tr><td class="h">538</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $tb-&gt;ok( !@nok, $name );</td></tr>
<tr><td class="h">539</td><td colspan="7"></td></tr><tr><td class="h">540</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag( map &quot;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;can(&#39;$_&#39;) failed\n&quot;, @nok );</td></tr>
<tr><td class="h">541</td><td colspan="7"></td></tr><tr><td class="h">542</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">544</td><td colspan="7"></td></tr><tr><td class="h">545 - 577</td><td colspan="6"></td><td class="s"><pre>=item B&lt;isa_ok&gt;

&nbsp;&nbsp;isa_ok($object,&nbsp;&nbsp;&nbsp;$class, $object_name);
&nbsp;&nbsp;isa_ok($subclass, $class, $object_name);
&nbsp;&nbsp;isa_ok($ref,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type,&nbsp;&nbsp;$ref_name);

Checks to see if the given C&lt;&lt; $object-&gt;isa($class) &gt;&gt;.&nbsp;&nbsp;Also checks to make
sure the object was defined in the first place.&nbsp;&nbsp;Handy for this sort
of thing:

&nbsp;&nbsp;&nbsp;&nbsp;my $obj = Some::Module-&gt;new;
&nbsp;&nbsp;&nbsp;&nbsp;isa_ok( $obj, &#39;Some::Module&#39; );

where you&#39;d otherwise have to write

&nbsp;&nbsp;&nbsp;&nbsp;my $obj = Some::Module-&gt;new;
&nbsp;&nbsp;&nbsp;&nbsp;ok( defined $obj &amp;&amp; $obj-&gt;isa(&#39;Some::Module&#39;) );

to safeguard against your test script blowing up.

You can also test a class, to make sure that it has the right ancestor:

&nbsp;&nbsp;&nbsp;&nbsp;isa_ok( &#39;Vole&#39;, &#39;Rodent&#39; );

It works on references, too:

&nbsp;&nbsp;&nbsp;&nbsp;isa_ok( $array_ref, &#39;ARRAY&#39; );

The diagnostics of this test normally just refer to &#39;the object&#39;.&nbsp;&nbsp;If
you&#39;d like them to be more specific, you can supply an $object_name
(for example &#39;Test customer&#39;).

=cut</pre></td></tr>
<tr><td class="h">578</td><td colspan="7"></td></tr><tr><td class="h">579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isa_ok ($$;$) {</td></tr>
<tr><td class="h">580</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L580">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $thing, $class, $thing_name ) = @_;</td></tr>
<tr><td class="h">581</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">582</td><td colspan="7"></td></tr><tr><td class="h">583</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $whatami;</td></tr>
<tr><td class="h">584</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L584">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L584">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $thing ) {</td></tr>
<tr><td class="h">585</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$whatami = &#39;undef&#39;;</td></tr>
<tr><td class="h">586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">587</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ref $thing ) {</td></tr>
<tr><td class="h">588</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$whatami = &#39;reference&#39;;</td></tr>
<tr><td class="h">589</td><td colspan="7"></td></tr><tr><td class="h">590</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local($@,$!);</td></tr>
<tr><td class="h">591</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require Scalar::Util;</td></tr>
<tr><td class="h">592</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L592">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( Scalar::Util::blessed($thing) ) {</td></tr>
<tr><td class="h">593</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$whatami = &#39;object&#39;;</td></tr>
<tr><td class="h">594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">597</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$whatami = &#39;class&#39;;</td></tr>
<tr><td class="h">598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">599</td><td colspan="7"></td></tr><tr><td class="h">600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We can&#39;t use UNIVERSAL::isa because we want to honor isa() overrides</td></tr>
<tr><td class="h">601</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L601">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $rslt, $error ) = $tb-&gt;_try( sub { $thing-&gt;isa($class) } );</td></tr>
<tr><td class="h">602</td><td colspan="7"></td></tr><tr><td class="h">603</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L603">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($error) {</td></tr>
<tr><td class="h">604</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L604">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &lt;&lt;WHOA unless $error =~ /^Can&#39;t (locate|call) method &quot;isa&quot;/;</td></tr>
<tr><td class="h">605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA! I tried to call -&gt;isa on your $whatami and got some weird error.</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Here&#39;s the error.</td></tr>
<tr><td class="h">607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$error</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA</td></tr>
<tr><td class="h">609</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">610</td><td colspan="7"></td></tr><tr><td class="h">611</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Special case for isa_ok( [], &quot;ARRAY&quot; ) and like</td></tr>
<tr><td class="h">612</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L612">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $whatami eq &#39;reference&#39; ) {</td></tr>
<tr><td class="h">613</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$rslt = UNIVERSAL::isa($thing, $class);</td></tr>
<tr><td class="h">614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">615</td><td colspan="7"></td></tr><tr><td class="h">616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($diag, $name);</td></tr>
<tr><td class="h">617</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L617">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L617">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L617">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L617">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L617">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $thing_name ) {</td></tr>
<tr><td class="h">618</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &quot;&#39;$thing_name&#39; isa &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">619</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L619">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$diag = defined $thing ? &quot;&#39;$thing_name&#39; isn&#39;t a &#39;$class&#39;&quot; : &quot;&#39;$thing_name&#39; isn&#39;t defined&quot;;</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $whatami eq &#39;object&#39; ) {</td></tr>
<tr><td class="h">622</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $my_class = ref $thing;</td></tr>
<tr><td class="h">623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thing_name = qq[An object of class &#39;$my_class&#39;];</td></tr>
<tr><td class="h">624</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &quot;$thing_name isa &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">625</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$diag = &quot;The object of class &#39;$my_class&#39; isn&#39;t a &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $whatami eq &#39;reference&#39; ) {</td></tr>
<tr><td class="h">628</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = ref $thing;</td></tr>
<tr><td class="h">629</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thing_name = qq[A reference of type &#39;$type&#39;];</td></tr>
<tr><td class="h">630</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &quot;$thing_name isa &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">631</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$diag = &quot;The reference of type &#39;$type&#39; isn&#39;t a &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $whatami eq &#39;undef&#39; ) {</td></tr>
<tr><td class="h">634</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thing_name = &#39;undef&#39;;</td></tr>
<tr><td class="h">635</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &quot;$thing_name isa &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">636</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$diag = &quot;$thing_name isn&#39;t defined&quot;;</td></tr>
<tr><td class="h">637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $whatami eq &#39;class&#39; ) {</td></tr>
<tr><td class="h">639</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thing_name = qq[The class (or class-like) &#39;$thing&#39;];</td></tr>
<tr><td class="h">640</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &quot;$thing_name isa &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">641</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$diag = &quot;$thing_name isn&#39;t a &#39;$class&#39;&quot;;</td></tr>
<tr><td class="h">642</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">643</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">644</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die;</td></tr>
<tr><td class="h">645</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">646</td><td colspan="7"></td></tr><tr><td class="h">647</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok;</td></tr>
<tr><td class="h">648</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L648">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($rslt) {</td></tr>
<tr><td class="h">649</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;ok( 1, $name );</td></tr>
<tr><td class="h">650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">652</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;ok( 0, $name );</td></tr>
<tr><td class="h">653</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&quot;&nbsp;&nbsp;&nbsp;&nbsp;$diag\n&quot;);</td></tr>
<tr><td class="h">654</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">655</td><td colspan="7"></td></tr><tr><td class="h">656</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">658</td><td colspan="7"></td></tr><tr><td class="h">659 - 678</td><td colspan="6"></td><td class="s"><pre>=item B&lt;new_ok&gt;

&nbsp;&nbsp;my $obj = new_ok( $class );
&nbsp;&nbsp;my $obj = new_ok( $class =&gt; \@args );
&nbsp;&nbsp;my $obj = new_ok( $class =&gt; \@args, $object_name );

A convenience function which combines creating an object and calling
isa_ok() on that object.

It is basically equivalent to:

&nbsp;&nbsp;&nbsp;&nbsp;my $obj = $class-&gt;new(@args);
&nbsp;&nbsp;&nbsp;&nbsp;isa_ok $obj, $class, $object_name;

If @args is not given, an empty list will be used.

This function only works on new() and it assumes new() will return
just a single object which isa C&lt;$class&gt;.

=cut</pre></td></tr>
<tr><td class="h">679</td><td colspan="7"></td></tr><tr><td class="h">680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new_ok {</td></tr>
<tr><td class="h">681</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L681">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">682</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L682">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;croak(&quot;new_ok() must be given at least a class&quot;) unless @_;</td></tr>
<tr><td class="h">683</td><td colspan="7"></td></tr><tr><td class="h">684</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $class, $args, $object_name ) = @_;</td></tr>
<tr><td class="h">685</td><td colspan="7"></td></tr><tr><td class="h">686</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L686">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$args ||= [];</td></tr>
<tr><td class="h">687</td><td colspan="7"></td></tr><tr><td class="h">688</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $obj;</td></tr>
<tr><td class="h">689</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L689">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $success, $error ) = $tb-&gt;_try( sub { $obj = $class-&gt;new(@$args); 1 } );</td></tr>
<tr><td class="h">690</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L690">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($success) {</td></tr>
<tr><td class="h">691</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Test::Builder::Level = $Test::Builder::Level + 1;</td></tr>
<tr><td class="h">692</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa_ok $obj, $class, $object_name;</td></tr>
<tr><td class="h">693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">695</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L695">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class = &#39;undef&#39; if !defined $class;</td></tr>
<tr><td class="h">696</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;ok( 0, &quot;$class-&gt;new() died&quot; );</td></tr>
<tr><td class="h">697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&quot;&nbsp;&nbsp;&nbsp;&nbsp;Error was:&nbsp;&nbsp;$error&quot;);</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td colspan="7"></td></tr><tr><td class="h">700</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $obj;</td></tr>
<tr><td class="h">701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">702</td><td colspan="7"></td></tr><tr><td class="h">703 - 764</td><td colspan="6"></td><td class="s"><pre>=item B&lt;subtest&gt;

&nbsp;&nbsp;&nbsp;&nbsp;subtest $name =&gt; \&amp;code;

subtest() runs the &amp;code as its own little test with its own plan and
its own result.&nbsp;&nbsp;The main test counts this as a single test using the
result of the whole subtest to determine if its ok or not ok.

For example...

&nbsp;&nbsp;use Test::More tests =&gt; 3;
 
&nbsp;&nbsp;pass(&quot;First test&quot;);

&nbsp;&nbsp;subtest &#39;An example subtest&#39; =&gt; sub {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plan tests =&gt; 2;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass(&quot;This is a subtest&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass(&quot;So is this&quot;);
&nbsp;&nbsp;};

&nbsp;&nbsp;pass(&quot;Third test&quot;);

This would produce.

&nbsp;&nbsp;1..3
&nbsp;&nbsp;ok 1 - First test
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Subtest: An example subtest
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1..2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1 - This is a subtest
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 2 - So is this
&nbsp;&nbsp;ok 2 - An example subtest
&nbsp;&nbsp;ok 3 - Third test

A subtest may call &quot;skip_all&quot;.&nbsp;&nbsp;No tests will be run, but the subtest is
considered a skip.

&nbsp;&nbsp;subtest &#39;skippy&#39; =&gt; sub {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plan skip_all =&gt; &#39;cuz I said so&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass(&#39;this test will never be run&#39;);
&nbsp;&nbsp;};

Returns true if the subtest passed, false otherwise.

Due to how subtests work, you may omit a plan if you desire.&nbsp;&nbsp;This adds an
implicit C&lt;done_testing()&gt; to the end of your subtest.&nbsp;&nbsp;The following two
subtests are equivalent:

&nbsp;&nbsp;subtest &#39;subtest with implicit done_testing()&#39;, sub {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;subtests with an implicit done testing should work&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;... and support more than one test&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;... no matter how many tests are run&#39;;
&nbsp;&nbsp;};

&nbsp;&nbsp;subtest &#39;subtest with explicit done_testing()&#39;, sub {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;subtests with an explicit done testing should work&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;... and support more than one test&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ok 1, &#39;... no matter how many tests are run&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done_testing();
&nbsp;&nbsp;};

=cut</pre></td></tr>
<tr><td class="h">765</td><td colspan="7"></td></tr><tr><td class="h">766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub subtest {</td></tr>
<tr><td class="h">767</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L767">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($name, $subtests) = @_;</td></tr>
<tr><td class="h">768</td><td colspan="7"></td></tr><tr><td class="h">769</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">770</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;subtest(@_);</td></tr>
<tr><td class="h">771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">772</td><td colspan="7"></td></tr><tr><td class="h">773 - 788</td><td colspan="6"></td><td class="s"><pre>=item B&lt;pass&gt;

=item B&lt;fail&gt;

&nbsp;&nbsp;pass($test_name);
&nbsp;&nbsp;fail($test_name);

Sometimes you just want to say that the tests have passed.&nbsp;&nbsp;Usually
the case is you&#39;ve got some complicated condition that is difficult to
wedge into an ok().&nbsp;&nbsp;In this case, you can simply use pass() (to
declare the test ok) or fail (for not ok).&nbsp;&nbsp;They are synonyms for
ok(1) and ok(0).

Use these very, very, very sparingly.

=cut</pre></td></tr>
<tr><td class="h">789</td><td colspan="7"></td></tr><tr><td class="h">790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub pass (;$) {</td></tr>
<tr><td class="h">791</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L791">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">792</td><td colspan="7"></td></tr><tr><td class="h">793</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;ok( 1, @_ );</td></tr>
<tr><td class="h">794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">795</td><td colspan="7"></td></tr><tr><td class="h">796</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub fail (;$) {</td></tr>
<tr><td class="h">797</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L797">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">798</td><td colspan="7"></td></tr><tr><td class="h">799</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;ok( 0, @_ );</td></tr>
<tr><td class="h">800</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">801</td><td colspan="7"></td></tr><tr><td class="h">802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">803</td><td colspan="7"></td></tr><tr><td class="h">804</td><td colspan="7"></td></tr><tr><td class="h">805 - 841</td><td colspan="6"></td><td class="s"><pre>=head2 Module tests

Sometimes you want to test if a module, or a list of modules, can
successfully load.&nbsp;&nbsp;For example, you&#39;ll often want a first test which
simply loads all the modules in the distribution to make sure they
work before going on to do more complicated testing.

For such purposes we have C&lt;use_ok&gt; and C&lt;require_ok&gt;.

=over 4

=item B&lt;require_ok&gt;

&nbsp;&nbsp;&nbsp;require_ok($module);
&nbsp;&nbsp;&nbsp;require_ok($file);

Tries to C&lt;require&gt; the given $module or $file.&nbsp;&nbsp;If it loads
successfully, the test will pass.&nbsp;&nbsp;Otherwise it fails and displays the
load error.

C&lt;require_ok&gt; will guess whether the input is a module name or a
filename.

No exception will be thrown if the load fails.

&nbsp;&nbsp;&nbsp;&nbsp;# require Some::Module
&nbsp;&nbsp;&nbsp;&nbsp;require_ok &quot;Some::Module&quot;;

&nbsp;&nbsp;&nbsp;&nbsp;# require &quot;Some/File.pl&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;require_ok &quot;Some/File.pl&quot;;

&nbsp;&nbsp;&nbsp;&nbsp;# stop testing if any of your modules will not load
&nbsp;&nbsp;&nbsp;&nbsp;for my $module (@module) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require_ok $module or BAIL_OUT &quot;Can&#39;t load $module&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;}

=cut</pre></td></tr>
<tr><td class="h">842</td><td colspan="7"></td></tr><tr><td class="h">843</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub require_ok ($) {</td></tr>
<tr><td class="h">844</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L844">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($module) = shift;</td></tr>
<tr><td class="h">845</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">846</td><td colspan="7"></td></tr><tr><td class="h">847</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pack = caller;</td></tr>
<tr><td class="h">848</td><td colspan="7"></td></tr><tr><td class="h">849</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Try to determine if we&#39;ve been given a module name or file.</td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Module names must be barewords, files not.</td></tr>
<tr><td class="h">851</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L851">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$module = qq[&#39;$module&#39;] unless _is_module_name($module);</td></tr>
<tr><td class="h">852</td><td colspan="7"></td></tr><tr><td class="h">853</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code = &lt;&lt;REQUIRE;</td></tr>
<tr><td class="h">854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package $pack;</td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">require $module;</td></tr>
<tr><td class="h">856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">REQUIRE</td></tr>
<tr><td class="h">858</td><td colspan="7"></td></tr><tr><td class="h">859</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $eval_result, $eval_error ) = _eval($code);</td></tr>
<tr><td class="h">860</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $tb-&gt;ok( $eval_result, &quot;require $module;&quot; );</td></tr>
<tr><td class="h">861</td><td colspan="7"></td></tr><tr><td class="h">862</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L862">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">863</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chomp $eval_error;</td></tr>
<tr><td class="h">864</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&lt;&lt;DIAGNOSTIC);</td></tr>
<tr><td class="h">865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Tried to require &#39;$module&#39;.</td></tr>
<tr><td class="h">866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Error:&nbsp;&nbsp;$eval_error</td></tr>
<tr><td class="h">867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">868</td><td colspan="7"></td></tr><tr><td class="h">869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">870</td><td colspan="7"></td></tr><tr><td class="h">871</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">873</td><td colspan="7"></td></tr><tr><td class="h">874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_module_name {</td></tr>
<tr><td class="h">875</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L875">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $module = shift;</td></tr>
<tr><td class="h">876</td><td colspan="7"></td></tr><tr><td class="h">877</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Module names start with a letter.</td></tr>
<tr><td class="h">878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# End with an alphanumeric.</td></tr>
<tr><td class="h">879</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# The rest is an alphanumeric or ::</td></tr>
<tr><td class="h">880</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$module =~ s/\b::\b//g;</td></tr>
<tr><td class="h">881</td><td colspan="7"></td></tr><tr><td class="h">882</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L882">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $module =~ /^[a-zA-Z]\w*$/ ? 1 : 0;</td></tr>
<tr><td class="h">883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">884</td><td colspan="7"></td></tr><tr><td class="h">885</td><td colspan="7"></td></tr><tr><td class="h">886 - 935</td><td colspan="6"></td><td class="s"><pre>=item B&lt;use_ok&gt;

&nbsp;&nbsp;&nbsp;BEGIN { use_ok($module); }
&nbsp;&nbsp;&nbsp;BEGIN { use_ok($module, @imports); }

Like C&lt;require_ok&gt;, but it will C&lt;use&gt; the $module in question and
only loads modules, not files.

If you just want to test a module can be loaded, use C&lt;require_ok&gt;.

If you just want to load a module in a test, we recommend simply using
C&lt;use&gt; directly.&nbsp;&nbsp;It will cause the test to stop.

It&#39;s recommended that you run use_ok() inside a BEGIN block so its
functions are exported at compile-time and prototypes are properly
honored.

If @imports are given, they are passed through to the use.&nbsp;&nbsp;So this:

&nbsp;&nbsp;&nbsp;BEGIN { use_ok(&#39;Some::Module&#39;, qw(foo bar)) }

is like doing this:

&nbsp;&nbsp;&nbsp;use Some::Module qw(foo bar);

Version numbers can be checked like so:

&nbsp;&nbsp;&nbsp;# Just like &quot;use Some::Module 1.02&quot;
&nbsp;&nbsp;&nbsp;BEGIN { use_ok(&#39;Some::Module&#39;, 1.02) }

Don&#39;t try to do this:

&nbsp;&nbsp;&nbsp;BEGIN {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_ok(&#39;Some::Module&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...some code that depends on the use...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...happening at compile time...
&nbsp;&nbsp;&nbsp;}

because the notion of &quot;compile-time&quot; is relative.&nbsp;&nbsp;Instead, you want:

&nbsp;&nbsp;BEGIN { use_ok(&#39;Some::Module&#39;) }
&nbsp;&nbsp;BEGIN { ...some code that depends on the use... }

If you want the equivalent of C&lt;use Foo ()&gt;, use a module but not
import anything, use C&lt;require_ok&gt;.

&nbsp;&nbsp;BEGIN { require_ok &quot;Foo&quot; }

=cut</pre></td></tr>
<tr><td class="h">936</td><td colspan="7"></td></tr><tr><td class="h">937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub use_ok ($;@) {</td></tr>
<tr><td class="h">938</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L938">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $module, @imports ) = @_;</td></tr>
<tr><td class="h">939</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L939">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@imports = () unless @imports;</td></tr>
<tr><td class="h">940</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">941</td><td colspan="7"></td></tr><tr><td class="h">942</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $pack, $filename, $line ) = caller;</td></tr>
<tr><td class="h">943</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$filename =~ y/\n\r/_/; # so it doesn&#39;t run off the &quot;#line $line $f&quot; line</td></tr>
<tr><td class="h">944</td><td colspan="7"></td></tr><tr><td class="h">945</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code;</td></tr>
<tr><td class="h">946</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L946">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L946">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @imports == 1 and $imports[0] =~ /^\d+(?:\.\d+)?$/ ) {</td></tr>
<tr><td class="h">947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# probably a version check.&nbsp;&nbsp;Perl needs to see the bare number</td></tr>
<tr><td class="h">948</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for it to work with non-Exporter based modules.</td></tr>
<tr><td class="h">949</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$code = &lt;&lt;USE;</td></tr>
<tr><td class="h">950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package $pack;</td></tr>
<tr><td class="h">951</td><td colspan="7"></td></tr><tr><td class="h">952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#line $line $filename</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">use $module $imports[0];</td></tr>
<tr><td class="h">954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">USE</td></tr>
<tr><td class="h">956</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">958</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$code = &lt;&lt;USE;</td></tr>
<tr><td class="h">959</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package $pack;</td></tr>
<tr><td class="h">960</td><td colspan="7"></td></tr><tr><td class="h">961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#line $line $filename</td></tr>
<tr><td class="h">962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">use $module \@{\$args[0]};</td></tr>
<tr><td class="h">963</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">USE</td></tr>
<tr><td class="h">965</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">966</td><td colspan="7"></td></tr><tr><td class="h">967</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $eval_result, $eval_error ) = _eval( $code, \@imports );</td></tr>
<tr><td class="h">968</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $tb-&gt;ok( $eval_result, &quot;use $module;&quot; );</td></tr>
<tr><td class="h">969</td><td colspan="7"></td></tr><tr><td class="h">970</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L970">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">971</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chomp $eval_error;</td></tr>
<tr><td class="h">972</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$@ =~ s{^BEGIN failed--compilation aborted at .*$}</td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{BEGIN failed--compilation aborted at $filename line $line.}m;</td></tr>
<tr><td class="h">974</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag(&lt;&lt;DIAGNOSTIC);</td></tr>
<tr><td class="h">975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Tried to use &#39;$module&#39;.</td></tr>
<tr><td class="h">976</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Error:&nbsp;&nbsp;$eval_error</td></tr>
<tr><td class="h">977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">978</td><td colspan="7"></td></tr><tr><td class="h">979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">980</td><td colspan="7"></td></tr><tr><td class="h">981</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">982</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">983</td><td colspan="7"></td></tr><tr><td class="h">984</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _eval {</td></tr>
<tr><td class="h">985</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L985">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $code, @args ) = @_;</td></tr>
<tr><td class="h">986</td><td colspan="7"></td></tr><tr><td class="h">987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Work around oddities surrounding resetting of $@ by immediately</td></tr>
<tr><td class="h">988</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# storing it.</td></tr>
<tr><td class="h">989</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $sigdie, $eval_result, $eval_error );</td></tr>
<tr><td class="h">990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">991</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local( $@, $!, $SIG{__DIE__} );&nbsp;&nbsp;&nbsp;&nbsp;# isolate eval</td></tr>
<tr><td class="h">992</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$eval_result = eval $code;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">993</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$eval_error&nbsp;&nbsp;= $@;</td></tr>
<tr><td class="h">994</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L994">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sigdie&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $SIG{__DIE__} || undef;</td></tr>
<tr><td class="h">995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# make sure that $code got a chance to set $SIG{__DIE__}</td></tr>
<tr><td class="h">997</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L997">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$SIG{__DIE__} = $sigdie if defined $sigdie;</td></tr>
<tr><td class="h">998</td><td colspan="7"></td></tr><tr><td class="h">999</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( $eval_result, $eval_error );</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1001</td><td colspan="7"></td></tr><tr><td class="h">1002</td><td colspan="7"></td></tr><tr><td class="h">1003</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1004</td><td colspan="7"></td></tr><tr><td class="h">1005</td><td colspan="7"></td></tr><tr><td class="h">1006 - 1036</td><td colspan="6"></td><td class="s"><pre>=head2 Complex data structures

Not everything is a simple eq check or regex.&nbsp;&nbsp;There are times you
need to see if two data structures are equivalent.&nbsp;&nbsp;For these
instances Test::More provides a handful of useful functions.

B&lt;NOTE&gt; I&#39;m not quite sure what will happen with filehandles.

=over 4

=item B&lt;is_deeply&gt;

&nbsp;&nbsp;is_deeply( $got, $expected, $test_name );

Similar to is(), except that if $got and $expected are references, it
does a deep comparison walking each data structure to see if they are
equivalent.&nbsp;&nbsp;If the two structures are different, it will display the
place where they start differing.

is_deeply() compares the dereferenced values of references, the
references themselves (except for their type) are ignored.&nbsp;&nbsp;This means
aspects such as blessing and ties are not considered &quot;different&quot;.

is_deeply() currently has very limited handling of function reference
and globs.&nbsp;&nbsp;It merely checks if they have the same referent.&nbsp;&nbsp;This may
improve in the future.

L&lt;Test::Differences&gt; and L&lt;Test::Deep&gt; provide more in-depth functionality
along these lines.

=cut</pre></td></tr>
<tr><td class="h">1037</td><td colspan="7"></td></tr><tr><td class="h">1038</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our( @Data_Stack, %Refs_Seen );</td></tr>
<tr><td class="h">1039</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $DNE = bless [], &#39;Does::Not::Exist&#39;;</td></tr>
<tr><td class="h">1040</td><td colspan="7"></td></tr><tr><td class="h">1041</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dne {</td></tr>
<tr><td class="h">1042</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1042">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ref $_[0] eq ref $DNE;</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1044</td><td colspan="7"></td></tr><tr><td class="h">1045</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">## no critic (Subroutines::RequireArgUnpacking)</td></tr>
<tr><td class="h">1046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_deeply {</td></tr>
<tr><td class="h">1047</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1047">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">1048</td><td colspan="7"></td></tr><tr><td class="h">1049</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1049">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1049">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( @_ == 2 or @_ == 3 ) {</td></tr>
<tr><td class="h">1050</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $msg = &lt;&lt;&#39;WARNING&#39;;</td></tr>
<tr><td class="h">1051</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">is_deeply() takes two or three args, you gave %d.</td></tr>
<tr><td class="h">1052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">This usually means you passed an array or hash instead </td></tr>
<tr><td class="h">1053</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">of a reference to it</td></tr>
<tr><td class="h">1054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WARNING</td></tr>
<tr><td class="h">1055</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chop $msg;&nbsp;&nbsp;&nbsp;&nbsp;# clip off newline so carp() will put in line/file</td></tr>
<tr><td class="h">1056</td><td colspan="7"></td></tr><tr><td class="h">1057</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_carp sprintf $msg, scalar @_;</td></tr>
<tr><td class="h">1058</td><td colspan="7"></td></tr><tr><td class="h">1059</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $tb-&gt;ok(0);</td></tr>
<tr><td class="h">1060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1061</td><td colspan="7"></td></tr><tr><td class="h">1062</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $got, $expected, $name ) = @_;</td></tr>
<tr><td class="h">1063</td><td colspan="7"></td></tr><tr><td class="h">1064</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;_unoverload_str( \$expected, \$got );</td></tr>
<tr><td class="h">1065</td><td colspan="7"></td></tr><tr><td class="h">1066</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok;</td></tr>
<tr><td class="h">1067</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1067">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1067">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1067">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1067">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !ref $got and !ref $expected ) {&nbsp;&nbsp;&nbsp;&nbsp;# neither is a reference</td></tr>
<tr><td class="h">1068</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;is_eq( $got, $expected, $name );</td></tr>
<tr><td class="h">1069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( !ref $got xor !ref $expected ) {&nbsp;&nbsp;&nbsp;&nbsp;# one&#39;s a reference, one isn&#39;t</td></tr>
<tr><td class="h">1071</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;ok( 0, $name );</td></tr>
<tr><td class="h">1072</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag( _format_stack({ vals =&gt; [ $got, $expected ] }) );</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# both references</td></tr>
<tr><td class="h">1075</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local @Data_Stack = ();</td></tr>
<tr><td class="h">1076</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1076">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _deep_check( $got, $expected ) ) {</td></tr>
<tr><td class="h">1077</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;ok( 1, $name );</td></tr>
<tr><td class="h">1078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1080</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $tb-&gt;ok( 0, $name );</td></tr>
<tr><td class="h">1081</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;diag( _format_stack(@Data_Stack) );</td></tr>
<tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1084</td><td colspan="7"></td></tr><tr><td class="h">1085</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1086</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1087</td><td colspan="7"></td></tr><tr><td class="h">1088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _format_stack {</td></tr>
<tr><td class="h">1089</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1089">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my(@Stack) = @_;</td></tr>
<tr><td class="h">1090</td><td colspan="7"></td></tr><tr><td class="h">1091</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $var&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= &#39;$FOO&#39;;</td></tr>
<tr><td class="h">1092</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $did_arrow = 0;</td></tr>
<tr><td class="h">1093</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $entry (@Stack) {</td></tr>
<tr><td class="h">1094</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1094">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $entry-&gt;{type} || &#39;&#39;;</td></tr>
<tr><td class="h">1095</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $idx = $entry-&gt;{&#39;idx&#39;};</td></tr>
<tr><td class="h">1096</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1096">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1096">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1096">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">1097</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1097">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$var .= &quot;-&gt;&quot; unless $did_arrow++;</td></tr>
<tr><td class="h">1098</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$var .= &quot;{$idx}&quot;;</td></tr>
<tr><td class="h">1099</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">1101</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1101">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$var .= &quot;-&gt;&quot; unless $did_arrow++;</td></tr>
<tr><td class="h">1102</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$var .= &quot;[$idx]&quot;;</td></tr>
<tr><td class="h">1103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;REF&#39; ) {</td></tr>
<tr><td class="h">1105</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$var = &quot;\${$var}&quot;;</td></tr>
<tr><td class="h">1106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1108</td><td colspan="7"></td></tr><tr><td class="h">1109</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @vals = @{ $Stack[-1]{vals} }[ 0, 1 ];</td></tr>
<tr><td class="h">1110</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @vars = ();</td></tr>
<tr><td class="h">1111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( $vars[0] = $var ) =~ s/\$FOO/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\$got/;</td></tr>
<tr><td class="h">1112</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( $vars[1] = $var ) =~ s/\$FOO/\$expected/;</td></tr>
<tr><td class="h">1113</td><td colspan="7"></td></tr><tr><td class="h">1114</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out = &quot;Structures begin differing at:\n&quot;;</td></tr>
<tr><td class="h">1115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $idx ( 0 .. $#vals ) {</td></tr>
<tr><td class="h">1116</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $val = $vals[$idx];</td></tr>
<tr><td class="h">1117</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1117">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1117">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1117">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$vals[$idx]</td></tr>
<tr><td class="h">1118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= !defined $val ? &#39;undef&#39;</td></tr>
<tr><td class="h">1119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: _dne($val)&nbsp;&nbsp;&nbsp;&nbsp;? &quot;Does not exist&quot;</td></tr>
<tr><td class="h">1120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ref $val&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? &quot;$val&quot;</td></tr>
<tr><td class="h">1121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;$val&#39;&quot;;</td></tr>
<tr><td class="h">1122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1123</td><td colspan="7"></td></tr><tr><td class="h">1124</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;$vars[0] = $vals[0]\n&quot;;</td></tr>
<tr><td class="h">1125</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;$vars[1] = $vals[1]\n&quot;;</td></tr>
<tr><td class="h">1126</td><td colspan="7"></td></tr><tr><td class="h">1127</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out =~ s/^/&nbsp;&nbsp;&nbsp;&nbsp;/msg;</td></tr>
<tr><td class="h">1128</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $out;</td></tr>
<tr><td class="h">1129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1130</td><td colspan="7"></td></tr><tr><td class="h">1131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _type {</td></tr>
<tr><td class="h">1132</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1132">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $thing = shift;</td></tr>
<tr><td class="h">1133</td><td colspan="7"></td></tr><tr><td class="h">1134</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1134">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39; if !ref $thing;</td></tr>
<tr><td class="h">1135</td><td colspan="7"></td></tr><tr><td class="h">1136</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $type (qw(Regexp ARRAY HASH REF SCALAR GLOB CODE)) {</td></tr>
<tr><td class="h">1137</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1137">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $type if UNIVERSAL::isa( $thing, $type );</td></tr>
<tr><td class="h">1138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1139</td><td colspan="7"></td></tr><tr><td class="h">1140</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39;;</td></tr>
<tr><td class="h">1141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1142</td><td colspan="7"></td></tr><tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1144</td><td colspan="7"></td></tr><tr><td class="h">1145</td><td colspan="7"></td></tr><tr><td class="h">1146 - 1196</td><td colspan="6"></td><td class="s"><pre>=head2 Diagnostics

If you pick the right test function, you&#39;ll usually get a good idea of
what went wrong when it failed.&nbsp;&nbsp;But sometimes it doesn&#39;t work out
that way.&nbsp;&nbsp;So here we have ways for you to write your own diagnostic
messages which are safer than just C&lt;print STDERR&gt;.

=over 4

=item B&lt;diag&gt;

&nbsp;&nbsp;diag(@diagnostic_message);

Prints a diagnostic message which is guaranteed not to interfere with
test output.&nbsp;&nbsp;Like C&lt;print&gt; @diagnostic_message is simply concatenated
together.

Returns false, so as to preserve failure.

Handy for this sort of thing:

&nbsp;&nbsp;&nbsp;&nbsp;ok( grep(/foo/, @users), &quot;There&#39;s a foo user&quot; ) or
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diag(&quot;Since there&#39;s no foo, check that /etc/bar is set up right&quot;);

which would produce:

&nbsp;&nbsp;&nbsp;&nbsp;not ok 42 - There&#39;s a foo user
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;Failed test &#39;There&#39;s a foo user&#39;
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;in foo.t at line 52.
&nbsp;&nbsp;&nbsp;&nbsp;# Since there&#39;s no foo, check that /etc/bar is set up right.

You might remember C&lt;ok() or diag()&gt; with the mnemonic C&lt;open() or
die()&gt;.

B&lt;NOTE&gt; The exact formatting of the diagnostic output is still
changing, but it is guaranteed that whatever you throw at it won&#39;t
interfere with the test.

=item B&lt;note&gt;

&nbsp;&nbsp;note(@diagnostic_message);

Like diag(), except the message will not be seen when the test is run
in a harness.&nbsp;&nbsp;It will only be visible in the verbose TAP stream.

Handy for putting in notes which might be useful for debugging, but
don&#39;t indicate a problem.

&nbsp;&nbsp;&nbsp;&nbsp;note(&quot;Tempfile is $tempfile&quot;);

=cut</pre></td></tr>
<tr><td class="h">1197</td><td colspan="7"></td></tr><tr><td class="h">1198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub diag {</td></tr>
<tr><td class="h">1199</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1199">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return Test::More-&gt;builder-&gt;diag(@_);</td></tr>
<tr><td class="h">1200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1201</td><td colspan="7"></td></tr><tr><td class="h">1202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub note {</td></tr>
<tr><td class="h">1203</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1203">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return Test::More-&gt;builder-&gt;note(@_);</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1205</td><td colspan="7"></td></tr><tr><td class="h">1206 - 1222</td><td colspan="6"></td><td class="s"><pre>=item B&lt;explain&gt;

&nbsp;&nbsp;my @dump = explain @diagnostic_message;

Will dump the contents of any references in a human readable format.
Usually you want to pass this into C&lt;note&gt; or C&lt;diag&gt;.

Handy for things like...

&nbsp;&nbsp;&nbsp;&nbsp;is_deeply($have, $want) || diag explain $have;

or

&nbsp;&nbsp;&nbsp;&nbsp;note explain \%args;
&nbsp;&nbsp;&nbsp;&nbsp;Some::Class-&gt;method(%args);

=cut</pre></td></tr>
<tr><td class="h">1223</td><td colspan="7"></td></tr><tr><td class="h">1224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub explain {</td></tr>
<tr><td class="h">1225</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1225">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return Test::More-&gt;builder-&gt;explain(@_);</td></tr>
<tr><td class="h">1226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1227</td><td colspan="7"></td></tr><tr><td class="h">1228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1229</td><td colspan="7"></td></tr><tr><td class="h">1230</td><td colspan="7"></td></tr><tr><td class="h">1231 - 1288</td><td colspan="6"></td><td class="s"><pre>=head2 Conditional tests

Sometimes running a test under certain conditions will cause the
test script to die.&nbsp;&nbsp;A certain function or method isn&#39;t implemented
(such as fork() on MacOS), some resource isn&#39;t available (like a 
net connection) or a module isn&#39;t available.&nbsp;&nbsp;In these cases it&#39;s
necessary to skip tests, or declare that they are supposed to fail
but will work in the future (a todo test).

For more details on the mechanics of skip and todo tests see
L&lt;Test::Harness&gt;.

The way Test::More handles this is with a named block.&nbsp;&nbsp;Basically, a
block of tests which can be skipped over or made todo.&nbsp;&nbsp;It&#39;s best if I
just show you...

=over 4

=item B&lt;SKIP: BLOCK&gt;

&nbsp;&nbsp;SKIP: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip $why, $how_many if $condition;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...normal testing code goes here...
&nbsp;&nbsp;}

This declares a block of tests that might be skipped, $how_many tests
there are, $why and under what $condition to skip them.&nbsp;&nbsp;An example is
the easiest way to illustrate:

&nbsp;&nbsp;&nbsp;&nbsp;SKIP: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval { require HTML::Lint };

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip &quot;HTML::Lint not installed&quot;, 2 if $@;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $lint = new HTML::Lint;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa_ok( $lint, &quot;HTML::Lint&quot; );

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lint-&gt;parse( $html );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( $lint-&gt;errors, 0, &quot;No errors found in HTML&quot; );
&nbsp;&nbsp;&nbsp;&nbsp;}

If the user does not have HTML::Lint installed, the whole block of
code I&lt;won&#39;t be run at all&gt;.&nbsp;&nbsp;Test::More will output special ok&#39;s
which Test::Harness interprets as skipped, but passing, tests.

It&#39;s important that $how_many accurately reflects the number of tests
in the SKIP block so the # of tests run will match up with your plan.
If your plan is C&lt;no_plan&gt; $how_many is optional and will default to 1.

It&#39;s perfectly safe to nest SKIP blocks.&nbsp;&nbsp;Each SKIP block must have
the label C&lt;SKIP&gt;, or Test::More can&#39;t work its magic.

You don&#39;t skip tests which are failing because there&#39;s a bug in your
program, or for which you don&#39;t yet have code written.&nbsp;&nbsp;For that you
use TODO.&nbsp;&nbsp;Read on.

=cut</pre></td></tr>
<tr><td class="h">1289</td><td colspan="7"></td></tr><tr><td class="h">1290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">## no critic (Subroutines::RequireFinalReturn)</td></tr>
<tr><td class="h">1291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub skip {</td></tr>
<tr><td class="h">1292</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1292">0</a></div></td><td><div class="c0">0</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $why, $how_many ) = @_;</td></tr>
<tr><td class="h">1293</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">1294</td><td colspan="7"></td></tr><tr><td class="h">1295</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1295">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $how_many ) {</td></tr>
<tr><td class="h">1296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $how_many can only be avoided when no_plan is in use.</td></tr>
<tr><td class="h">1297</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1297">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_carp &quot;skip() needs to know \$how_many tests are in the block&quot;</td></tr>
<tr><td class="h">1298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $tb-&gt;has_plan eq &#39;no_plan&#39;;</td></tr>
<tr><td class="h">1299</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$how_many = 1;</td></tr>
<tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1301</td><td colspan="7"></td></tr><tr><td class="h">1302</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1302">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1302">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $how_many and $how_many =~ /\D/ ) {</td></tr>
<tr><td class="h">1303</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_carp</td></tr>
<tr><td class="h">1304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;skip() was passed a non-numeric number of tests.&nbsp;&nbsp;Did you get the arguments backwards?&quot;;</td></tr>
<tr><td class="h">1305</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$how_many = 1;</td></tr>
<tr><td class="h">1306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1307</td><td colspan="7"></td></tr><tr><td class="h">1308</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for( 1 .. $how_many ) {</td></tr>
<tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;skip($why);</td></tr>
<tr><td class="h">1310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1311</td><td colspan="7"></td></tr><tr><td class="h">1312</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1312">44</a></div></td><td></td><td><div>183</div><div>48</div><div>5298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;exiting&#39;;</td></tr>
<tr><td class="h">1313</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;last SKIP;</td></tr>
<tr><td class="h">1314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1315</td><td colspan="7"></td></tr><tr><td class="h">1316 - 1372</td><td colspan="6"></td><td class="s"><pre>=item B&lt;TODO: BLOCK&gt;

&nbsp;&nbsp;&nbsp;&nbsp;TODO: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $TODO = $why if $condition;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...normal testing code goes here...
&nbsp;&nbsp;&nbsp;&nbsp;}

Declares a block of tests you expect to fail and $why.&nbsp;&nbsp;Perhaps it&#39;s
because you haven&#39;t fixed a bug or haven&#39;t finished a new feature:

&nbsp;&nbsp;&nbsp;&nbsp;TODO: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $TODO = &quot;URI::Geller not finished&quot;;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $card = &quot;Eight of clubs&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( URI::Geller-&gt;your_card, $card, &#39;Is THIS your card?&#39; );

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $spoon;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URI::Geller-&gt;bend_spoon;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is( $spoon, &#39;bent&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;Spoon bending, that&#39;s original&quot; );
&nbsp;&nbsp;&nbsp;&nbsp;}

With a todo block, the tests inside are expected to fail.&nbsp;&nbsp;Test::More
will run the tests normally, but print out special flags indicating
they are &quot;todo&quot;.&nbsp;&nbsp;Test::Harness will interpret failures as being ok.
Should anything succeed, it will report it as an unexpected success.
You then know the thing you had todo is done and can remove the
TODO flag.

The nice part about todo tests, as opposed to simply commenting out a
block of tests, is it&#39;s like having a programmatic todo list.&nbsp;&nbsp;You know
how much work is left to be done, you&#39;re aware of what bugs there are,
and you&#39;ll know immediately when they&#39;re fixed.

Once a todo test starts succeeding, simply move it outside the block.
When the block is empty, delete it.


=item B&lt;todo_skip&gt;

&nbsp;&nbsp;&nbsp;&nbsp;TODO: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;todo_skip $why, $how_many if $condition;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...normal testing code...
&nbsp;&nbsp;&nbsp;&nbsp;}

With todo tests, it&#39;s best to have the tests actually run.&nbsp;&nbsp;That way
you&#39;ll know when they start passing.&nbsp;&nbsp;Sometimes this isn&#39;t possible.
Often a failing test will cause the whole program to die or hang, even
inside an C&lt;eval BLOCK&gt; with and using C&lt;alarm&gt;.&nbsp;&nbsp;In these extreme
cases you have no choice but to skip over the broken tests entirely.

The syntax and behavior is similar to a C&lt;SKIP: BLOCK&gt; except the
tests will be marked as failing but todo.&nbsp;&nbsp;Test::Harness will
interpret them as passing.

=cut</pre></td></tr>
<tr><td class="h">1373</td><td colspan="7"></td></tr><tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_skip {</td></tr>
<tr><td class="h">1375</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1375">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $why, $how_many ) = @_;</td></tr>
<tr><td class="h">1376</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">1377</td><td colspan="7"></td></tr><tr><td class="h">1378</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1378">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $how_many ) {</td></tr>
<tr><td class="h">1379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $how_many can only be avoided when no_plan is in use.</td></tr>
<tr><td class="h">1380</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1380">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_carp &quot;todo_skip() needs to know \$how_many tests are in the block&quot;</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $tb-&gt;has_plan eq &#39;no_plan&#39;;</td></tr>
<tr><td class="h">1382</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$how_many = 1;</td></tr>
<tr><td class="h">1383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1384</td><td colspan="7"></td></tr><tr><td class="h">1385</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for( 1 .. $how_many ) {</td></tr>
<tr><td class="h">1386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;todo_skip($why);</td></tr>
<tr><td class="h">1387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1388</td><td colspan="7"></td></tr><tr><td class="h">1389</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1389">44</a></div></td><td></td><td><div>179</div><div>44</div><div>40493</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;exiting&#39;;</td></tr>
<tr><td class="h">1390</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;last TODO;</td></tr>
<tr><td class="h">1391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1392</td><td colspan="7"></td></tr><tr><td class="h">1393 - 1427</td><td colspan="6"></td><td class="s"><pre>=item When do I use SKIP vs. TODO?

B&lt;If it&#39;s something the user might not be able to do&gt;, use SKIP.
This includes optional modules that aren&#39;t installed, running under
an OS that doesn&#39;t have some feature (like fork() or symlinks), or maybe
you need an Internet connection and one isn&#39;t available.

B&lt;If it&#39;s something the programmer hasn&#39;t done yet&gt;, use TODO.&nbsp;&nbsp;This
is for any code you haven&#39;t written yet, or bugs you have yet to fix,
but want to put tests in your testing script (always a good idea).


=back


=head2 Test control

=over 4

=item B&lt;BAIL_OUT&gt;

&nbsp;&nbsp;&nbsp;&nbsp;BAIL_OUT($reason);

Indicates to the harness that things are going so badly all testing
should terminate.&nbsp;&nbsp;This includes the running of any additional test scripts.

This is typically used when testing cannot continue such as a critical
module failing to compile or a necessary external utility not being
available such as a database connection failing.

The test will exit with 255.

For even better control look at L&lt;Test::Most&gt;.

=cut</pre></td></tr>
<tr><td class="h">1428</td><td colspan="7"></td></tr><tr><td class="h">1429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub BAIL_OUT {</td></tr>
<tr><td class="h">1430</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1430">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $reason = shift;</td></tr>
<tr><td class="h">1431</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= Test::More-&gt;builder;</td></tr>
<tr><td class="h">1432</td><td colspan="7"></td></tr><tr><td class="h">1433</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;BAIL_OUT($reason);</td></tr>
<tr><td class="h">1434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1435</td><td colspan="7"></td></tr><tr><td class="h">1436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1437</td><td colspan="7"></td></tr><tr><td class="h">1438</td><td colspan="7"></td></tr><tr><td class="h">1439 - 1466</td><td colspan="6"></td><td class="s"><pre>=head2 Discouraged comparison functions

The use of the following functions is discouraged as they are not
actually testing functions and produce no diagnostics to help figure
out what went wrong.&nbsp;&nbsp;They were written before is_deeply() existed
because I couldn&#39;t figure out how to display a useful diff of two
arbitrary data structures.

These functions are usually used inside an ok().

&nbsp;&nbsp;&nbsp;&nbsp;ok( eq_array(\@got, \@expected) );

C&lt;is_deeply()&gt; can do that better and with diagnostics.&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;is_deeply( \@got, \@expected );

They may be deprecated in future versions.

=over 4

=item B&lt;eq_array&gt;

&nbsp;&nbsp;my $is_eq = eq_array(\@got, \@expected);

Checks if two arrays are equivalent.&nbsp;&nbsp;This is a deep check, so
multi-level structures are handled correctly.

=cut</pre></td></tr>
<tr><td class="h">1467</td><td colspan="7"></td></tr><tr><td class="h">1468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&#39;#</td></tr>
<tr><td class="h">1469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub eq_array {</td></tr>
<tr><td class="h">1470</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1470">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local @Data_Stack = ();</td></tr>
<tr><td class="h">1471</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_deep_check(@_);</td></tr>
<tr><td class="h">1472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1473</td><td colspan="7"></td></tr><tr><td class="h">1474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _eq_array {</td></tr>
<tr><td class="h">1475</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1475">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $a1, $a2 ) = @_;</td></tr>
<tr><td class="h">1476</td><td colspan="7"></td></tr><tr><td class="h">1477</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1477">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( grep _type($_) ne &#39;ARRAY&#39;, $a1, $a2 ) {</td></tr>
<tr><td class="h">1478</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;eq_array passed a non-array ref&quot;;</td></tr>
<tr><td class="h">1479</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1481</td><td colspan="7"></td></tr><tr><td class="h">1482</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1482">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if $a1 eq $a2;</td></tr>
<tr><td class="h">1483</td><td colspan="7"></td></tr><tr><td class="h">1484</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = 1;</td></tr>
<tr><td class="h">1485</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1485">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $max = $#$a1 &gt; $#$a2 ? $#$a1 : $#$a2;</td></tr>
<tr><td class="h">1486</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for( 0 .. $max ) {</td></tr>
<tr><td class="h">1487</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1487">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $e1 = $_ &gt; $#$a1 ? $DNE : $a1-&gt;[$_];</td></tr>
<tr><td class="h">1488</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1488">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $e2 = $_ &gt; $#$a2 ? $DNE : $a2-&gt;[$_];</td></tr>
<tr><td class="h">1489</td><td colspan="7"></td></tr><tr><td class="h">1490</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1490">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if _equal_nonrefs($e1, $e2);</td></tr>
<tr><td class="h">1491</td><td colspan="7"></td></tr><tr><td class="h">1492</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; &#39;ARRAY&#39;, idx =&gt; $_, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1493</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _deep_check( $e1, $e2 );</td></tr>
<tr><td class="h">1494</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1494">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @Data_Stack if $ok;</td></tr>
<tr><td class="h">1495</td><td colspan="7"></td></tr><tr><td class="h">1496</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1496">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless $ok;</td></tr>
<tr><td class="h">1497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1498</td><td colspan="7"></td></tr><tr><td class="h">1499</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1501</td><td colspan="7"></td></tr><tr><td class="h">1502</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _equal_nonrefs {</td></tr>
<tr><td class="h">1503</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1503">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $e1, $e2 ) = @_;</td></tr>
<tr><td class="h">1504</td><td colspan="7"></td></tr><tr><td class="h">1505</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1505">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1505">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if ref $e1 or ref $e2;</td></tr>
<tr><td class="h">1506</td><td colspan="7"></td></tr><tr><td class="h">1507</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1507">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( defined $e1 ) {</td></tr>
<tr><td class="h">1508</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1508">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1508">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1 if defined $e2 and $e1 eq $e2;</td></tr>
<tr><td class="h">1509</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1511</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1511">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1 if !defined $e2;</td></tr>
<tr><td class="h">1512</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1513</td><td colspan="7"></td></tr><tr><td class="h">1514</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1516</td><td colspan="7"></td></tr><tr><td class="h">1517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _deep_check {</td></tr>
<tr><td class="h">1518</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1518">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $e1, $e2 ) = @_;</td></tr>
<tr><td class="h">1519</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tb = Test::More-&gt;builder;</td></tr>
<tr><td class="h">1520</td><td colspan="7"></td></tr><tr><td class="h">1521</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = 0;</td></tr>
<tr><td class="h">1522</td><td colspan="7"></td></tr><tr><td class="h">1523</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Effectively turn %Refs_Seen into a stack.&nbsp;&nbsp;This avoids picking up</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the same referenced used twice (such as [\$a, \$a]) to be considered</td></tr>
<tr><td class="h">1525</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# circular.</td></tr>
<tr><td class="h">1526</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local %Refs_Seen = %Refs_Seen;</td></tr>
<tr><td class="h">1527</td><td colspan="7"></td></tr><tr><td class="h">1528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1529</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;_unoverload_str( \$e1, \$e2 );</td></tr>
<tr><td class="h">1530</td><td colspan="7"></td></tr><tr><td class="h">1531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Either they&#39;re both references or both not.</td></tr>
<tr><td class="h">1532</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1532">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $same_ref = !( !ref $e1 xor !ref $e2 );</td></tr>
<tr><td class="h">1533</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1533">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $not_ref = ( !ref $e1 and !ref $e2 );</td></tr>
<tr><td class="h">1534</td><td colspan="7"></td></tr><tr><td class="h">1535</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1535">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1535">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1535">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1535">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1535">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1535">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1535">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1535">0</a></div><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--condition.html#L1535">0</a></div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $e1 xor defined $e2 ) {</td></tr>
<tr><td class="h">1536</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 0;</td></tr>
<tr><td class="h">1537</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( !defined $e1 and !defined $e2 ) {</td></tr>
<tr><td class="h">1539</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Shortcut if they&#39;re both undefined.</td></tr>
<tr><td class="h">1540</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 1;</td></tr>
<tr><td class="h">1541</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( _dne($e1) xor _dne($e2) ) {</td></tr>
<tr><td class="h">1543</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 0;</td></tr>
<tr><td class="h">1544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $same_ref and( $e1 eq $e2 ) ) {</td></tr>
<tr><td class="h">1546</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 1;</td></tr>
<tr><td class="h">1547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif($not_ref) {</td></tr>
<tr><td class="h">1549</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; &#39;&#39;, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1550</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 0;</td></tr>
<tr><td class="h">1551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1553</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1553">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $Refs_Seen{$e1} ) {</td></tr>
<tr><td class="h">1554</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $Refs_Seen{$e1} eq $e2;</td></tr>
<tr><td class="h">1555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1557</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Refs_Seen{$e1} = &quot;$e2&quot;;</td></tr>
<tr><td class="h">1558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1559</td><td colspan="7"></td></tr><tr><td class="h">1560</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = _type($e1);</td></tr>
<tr><td class="h">1561</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1561">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type = &#39;DIFFERENT&#39; unless _type($e2) eq $type;</td></tr>
<tr><td class="h">1562</td><td colspan="7"></td></tr><tr><td class="h">1563</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1563">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;DIFFERENT&#39; ) {</td></tr>
<tr><td class="h">1564</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; $type, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1565</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 0;</td></tr>
<tr><td class="h">1566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">1568</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _eq_array( $e1, $e2 );</td></tr>
<tr><td class="h">1569</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">1571</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _eq_hash( $e1, $e2 );</td></tr>
<tr><td class="h">1572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;REF&#39; ) {</td></tr>
<tr><td class="h">1574</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; $type, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1575</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _deep_check( $$e1, $$e2 );</td></tr>
<tr><td class="h">1576</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1576">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @Data_Stack if $ok;</td></tr>
<tr><td class="h">1577</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">1579</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; &#39;REF&#39;, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1580</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _deep_check( $$e1, $$e2 );</td></tr>
<tr><td class="h">1581</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1581">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @Data_Stack if $ok;</td></tr>
<tr><td class="h">1582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif($type) {</td></tr>
<tr><td class="h">1584</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; $type, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1585</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = 0;</td></tr>
<tr><td class="h">1586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1587</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1588</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_whoa( 1, &quot;No type in _deep_check&quot; );</td></tr>
<tr><td class="h">1589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1591</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1592</td><td colspan="7"></td></tr><tr><td class="h">1593</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1595</td><td colspan="7"></td></tr><tr><td class="h">1596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _whoa {</td></tr>
<tr><td class="h">1597</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1597">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $check, $desc ) = @_;</td></tr>
<tr><td class="h">1598</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1598">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($check) {</td></tr>
<tr><td class="h">1599</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &lt;&lt;&quot;WHOA&quot;;</td></tr>
<tr><td class="h">1600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA!&nbsp;&nbsp;$desc</td></tr>
<tr><td class="h">1601</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">This should never happen!&nbsp;&nbsp;Please contact the author immediately!</td></tr>
<tr><td class="h">1602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA</td></tr>
<tr><td class="h">1603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1604</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1605</td><td colspan="7"></td></tr><tr><td class="h">1606 - 1613</td><td colspan="6"></td><td class="s"><pre>=item B&lt;eq_hash&gt;

&nbsp;&nbsp;my $is_eq = eq_hash(\%got, \%expected);

Determines if the two hashes contain the same keys and values.&nbsp;&nbsp;This
is a deep check.

=cut</pre></td></tr>
<tr><td class="h">1614</td><td colspan="7"></td></tr><tr><td class="h">1615</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub eq_hash {</td></tr>
<tr><td class="h">1616</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1616">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local @Data_Stack = ();</td></tr>
<tr><td class="h">1617</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _deep_check(@_);</td></tr>
<tr><td class="h">1618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1619</td><td colspan="7"></td></tr><tr><td class="h">1620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _eq_hash {</td></tr>
<tr><td class="h">1621</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1621">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $a1, $a2 ) = @_;</td></tr>
<tr><td class="h">1622</td><td colspan="7"></td></tr><tr><td class="h">1623</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1623">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( grep _type($_) ne &#39;HASH&#39;, $a1, $a2 ) {</td></tr>
<tr><td class="h">1624</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;eq_hash passed a non-hash ref&quot;;</td></tr>
<tr><td class="h">1625</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1627</td><td colspan="7"></td></tr><tr><td class="h">1628</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1628">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if $a1 eq $a2;</td></tr>
<tr><td class="h">1629</td><td colspan="7"></td></tr><tr><td class="h">1630</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = 1;</td></tr>
<tr><td class="h">1631</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1631">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $bigger = keys %$a1 &gt; keys %$a2 ? $a1 : $a2;</td></tr>
<tr><td class="h">1632</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $k ( keys %$bigger ) {</td></tr>
<tr><td class="h">1633</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1633">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $e1 = exists $a1-&gt;{$k} ? $a1-&gt;{$k} : $DNE;</td></tr>
<tr><td class="h">1634</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1634">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $e2 = exists $a2-&gt;{$k} ? $a2-&gt;{$k} : $DNE;</td></tr>
<tr><td class="h">1635</td><td colspan="7"></td></tr><tr><td class="h">1636</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1636">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if _equal_nonrefs($e1, $e2);</td></tr>
<tr><td class="h">1637</td><td colspan="7"></td></tr><tr><td class="h">1638</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @Data_Stack, { type =&gt; &#39;HASH&#39;, idx =&gt; $k, vals =&gt; [ $e1, $e2 ] };</td></tr>
<tr><td class="h">1639</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = _deep_check( $e1, $e2 );</td></tr>
<tr><td class="h">1640</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1640">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @Data_Stack if $ok;</td></tr>
<tr><td class="h">1641</td><td colspan="7"></td></tr><tr><td class="h">1642</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1642">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless $ok;</td></tr>
<tr><td class="h">1643</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1644</td><td colspan="7"></td></tr><tr><td class="h">1645</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1646</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1647</td><td colspan="7"></td></tr><tr><td class="h">1648 - 1672</td><td colspan="6"></td><td class="s"><pre>=item B&lt;eq_set&gt;

&nbsp;&nbsp;my $is_eq = eq_set(\@got, \@expected);

Similar to eq_array(), except the order of the elements is B&lt;not&gt;
important.&nbsp;&nbsp;This is a deep check, but the irrelevancy of order only
applies to the top level.

&nbsp;&nbsp;&nbsp;&nbsp;ok( eq_set(\@got, \@expected) );

Is better written:

&nbsp;&nbsp;&nbsp;&nbsp;is_deeply( [sort @got], [sort @expected] );

B&lt;NOTE&gt; By historical accident, this is not a true set comparison.
While the order of elements does not matter, duplicate elements do.

B&lt;NOTE&gt; eq_set() does not know how to deal with references at the top
level.&nbsp;&nbsp;The following is an example of a comparison which might not work:

&nbsp;&nbsp;&nbsp;&nbsp;eq_set([\1, \2], [\2, \1]);

L&lt;Test::Deep&gt; contains much better set comparison functions.

=cut</pre></td></tr>
<tr><td class="h">1673</td><td colspan="7"></td></tr><tr><td class="h">1674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub eq_set {</td></tr>
<tr><td class="h">1675</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1675">0</a></div></td><td><div class="c3">1</div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $a1, $a2 ) = @_;</td></tr>
<tr><td class="h">1676</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--branch.html#L1676">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless @$a1 == @$a2;</td></tr>
<tr><td class="h">1677</td><td colspan="7"></td></tr><tr><td class="h">1678</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-More-pm--subroutine.html#L1678">44</a></div></td><td></td><td><div>197</div><div>53</div><div>4830</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;uninitialized&#39;;</td></tr>
<tr><td class="h">1679</td><td colspan="7"></td></tr><tr><td class="h">1680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# It really doesn&#39;t matter how we sort them, as long as both arrays are</td></tr>
<tr><td class="h">1681</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# sorted with the same algorithm.</td></tr>
<tr><td class="h">1682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Ensure that references are not accidentally treated the same as a</td></tr>
<tr><td class="h">1684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# string containing the reference.</td></tr>
<tr><td class="h">1685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Have to inline the sort routine due to a threading/sort bug.</td></tr>
<tr><td class="h">1687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See [rt.cpan.org 6782]</td></tr>
<tr><td class="h">1688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# I don&#39;t know how references would be sorted so we just don&#39;t sort</td></tr>
<tr><td class="h">1690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# them.&nbsp;&nbsp;This means eq_set doesn&#39;t really work with refs.</td></tr>
<tr><td class="h">1691</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return eq_array(</td></tr>
<tr><td class="h">1692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ grep( ref, @$a1 ), sort( grep( !ref, @$a1 ) ) ],</td></tr>
<tr><td class="h">1693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ grep( ref, @$a2 ), sort( grep( !ref, @$a2 ) ) ],</td></tr>
<tr><td class="h">1694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1696</td><td colspan="7"></td></tr><tr><td class="h">1697</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1698</td><td colspan="7"></td></tr><tr><td class="h">1699</td><td colspan="7"></td></tr><tr><td class="h">1700 - 1911</td><td colspan="6"></td><td class="s"><pre>=head2 Extending and Embedding Test::More

Sometimes the Test::More interface isn&#39;t quite enough.&nbsp;&nbsp;Fortunately,
Test::More is built on top of Test::Builder which provides a single,
unified backend for any test library to use.&nbsp;&nbsp;This means two test
libraries which both use Test::Builder B&lt;can be used together in the
same program&gt;.

If you simply want to do a little tweaking of how the tests behave,
you can access the underlying Test::Builder object like so:

=over 4

=item B&lt;builder&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $test_builder = Test::More-&gt;builder;

Returns the Test::Builder object underlying Test::More for you to play
with.


=back


=head1 EXIT CODES

If all your tests passed, Test::Builder will exit with zero (which is
normal).&nbsp;&nbsp;If anything failed it will exit with how many failed.&nbsp;&nbsp;If
you run less (or more) tests than you planned, the missing (or extras)
will be considered failures.&nbsp;&nbsp;If no tests were ever run Test::Builder
will throw a warning and exit with 255.&nbsp;&nbsp;If the test died, even after
having successfully completed all its tests, it will still be
considered a failure and will exit with 255.

So the exit codes are...

&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all tests successful
&nbsp;&nbsp;&nbsp;&nbsp;255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test died or all passed but wrong # of tests run
&nbsp;&nbsp;&nbsp;&nbsp;any other number&nbsp;&nbsp;&nbsp;&nbsp;how many failed (including missing or extras)

If you fail more than 254 tests, it will be reported as 254.

B&lt;NOTE&gt;&nbsp;&nbsp;This behavior may go away in future versions.


=head1 COMPATIBILITY

Test::More works with Perls as old as 5.8.1.

Thread support is not very reliable before 5.10.1, but that&#39;s
because threads are not very reliable before 5.10.1.

Although Test::More has been a core module in versions of Perl since 5.6.2, Test::More has evolved since then, and not all of the features you&#39;re used to will be present in the shipped version of Test::More. If you are writing a module, don&#39;t forget to indicate in your package metadata the minimum version of Test::More that you require. For instance, if you want to use C&lt;done_testing()&gt; but want your test script to run on Perl 5.10.0, you will need to explicitly require Test::More &gt; 0.88.

Key feature milestones include:

=over 4

=item subtests

Subtests were released in Test::More 0.94, which came with Perl 5.12.0. Subtests did not implicitly call C&lt;done_testing()&gt; until 0.96; the first Perl with that fix was Perl 5.14.0 with 0.98.

=item C&lt;done_testing()&gt;

This was released in Test::More 0.88 and first shipped with Perl in 5.10.1 as part of Test::More 0.92. 

=item C&lt;cmp_ok()&gt;

Although C&lt;cmp_ok()&gt; was introduced in 0.40, 0.86 fixed an important bug to make it safe for overloaded objects; the fixed first shipped with Perl in 5.10.1 as part of Test::More 0.92.

=item C&lt;new_ok()&gt; C&lt;note()&gt; and C&lt;explain()&gt;

These were was released in Test::More 0.82, and first shipped with Perl in 5.10.1 as part of Test::More 0.92. 

=back

There is a full version history in the Changes file, and the Test::More versions included as core can be found using L&lt;Module::CoreList&gt;:

&nbsp;&nbsp;&nbsp;&nbsp;$ corelist -a Test::More


=head1 CAVEATS and NOTES

=over 4

=item utf8 / &quot;Wide character in print&quot;

If you use utf8 or other non-ASCII characters with Test::More you
might get a &quot;Wide character in print&quot; warning.&nbsp;&nbsp;Using C&lt;binmode
STDOUT, &quot;:utf8&quot;&gt; will not fix it.&nbsp;&nbsp;Test::Builder (which powers
Test::More) duplicates STDOUT and STDERR.&nbsp;&nbsp;So any changes to them,
including changing their output disciplines, will not be seem by
Test::More.

One work around is to apply encodings to STDOUT and STDERR as early
as possible and before Test::More (or any other Test module) loads.

&nbsp;&nbsp;&nbsp;&nbsp;use open &#39;:std&#39;, &#39;:encoding(utf8)&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;use Test::More;

A more direct work around is to change the filehandles used by
Test::Builder.

&nbsp;&nbsp;&nbsp;&nbsp;my $builder = Test::More-&gt;builder;
&nbsp;&nbsp;&nbsp;&nbsp;binmode $builder-&gt;output,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:encoding(utf8)&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;binmode $builder-&gt;failure_output, &quot;:encoding(utf8)&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;binmode $builder-&gt;todo_output,&nbsp;&nbsp;&nbsp;&nbsp;&quot;:encoding(utf8)&quot;;


=item Overloaded objects

String overloaded objects are compared B&lt;as strings&gt; (or in cmp_ok()&#39;s
case, strings or numbers as appropriate to the comparison op).&nbsp;&nbsp;This
prevents Test::More from piercing an object&#39;s interface allowing
better blackbox testing.&nbsp;&nbsp;So if a function starts returning overloaded
objects instead of bare strings your tests won&#39;t notice the
difference.&nbsp;&nbsp;This is good.

However, it does mean that functions like is_deeply() cannot be used to
test the internals of string overloaded objects.&nbsp;&nbsp;In this case I would
suggest L&lt;Test::Deep&gt; which contains more flexible testing functions for
complex data structures.


=item Threads

Test::More will only be aware of threads if &quot;use threads&quot; has been done
I&lt;before&gt; Test::More is loaded.&nbsp;&nbsp;This is ok:

&nbsp;&nbsp;&nbsp;&nbsp;use threads;
&nbsp;&nbsp;&nbsp;&nbsp;use Test::More;

This may cause problems:

&nbsp;&nbsp;&nbsp;&nbsp;use Test::More
&nbsp;&nbsp;&nbsp;&nbsp;use threads;

5.8.1 and above are supported.&nbsp;&nbsp;Anything below that has too many bugs.

=back


=head1 HISTORY

This is a case of convergent evolution with Joshua Pritikin&#39;s Test
module.&nbsp;&nbsp;I was largely unaware of its existence when I&#39;d first
written my own ok() routines.&nbsp;&nbsp;This module exists because I can&#39;t
figure out how to easily wedge test names into Test&#39;s interface (along
with a few other problems).

The goal here is to have a testing utility that&#39;s simple to learn,
quick to use and difficult to trip yourself up with while still
providing more flexibility than the existing Test.pm.&nbsp;&nbsp;As such, the
names of the most common routines are kept tiny, special cases and
magic side-effects are kept to a minimum.&nbsp;&nbsp;WYSIWYG.


=head1 SEE ALSO

L&lt;Test::Simple&gt; if all this confuses you and you just want to write
some tests.&nbsp;&nbsp;You can upgrade to Test::More later (it&#39;s forward
compatible).

L&lt;Test::Harness&gt; is the test runner and output interpreter for Perl.
It&#39;s the thing that powers C&lt;make test&gt; and where the C&lt;prove&gt; utility
comes from.

L&lt;Test::Legacy&gt; tests written with Test.pm, the original testing
module, do not play well with other testing libraries.&nbsp;&nbsp;Test::Legacy
emulates the Test.pm interface and does play well with others.

L&lt;Test::Differences&gt; for more ways to test complex data structures.
And it plays well with Test::More.

L&lt;Test::Class&gt; is like xUnit but more perlish.

L&lt;Test::Deep&gt; gives you more powerful complex data structure testing.

L&lt;Test::Inline&gt; shows the idea of embedded testing.

L&lt;Bundle::Test&gt; installs a whole bunch of useful test modules.


=head1 AUTHORS

Michael G Schwern E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt; with much inspiration
from Joshua Pritikin&#39;s Test module and lots of help from Barrie
Slaymaker, Tony Bowden, blackstar.co.uk, chromatic, Fergal Daly and
the perl-qa gang.


=head1 BUGS

See F&lt;http://rt.cpan.org&gt; to report and view bugs.


=head1 SOURCE

The source code repository for Test::More can be found at
F&lt;http://github.com/schwern/test-more/&gt;.


=head1 COPYRIGHT

Copyright 2001-2008 by Michael G Schwern E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt;.

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

See F&lt;http://www.perl.com/perl/misc/Artistic.html&gt;

=cut</pre></td></tr>
<tr><td class="h">1912</td><td colspan="7"></td></tr><tr><td class="h">1913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
