<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: bin/rename-netspoc</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">bin/rename-netspoc</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">79.1%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#!/usr/bin/perl</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3 - 78</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

rename-netspoc - Rename one or more objects in netspoc files

=head1 SYNOPSIS

rename-netspoc [options] FILE|DIR SUBSTITUTION ...

=head1 DESCRIPTION

This program reads a netspoc configuration and one or more
SUBSTITUTIONS. It substitutes found objects with its replacement in
each file. Changes are done in place, no backup files are created. But
only changed files are touched. If FILE is `-&#39;, read standard input
and write to standard output.

=head1 SUBSTITUTION

A SUBSTITUTION is a pair of typed names &quot;type:NAME1&quot; &quot;type:NAME2&quot;.
NAME1 is searched and replaced by NAME2. Both types of a single
SUBSTITUTION must use the same type. Multiple SUBSTITUTIONS can be applied in a single run of rename-netspoc.

A typed name can use any valid type and name in netspoc syntax.
Valid types are: B&lt;router network host any group area service owner
admin protocol protocolgroup pathrestriction nat isakmp ipsec crypto&gt;.

A SUBSTITUTION of type B&lt;network&gt; also changes B&lt;interface&gt; and B&lt;host:id&gt;
which reference the given network.&nbsp;&nbsp;A SUBSTITUTION of type B&lt;router&gt;
also changes B&lt;interfaces&gt; which reference the given router.
A SUBSTITUTION of type B&lt;nat&gt; also changes the corresponding B&lt;bind_nat&gt; list.
A SUBSTITUTION of type B&lt;owner&gt; also changes the corresponding B&lt;sub_owner&gt;.

=head1 OPTIONS

=over 4

=item B&lt;-f&gt; file

Read SUBSTITUTIONS from file.
If - is specified, read from standard input. 

=item B&lt;-q&gt;

Quiet, don&#39;t print status messages.

=item B&lt;-help&gt;

Prints a brief help message and exits.

=item B&lt;-man&gt;

Prints the manual page and exits.

=back

=head1 COPYRIGHT AND DISCLAIMER

(c) 2015 by Heinz Knutzen &lt;heinz.knutzen@googlemail.com&gt;

http://hknutzen.github.com/Netspoc

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp;&nbsp;See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

=cut</pre></td></tr>
<tr><td class="h">79</td><td colspan="7"></td></tr><tr><td class="h">80</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L80">8</a></div></td><td></td><td><div>32</div><div>8</div><div>198</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">81</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L81">8</a></div></td><td></td><td><div>31</div><div>5</div><div>172</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">82</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L82">8</a></div></td><td></td><td><div>1481</div><div>11</div><div>26</div></td><td class="s">use open qw(:std :utf8);</td></tr>
<tr><td class="h">83</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L83">8</a></div></td><td></td><td><div>3329</div><div>21</div><div>37</div></td><td class="s">use Getopt::Long;</td></tr>
<tr><td class="h">84</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L84">8</a></div></td><td></td><td><div>1950</div><div>16</div><div>621</div></td><td class="s">use Pod::Usage;</td></tr>
<tr><td class="h">85</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L85">8</a></div></td><td></td><td><div>32</div><div>8</div><div>25826</div></td><td class="s">use Encode;</td></tr>
<tr><td class="h">86</td><td colspan="7"></td></tr><tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># VERSION: inserted by DZP::OurPkgVersion</td></tr>
<tr><td class="h">88</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">my $filename_encode = &#39;UTF-8&#39;;</td></tr>
<tr><td class="h">89</td><td colspan="7"></td></tr><tr><td class="h">90</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">my $ignore_files = &#39;^(raw|config|CVS|RCS|\.#.*|.*~)$&#39;;</td></tr>
<tr><td class="h">91</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">my $quiet;</td></tr>
<tr><td class="h">92</td><td colspan="7"></td></tr><tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">## no critic (RequireArgUnpacking)</td></tr>
<tr><td class="h">94</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="bin-rename-netspoc--subroutine.html#L94">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">sub debug { print STDERR @_, &quot;\n&quot;; return; }</td></tr>
<tr><td class="h">95</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="bin-rename-netspoc--subroutine.html#L95">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">sub info&nbsp;&nbsp;{ print STDERR @_, &quot;\n&quot;; return; }</td></tr>
<tr><td class="h">96</td><td colspan="7"></td></tr><tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub fatal_err {</td></tr>
<tr><td class="h">98</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="bin-rename-netspoc--subroutine.html#L98">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;Error: &quot;, @_, &quot;\n&quot;;</td></tr>
<tr><td class="h">99</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Aborted\n&quot;;</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">## use critic</td></tr>
<tr><td class="h">102</td><td colspan="7"></td></tr><tr><td class="h">103</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>184</div></td><td class="s">my %global_type = </td></tr>
<tr><td class="h">104</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;map { $_ =&gt; 1 } qw( </td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">router network host any group area service</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">owner protocol protocolgroup pathrestriction nat isakmp ipsec crypto</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">108</td><td colspan="7"></td></tr><tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># NAT is applied with bind_nat.</td></tr>
<tr><td class="h">110</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Owner is optionally referenced as sub_owner.</td></tr>
<tr><td class="h">111</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">my %aliases = ( nat&nbsp;&nbsp;&nbsp;=&gt; [&#39;bind_nat&#39;],</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner =&gt; [&#39;sub_owner&#39;], );</td></tr>
<tr><td class="h">113</td><td colspan="7"></td></tr><tr><td class="h">114</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">my %subst;</td></tr>
<tr><td class="h">115</td><td colspan="7"></td></tr><tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Fill %subst with arrays of search/replace pairs for given type.</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setup_subst {</td></tr>
<tr><td class="h">118</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L118">16</a></div></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($type, $search, $replace) = @_;</td></tr>
<tr><td class="h">119</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L119">50</a></div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$global_type{$type} or fatal_err(&quot;Unknown type $type&quot;);</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Quote pattern metacharacters.</td></tr>
<tr><td class="h">122</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>158</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$search = qr/\Q$search\E/;</td></tr>
<tr><td class="h">123</td><td colspan="7"></td></tr><tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Escape perl sigils in replace string, because we apply eval on it.</td></tr>
<tr><td class="h">125</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$replace =~ s/([@%\$])/\\$1/g;</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Standard for all types.</td></tr>
<tr><td class="h">128</td><td><div class="c3">16</div><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>16</div><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{ $subst{$type} }, [qr/$search/, $replace];</td></tr>
<tr><td class="h">129</td><td colspan="7"></td></tr><tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Network name occurs in interface name and in id: hosts.</td></tr>
<tr><td class="h">131</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L131">100</a></div><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L131">100</a></div><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L131">100</a></div><div class="c0" title="T/-"><a href="bin-rename-netspoc--branch.html#L131">50</a></div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($type eq &#39;network&#39;) {</td></tr>
<tr><td class="h">132</td><td colspan="7"></td></tr><tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Definition of interface inside definition of router.</td></tr>
<tr><td class="h">134</td><td><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@{ $subst{interface} }, [ qr/$search/, $replace ]);</td></tr>
<tr><td class="h">135</td><td colspan="7"></td></tr><tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Reference to interface ouside of definition of router.</td></tr>
<tr><td class="h">137</td><td><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@{ $subst{interface} },</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ qr/([\w@-]+\.)$search((?:\..*)?)/, &#39;${1}&#39;.$replace.&#39;${2}&#39; ]);</td></tr>
<tr><td class="h">139</td><td><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@{ $subst{host} },</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ qr/(id:.*\.)$search/, &#39;${1}&#39;.$replace ]);</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">142</td><td colspan="7"></td></tr><tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Router name occurs in interface name.</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ($type eq &#39;router&#39;) {</td></tr>
<tr><td class="h">145</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@{ $subst{interface} }, [ qr/$search([.@].*)/, $replace.&#39;${1}&#39; ]);</td></tr>
<tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">147</td><td colspan="7"></td></tr><tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Name of id: host is extended with some network name.</td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ($type eq &#39;host&#39;) {</td></tr>
<tr><td class="h">150</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>1</div><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(@{ $subst{host} }, [ qr/$search([.][\w-]+)/, $replace.&#39;${1}&#39; ]);</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">152</td><td colspan="7"></td></tr><tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif (my $list = $aliases{$type}) {</td></tr>
<tr><td class="h">154</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $other (@$list) {</td></tr>
<tr><td class="h">155</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $subst{$other} }, [qr/$search/, $replace];</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">158</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">159</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">160</td><td colspan="7"></td></tr><tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub subst {</td></tr>
<tr><td class="h">162</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L162">42</a></div></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($type, $name) = @_;</td></tr>
<tr><td class="h">163</td><td><div class="c3">42</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L163">50</a></div></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $aref = $subst{$type} or return $name;</td></tr>
<tr><td class="h">164</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $pair (@$aref) {</td></tr>
<tr><td class="h">165</td><td><div class="c3">71</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($search, $replace) = @$pair;</td></tr>
<tr><td class="h">166</td><td colspan="7"></td></tr><tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 1. eval gives double quoted string.</td></tr>
<tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2. eval interpolates $1, $2 inside quoted string.</td></tr>
<tr><td class="h">169</td><td><div class="c3">71</div><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>4324</div><div>1654</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name =~ s/^$search$/&quot;qq($replace)&quot;/ee;</td></tr>
<tr><td class="h">170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">171</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $name;</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">173</td><td colspan="7"></td></tr><tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub process {</td></tr>
<tr><td class="h">175</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L175">8</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($lines) = @_;</td></tr>
<tr><td class="h">176</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $changed = 0;</td></tr>
<tr><td class="h">177</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type_list;</td></tr>
<tr><td class="h">178</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $line (@$lines) {</td></tr>
<tr><td class="h">179</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $copy = &#39;&#39;;</td></tr>
<tr><td class="h">180</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $line_changed = 0;</td></tr>
<tr><td class="h">181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOKEN:</td></tr>
<tr><td class="h">182</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1) {</td></tr>
<tr><td class="h">183</td><td colspan="7"></td></tr><tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Handle list of names </td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# - after &quot;name = &quot;</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# - and on new line.</td></tr>
<tr><td class="h">187</td><td><div class="c3">94</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L187">100</a></div><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L187">100</a></div></td><td></td><td></td><td></td><td><div>343</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($type_list) {</td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LIST:</td></tr>
<tr><td class="h">189</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (1) {</td></tr>
<tr><td class="h">190</td><td colspan="7"></td></tr><tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Read list element.</td></tr>
<tr><td class="h">192</td><td><div class="c3">27</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L192">100</a></div><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L192">100</a></div></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($line =~ /\G (\s*) ([-\w.\@:]+) /gcx) {</td></tr>
<tr><td class="h">193</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= $1;</td></tr>
<tr><td class="h">194</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $2;</td></tr>
<tr><td class="h">195</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = subst($type_list, $name);</td></tr>
<tr><td class="h">196</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= $new;</td></tr>
<tr><td class="h">197</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L197">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line_changed++ if $name ne $new;</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">199</td><td colspan="7"></td></tr><tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Read comma.</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ($line =~ /\G (\s*,\s*) /gcx) {</td></tr>
<tr><td class="h">202</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= $1;</td></tr>
<tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">205</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last LIST;</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">208</td><td colspan="7"></td></tr><tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Whitespace or comment at end of line doesn&#39;t terminate list.</td></tr>
<tr><td class="h">210</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L210">100</a></div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($line =~ /\G (\s* (?:[#].*)? ) $/gcsx) {</td></tr>
<tr><td class="h">211</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= $1;</td></tr>
<tr><td class="h">212</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last TOKEN;</td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">214</td><td colspan="7"></td></tr><tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Everything else terminates list.</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">217</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type_list = undef;</td></tr>
<tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">220</td><td colspan="7"></td></tr><tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Find next &quot;type:name&quot; or &quot;type = name&quot;.</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ($line =~ /\G (.*?) (\w+) (:|\s*=\s*) /gcx) {</td></tr>
<tr><td class="h">223</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= &quot;$1$2$3&quot;;</td></tr>
<tr><td class="h">224</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $2;</td></tr>
<tr><td class="h">225</td><td><div class="c3">51</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L225">100</a></div></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if not $subst{$type};</td></tr>
<tr><td class="h">226</td><td><div class="c3">36</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L226">100</a></div><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L226">100</a></div></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $type_list = ($3 eq &#39;:&#39;) ? undef : $type;</td></tr>
<tr><td class="h">227</td><td><div class="c3">30</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L227">50</a></div></td><td></td><td></td><td></td><td><div>148</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ /\G&nbsp;&nbsp;([-\w.\@:]+) /gcx or next;</td></tr>
<tr><td class="h">228</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $1;</td></tr>
<tr><td class="h">229</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = subst($type, $name);</td></tr>
<tr><td class="h">230</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy .= $new;</td></tr>
<tr><td class="h">231</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L231">100</a></div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line_changed++ if $name ne $new;</td></tr>
<tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">233</td><td colspan="7"></td></tr><tr><td class="h">234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Ignore rest of line if nothing matches.</td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">236</td><td><div class="c3">34</div></td><td><div class="c0" title="T/-"><a href="bin-rename-netspoc--branch.html#L236">50</a></div></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ /\G (.+) /gcsx and $copy .= $1;</td></tr>
<tr><td class="h">237</td><td><div class="c3">34</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last TOKEN;</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">240</td><td><div class="c3">38</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L240">100</a></div></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($line_changed) {</td></tr>
<tr><td class="h">241</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line = $copy;</td></tr>
<tr><td class="h">242</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$changed += $line_changed;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">245</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $changed;</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">247</td><td colspan="7"></td></tr><tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub process_file {</td></tr>
<tr><td class="h">249</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L249">8</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($path) = @_;</td></tr>
<tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;debug &quot;File $path&quot;;</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;## no critic ProhibitTwoArgOpen</td></tr>
<tr><td class="h">252</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L252">50</a></div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open(my $in, $path) or fatal_err &quot;Can&#39;t open $path: $!&quot;;</td></tr>
<tr><td class="h">253</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>171</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @input = &lt;$in&gt;;</td></tr>
<tr><td class="h">254</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $in;</td></tr>
<tr><td class="h">255</td><td><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="bin-rename-netspoc--branch.html#L255">50</a></div></td><td><div class="c0"><a href="bin-rename-netspoc--condition.html#L255">33</a></div></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (my $count = process(\@input) or $path eq &#39;-&#39;) {</td></tr>
<tr><td class="h">256</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L256">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info &quot;$count changes in $path&quot; if not $quiet;</td></tr>
<tr><td class="h">257</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L257">50</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($path ne &#39;-&#39;) {</td></tr>
<tr><td class="h">258</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="bin-rename-netspoc--branch.html#L258">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unlink($path) or fatal_err &quot;Can&#39;t remove $path: $!\n&quot;;</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">260</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L260">50</a></div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open(my $out, &quot;&gt;$path&quot;) or fatal_err &quot;Can&#39;t create $path: $!&quot;;</td></tr>
<tr><td class="h">261</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $out @input;</td></tr>
<tr><td class="h">262</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close $out;</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;## use critic</td></tr>
<tr><td class="h">265</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">267</td><td colspan="7"></td></tr><tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub process_file_or_dir {</td></tr>
<tr><td class="h">269</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L269">8</a></div></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($path) = @_;</td></tr>
<tr><td class="h">270</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L270">50</a></div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (-d $path) {</td></tr>
<tr><td class="h">271</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local (*DIR);</td></tr>
<tr><td class="h">272</td><td colspan="7"></td></tr><tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Strip trailing slash.</td></tr>
<tr><td class="h">274</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$path =~ s&lt;/$&gt;&lt;&gt;;</td></tr>
<tr><td class="h">275</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="bin-rename-netspoc--branch.html#L275">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opendir DIR, $path or fatal_err &quot;Can&#39;t opendir $path: $!&quot;;</td></tr>
<tr><td class="h">276</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (my $file = Encode::decode($filename_encode, readdir DIR)) {</td></tr>
<tr><td class="h">277</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="bin-rename-netspoc--branch.html#L277">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $file =~ /^\./;</td></tr>
<tr><td class="h">278</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="bin-rename-netspoc--branch.html#L278">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $file =~ m/$ignore_files/;</td></tr>
<tr><td class="h">279</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$file = &quot;$path/$file&quot;;</td></tr>
<tr><td class="h">280</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_file_or_dir($file);</td></tr>
<tr><td class="h">281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">282</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closedir DIR;</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">285</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_file($path);</td></tr>
<tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">287</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">289</td><td colspan="7"></td></tr><tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setup_pattern {</td></tr>
<tr><td class="h">291</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L291">8</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my (@pattern) = @_;</td></tr>
<tr><td class="h">292</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while (@pattern) {</td></tr>
<tr><td class="h">293</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old = shift @pattern;</td></tr>
<tr><td class="h">294</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L294">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new = shift @pattern or </td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fatal_err &quot;Missing replace string for &#39;$old&#39;&quot;;</td></tr>
<tr><td class="h">296</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L296">50</a></div></td><td></td><td></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($type, $old_name) = ($old =~ /^(\w+):(.*)$/) or </td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fatal_err &quot;Missing type in &#39;$old&#39;&quot;;</td></tr>
<tr><td class="h">298</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L298">50</a></div></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($n_type, $new_name) = ($new =~ /^(\w+):(.*)$/) or </td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fatal_err &quot;Missing type in &#39;$new&#39;&quot;;</td></tr>
<tr><td class="h">300</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L300">50</a></div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type eq $n_type or </td></tr>
<tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fatal_err &quot;Types must be identical in\n - $old\n - $new&quot;;</td></tr>
<tr><td class="h">302</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setup_subst($type, $old_name, $new_name);</td></tr>
<tr><td class="h">303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">304</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">306</td><td colspan="7"></td></tr><tr><td class="h">307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub read_pattern {</td></tr>
<tr><td class="h">308</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="bin-rename-netspoc--subroutine.html#L308">1</a></div></td><td></td><td><div>1</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($path) = @_;</td></tr>
<tr><td class="h">309</td><td colspan="7"></td></tr><tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Read file as one large line.</td></tr>
<tr><td class="h">311</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $/;</td></tr>
<tr><td class="h">312</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L312">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open(my $file, &#39;&lt;&#39;, $path) or fatal_err &quot;Can&#39;t open $path: $!&quot;;</td></tr>
<tr><td class="h">313</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $input = &lt;$file&gt;;</td></tr>
<tr><td class="h">314</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $file;</td></tr>
<tr><td class="h">315</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L315">50</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @pattern = split(&#39; &#39;, $input) or</td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fatal_err &quot;Missing pattern in $path&quot;;</td></tr>
<tr><td class="h">317</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;setup_pattern(@pattern);</td></tr>
<tr><td class="h">318</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">320</td><td colspan="7"></td></tr><tr><td class="h">321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Argument processing</td></tr>
<tr><td class="h">323</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">324</td><td colspan="7"></td></tr><tr><td class="h">325</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Make @ARGV utf-8.</td></tr>
<tr><td class="h">326</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">$_ = Encode::decode(&#39;UTF-8&#39; , $_) for @ARGV;</td></tr>
<tr><td class="h">327</td><td colspan="7"></td></tr><tr><td class="h">328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Read search / replace pairs from this file.</td></tr>
<tr><td class="h">329</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">my $from_file;</td></tr>
<tr><td class="h">330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $help;</td></tr>
<tr><td class="h">331</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">my $man;</td></tr>
<tr><td class="h">332</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L332">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">GetOptions ( &#39;f=s&#39; =&gt; \$from_file,</td></tr>
<tr><td class="h">333</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;q!&#39; =&gt; \$quiet,</td></tr>
<tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;help|?&#39; =&gt; \$help,</td></tr>
<tr><td class="h">335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;man =&gt; \$man,</td></tr>
<tr><td class="h">336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) or pod2usage(2);</td></tr>
<tr><td class="h">337</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L337">50</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">pod2usage(1) if $help;</td></tr>
<tr><td class="h">338</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L338">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">pod2usage(-exitstatus =&gt; 0, -verbose =&gt; 2) if $man;</td></tr>
<tr><td class="h">339</td><td colspan="7"></td></tr><tr><td class="h">340</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L340">50</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">my $path = shift @ARGV or pod2usage(2);</td></tr>
<tr><td class="h">341</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="bin-rename-netspoc--branch.html#L341">50</a></div></td><td><div class="c0"><a href="bin-rename-netspoc--condition.html#L341">67</a></div></td><td></td><td></td><td><div>34</div></td><td class="s">$from_file or @ARGV or pod2usage(2);</td></tr>
<tr><td class="h">342</td><td colspan="7"></td></tr><tr><td class="h">343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Main program</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">346</td><td colspan="7"></td></tr><tr><td class="h">347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Initialize search/replace pairs.</td></tr>
<tr><td class="h">348</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L348">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">read_pattern($from_file) if $from_file;</td></tr>
<tr><td class="h">349</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="bin-rename-netspoc--branch.html#L349">100</a></div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">setup_pattern(@ARGV) if @ARGV;</td></tr>
<tr><td class="h">350</td><td colspan="7"></td></tr><tr><td class="h">351</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Do substitution.</td></tr>
<tr><td class="h">352</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">process_file_or_dir($path);</td></tr>
</table>
</body>
</html>
