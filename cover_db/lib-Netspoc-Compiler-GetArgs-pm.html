<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: lib/Netspoc/Compiler/GetArgs.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">lib/Netspoc/Compiler/GetArgs.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">63.2%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Netspoc::Compiler::GetArgs;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3 - 27</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

Get arguments and options from command line and config file.

=head1 COPYRIGHT AND DISCLAIMER

(C) 2015 by Heinz Knutzen &lt;heinz.knutzen@googlemail.com&gt;

http://hknutzen.github.com/Netspoc

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp;&nbsp;See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

=cut</pre></td></tr>
<tr><td class="h">28</td><td colspan="7"></td></tr><tr><td class="h">29</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L29">149</a></div></td><td></td><td><div>1667885</div><div>194</div><div>3456</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">30</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L30">149</a></div></td><td></td><td><div>541</div><div>138</div><div>2774</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">31</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L31">149</a></div></td><td></td><td><div>21074</div><div>207</div><div>6391</div></td><td class="s">use Netspoc::Compiler::File;</td></tr>
<tr><td class="h">32</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L32">149</a></div></td><td></td><td><div>40919</div><div>850434</div><div>634</div></td><td class="s">use Getopt::Long qw(GetOptionsFromArray);</td></tr>
<tr><td class="h">33</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L33">149</a></div></td><td></td><td><div>43158</div><div>4150485</div><div>11447</div></td><td class="s">use Pod::Usage;</td></tr>
<tr><td class="h">34</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L34">149</a></div></td><td></td><td><div>26120</div><div>120430</div><div>503</div></td><td class="s">use open qw(:std :utf8);</td></tr>
<tr><td class="h">35</td><td colspan="7"></td></tr><tr><td class="h">36</td><td><div class="c3">149</div><div class="c3">149</div><div class="c3">149</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L36">149</a></div></td><td></td><td><div>13040</div><div>346</div><div>151908</div></td><td class="s">use Exporter;</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our @ISA&nbsp;&nbsp;&nbsp;&nbsp;= qw(Exporter);</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our @EXPORT_OK = qw(get_args read_config combine_config);</td></tr>
<tr><td class="h">39</td><td colspan="7"></td></tr><tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># User configurable options.</td></tr>
<tr><td class="h">42</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">43</td><td colspan="7"></td></tr><tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Valid values:</td></tr>
<tr><td class="h">45</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - Default: 0|1</td></tr>
<tr><td class="h">46</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - Option with name &quot;check_*&quot;: 0,1,&#39;warn&#39;</td></tr>
<tr><td class="h">47</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;- 0: no check</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;- 1: throw an error if check fails</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;- warn: print warning if check fails</td></tr>
<tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - Option with name &quot;max_*&quot;: integer</td></tr>
<tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Other: string</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our %config = (</td></tr>
<tr><td class="h">53</td><td colspan="7"></td></tr><tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for unused groups and protocolgroups.</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_unused_groups =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">56</td><td colspan="7"></td></tr><tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for unused protocol definitions.</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_unused_protocols =&gt; 0,</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Allow subnets only</td></tr>
<tr><td class="h">61</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - if the enclosing network is marked as &#39;has_subnets&#39; or</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - if the subnet is marked as &#39;subnet_of&#39;</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_subnets =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">64</td><td colspan="7"></td></tr><tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for unenforceable rules, i.e. no managed device between src and dst.</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_unenforceable =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">67</td><td colspan="7"></td></tr><tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for duplicate rules.</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_duplicate_rules =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for redundant rules.</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_redundant_rules =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for services where owner can&#39;t be derived.</td></tr>
<tr><td class="h">75</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_service_unknown_owner =&gt; 0,</td></tr>
<tr><td class="h">76</td><td colspan="7"></td></tr><tr><td class="h">77</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for services where multiple owners have been derived.</td></tr>
<tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_service_multi_owner =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">79</td><td colspan="7"></td></tr><tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for missing supernet rules.</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_supernet_rules =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">82</td><td colspan="7"></td></tr><tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check for transient supernet rules.</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_transient_supernet_rules =&gt; &#39;warn&#39;,</td></tr>
<tr><td class="h">85</td><td colspan="7"></td></tr><tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Optimize the number of routing entries per router:</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># For each router find the hop, where the largest</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># number of routing entries points to</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># and replace them with a single default route.</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is only applicable for internal networks</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># which have no default route to the internet.</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;auto_default_route =&gt; 1,</td></tr>
<tr><td class="h">93</td><td colspan="7"></td></tr><tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Ignore these names when reading directories:</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - CVS and RCS directories</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - CVS working files</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - Editor backup files: emacs: *~</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ignore_files =&gt; &#39;^(CVS|RCS|\.#.*|.*~)$&#39;,</td></tr>
<tr><td class="h">99</td><td colspan="7"></td></tr><tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Abort after this many errors.</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;max_errors =&gt; 10,</td></tr>
<tr><td class="h">102</td><td colspan="7"></td></tr><tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Print progress messages.</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;verbose =&gt; 1,</td></tr>
<tr><td class="h">105</td><td colspan="7"></td></tr><tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Print progress messages with time stamps.</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Print &quot;finished&quot; with time stamp when finished.</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;time_stamps =&gt; 0,</td></tr>
<tr><td class="h">109</td><td colspan="7"></td></tr><tr><td class="h">110</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Use this value when printing passed time span.</td></tr>
<tr><td class="h">111</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;start_time =&gt; 0,</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">113</td><td colspan="7"></td></tr><tr><td class="h">114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Valid values for config options in %config.</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Key is prefix or string &quot;default&quot;.</td></tr>
<tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Value is pattern for checking valid values.</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our %config_type = (</td></tr>
<tr><td class="h">118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;check_&nbsp;&nbsp;&nbsp;=&gt; &#39;0|1|warn&#39;,</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;max_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;\d+&#39;,</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;start_&nbsp;&nbsp;&nbsp;=&gt; &#39;\d+&#39;,</td></tr>
<tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ignore_&nbsp;&nbsp;=&gt; &#39;\S+&#39;,</td></tr>
<tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_default =&gt; &#39;0|1&#39;,</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">124</td><td colspan="7"></td></tr><tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_config_keys {</td></tr>
<tr><td class="h">126</td><td><div class="c3">1228</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L126">1228</a></div></td><td><div class="c0">0</div></td><td><div>4576</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return keys %config;</td></tr>
<tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">128</td><td colspan="7"></td></tr><tr><td class="h">129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub valid_config_key {</td></tr>
<tr><td class="h">130</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L130">0</a></div></td><td><div class="c0">0</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($key) = @_;</td></tr>
<tr><td class="h">131</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return exists $config{$key};</td></tr>
<tr><td class="h">132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">133</td><td colspan="7"></td></tr><tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_config_pattern {</td></tr>
<tr><td class="h">135</td><td><div class="c3">19666</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L135">19666</a></div></td><td><div class="c0">0</div></td><td><div>16773</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($key) = @_;</td></tr>
<tr><td class="h">136</td><td><div class="c3">19666</div></td><td></td><td></td><td></td><td></td><td><div>14256</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pattern;</td></tr>
<tr><td class="h">137</td><td><div class="c3">19666</div></td><td></td><td></td><td></td><td></td><td><div>32999</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $prefix (keys %config_type) {</td></tr>
<tr><td class="h">138</td><td><div class="c3">61522</div></td><td><div class="c3" title="T/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L138">100</a></div></td><td></td><td></td><td></td><td><div>438585</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($key =~ /^$prefix/) {</td></tr>
<tr><td class="h">139</td><td><div class="c3">15972</div></td><td></td><td></td><td></td><td></td><td><div>17323</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pattern = $config_type{$prefix};</td></tr>
<tr><td class="h">140</td><td><div class="c3">15972</div></td><td></td><td></td><td></td><td></td><td><div>17072</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">143</td><td><div class="c3">19666</div></td><td></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--condition.html#L143">67</a></div></td><td></td><td></td><td><div>58666</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $pattern || $config_type{_default};</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">145</td><td colspan="7"></td></tr><tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Checks for valid config key/value pair.</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns false on success, the expected pattern on failure.</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub check_config_pair {</td></tr>
<tr><td class="h">149</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L149">18</a></div></td><td><div class="c0">0</div></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($key, $value) = @_;</td></tr>
<tr><td class="h">150</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pattern = get_config_pattern($key);</td></tr>
<tr><td class="h">151</td><td><div class="c3">18</div></td><td><div class="c0" title="T/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L151">50</a></div></td><td></td><td></td><td></td><td><div>276</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($value =~ /^($pattern)$/ ? undef : $pattern);</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">153</td><td colspan="7"></td></tr><tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Combine config hashes with default config.</td></tr>
<tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Rightmost hash overrides previous values with same key.</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub combine_config {</td></tr>
<tr><td class="h">157</td><td><div class="c3">1296</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L157">1296</a></div></td><td><div class="c0">0</div></td><td><div>2437048</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my (@hrefs) = @_;</td></tr>
<tr><td class="h">158</td><td><div class="c3">1296</div><div class="c3">3864</div></td><td><div class="c0" title="T/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L158">50</a></div></td><td></td><td></td><td></td><td><div>1869</div><div>19216</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %result = map { $_ ? %$_ : () } \%config, @hrefs;</td></tr>
<tr><td class="h">159</td><td><div class="c3">1296</div></td><td></td><td></td><td></td><td></td><td><div>3738</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%result;</td></tr>
<tr><td class="h">160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">161</td><td colspan="7"></td></tr><tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Argument processing</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Get option names from %config.</td></tr>
<tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Write option values back to %config.</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">167</td><td colspan="7"></td></tr><tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_options {</td></tr>
<tr><td class="h">169</td><td><div class="c3">1228</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L169">1228</a></div></td><td><div class="c0">0</div></td><td><div>1086</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($args) = @_;</td></tr>
<tr><td class="h">170</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1026</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %result;</td></tr>
<tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $setopt = sub {</td></tr>
<tr><td class="h">172</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L172">18</a></div></td><td></td><td><div>2086</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($key, $val) = @_;</td></tr>
<tr><td class="h">173</td><td><div class="c3">18</div></td><td><div class="c0" title="-/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L173">50</a></div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (my $expected = check_config_pair($key, $val)) {</td></tr>
<tr><td class="h">174</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Invalid value for option $key, expected &#39;$expected&#39;\n&quot;;</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">176</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result{$key} = $val;</td></tr>
<tr><td class="h">177</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>4080</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">178</td><td colspan="7"></td></tr><tr><td class="h">179</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1157</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %options;</td></tr>
<tr><td class="h">180</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1636</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $key (get_config_keys()) {</td></tr>
<tr><td class="h">181</td><td><div class="c3">19648</div></td><td><div class="c3" title="T/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L181">100</a></div></td><td></td><td></td><td></td><td><div>22471</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $opt = get_config_pattern($key) eq &#39;0|1&#39; ? &#39;!&#39; : &#39;=s&#39;;</td></tr>
<tr><td class="h">182</td><td><div class="c3">19648</div></td><td></td><td></td><td></td><td></td><td><div>37516</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{&quot;$key$opt&quot;} = $setopt;</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">184</td><td><div class="c3">1228</div><div class="c3">1228</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L184">1228</a></div></td><td></td><td><div>4014</div><div>1100095</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{quiet} = sub { $result{verbose} = 0 };</td></tr>
<tr><td class="h">185</td><td><div class="c3">1228</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L185">0</a></div></td><td></td><td><div>2302</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{&#39;help|?&#39;} = sub { pod2usage(1) };</td></tr>
<tr><td class="h">186</td><td><div class="c3">1228</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L186">0</a></div></td><td></td><td><div>2269</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{man} = sub { pod2usage(-exitstatus =&gt; 0, -verbose =&gt; 2) };</td></tr>
<tr><td class="h">187</td><td colspan="7"></td></tr><tr><td class="h">188</td><td><div class="c3">1228</div></td><td><div class="c0" title="-/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L188">50</a></div></td><td></td><td></td><td></td><td><div>5541</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (!GetOptionsFromArray($args, %options)) {</td></tr>
<tr><td class="h">189</td><td colspan="7"></td></tr><tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t use &#39;exit&#39; but &#39;die&#39;, so we can catch this error in tests.</td></tr>
<tr><td class="h">191</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $out;</td></tr>
<tr><td class="h">192</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L192">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open(my $fh, &#39;&gt;&#39;, \$out) or die $!;</td></tr>
<tr><td class="h">193</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pod2usage(-exitstatus =&gt; &#39;NOEXIT&#39;, -verbose =&gt; 0, -output =&gt; $fh);</td></tr>
<tr><td class="h">194</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close $fh;</td></tr>
<tr><td class="h">195</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--condition.html#L195">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die($out || &#39;&#39;);</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">197</td><td colspan="7"></td></tr><tr><td class="h">198</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>66364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%result;</td></tr>
<tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">200</td><td colspan="7"></td></tr><tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_args {</td></tr>
<tr><td class="h">202</td><td><div class="c3">1228</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L202">1228</a></div></td><td><div class="c0">0</div></td><td><div>1117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($args) = @_;</td></tr>
<tr><td class="h">203</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1346</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $main_file = shift @$args;</td></tr>
<tr><td class="h">204</td><td colspan="7"></td></tr><tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Strip trailing slash for nicer messages.</td></tr>
<tr><td class="h">206</td><td><div class="c3">1228</div></td><td><div class="c0" title="T/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L206">50</a></div></td><td></td><td></td><td></td><td><div>2683</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;defined $main_file and $main_file =~ s&lt;/$&gt;&lt;&gt;;</td></tr>
<tr><td class="h">207</td><td colspan="7"></td></tr><tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $out_dir is used to store compilation results.</td></tr>
<tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# For each managed router with name X a corresponding file X</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# is created in $out_dir.</td></tr>
<tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If $out_dir is missing, all code is printed to STDOUT.</td></tr>
<tr><td class="h">212</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out_dir = shift @$args;</td></tr>
<tr><td class="h">213</td><td colspan="7"></td></tr><tr><td class="h">214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Strip trailing slash for nicer messages.</td></tr>
<tr><td class="h">215</td><td><div class="c3">1228</div></td><td><div class="c3" title="T/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L215">100</a></div></td><td></td><td></td><td></td><td><div>1925</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;defined $out_dir and $out_dir =~ s&lt;/$&gt;&lt;&gt;;</td></tr>
<tr><td class="h">216</td><td colspan="7"></td></tr><tr><td class="h">217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# No further arguments allowed.</td></tr>
<tr><td class="h">218</td><td><div class="c3">1228</div></td><td><div class="c0" title="-/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L218">50</a></div></td><td></td><td></td><td></td><td><div>1910</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@$args and pod2usage(2);</td></tr>
<tr><td class="h">219</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>2015</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($main_file, $out_dir);</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">221</td><td colspan="7"></td></tr><tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Read key value pairs from file &#39;$path/config&#39; if file exists.</td></tr>
<tr><td class="h">223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub read_config {</td></tr>
<tr><td class="h">224</td><td><div class="c3">1272</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L224">1272</a></div></td><td><div class="c0">0</div></td><td><div>4281365</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($dir) = @_;</td></tr>
<tr><td class="h">225</td><td><div class="c3">1272</div></td><td><div class="c0" title="-/F"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L225">50</a></div></td><td></td><td></td><td></td><td><div>1918</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$dir or return {};</td></tr>
<tr><td class="h">226</td><td><div class="c3">1272</div></td><td></td><td></td><td></td><td></td><td><div>1689</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file = &quot;$dir/config&quot;;</td></tr>
<tr><td class="h">227</td><td><div class="c3">1272</div></td><td><div class="c0" title="T/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L227">50</a></div></td><td><div class="c0"><a href="lib-Netspoc-Compiler-GetArgs-pm--condition.html#L227">33</a></div></td><td></td><td></td><td><div>8299</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;-f $file and -r $file or return {};</td></tr>
<tr><td class="h">228</td><td colspan="7"></td></tr><tr><td class="h">229</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %result;</td></tr>
<tr><td class="h">230</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $lines = read_file_lines($file);</td></tr>
<tr><td class="h">231</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $line (@$lines) {</td></tr>
<tr><td class="h">232</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chomp $line;</td></tr>
<tr><td class="h">233</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L233">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ /^\s*#/ and next;</td></tr>
<tr><td class="h">234</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L234">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line =~ /^\s*$/ and next;</td></tr>
<tr><td class="h">235</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L235">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (my ($key, $val) = ($line =~ /\s* (\w+) \s* = \s* (\w+) ;/x)) {</td></tr>
<tr><td class="h">236</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L236">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid_config_key($key) or </td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Invalid keyword in $file: $key\n&quot;);</td></tr>
<tr><td class="h">238</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="lib-Netspoc-Compiler-GetArgs-pm--branch.html#L238">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (my $expected = check_config_pair($key, $val)) {</td></tr>
<tr><td class="h">239</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Invalid value for $key in $file,&quot;,</td></tr>
<tr><td class="h">240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; expected &#39;$expected&#39;\n&quot;);</td></tr>
<tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">242</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result{$key} = $val;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">245</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Unexpected line in $file: $line\n&quot;);</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">248</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%result;</td></tr>
<tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">250</td><td colspan="7"></td></tr><tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_args {</td></tr>
<tr><td class="h">252</td><td><div class="c3">1228</div></td><td></td><td></td><td><div class="c3"><a href="lib-Netspoc-Compiler-GetArgs-pm--subroutine.html#L252">1228</a></div></td><td><div class="c0">0</div></td><td><div>1113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($args) = @_;</td></tr>
<tr><td class="h">253</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1604</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($cmd_config)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= parse_options($args);</td></tr>
<tr><td class="h">254</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1957</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($in_path, $out_dir) = parse_args($args);</td></tr>
<tr><td class="h">255</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1682</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file_config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= read_config($in_path);</td></tr>
<tr><td class="h">256</td><td colspan="7"></td></tr><tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Use default values from %config hash.</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Command line options override options from &#39;config&#39; file.</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Rightmost overrides.</td></tr>
<tr><td class="h">260</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>1819</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $config = combine_config($file_config, $cmd_config);</td></tr>
<tr><td class="h">261</td><td colspan="7"></td></tr><tr><td class="h">262</td><td><div class="c3">1228</div></td><td></td><td></td><td></td><td></td><td><div>4350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $config, $in_path, $out_dir;</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">264</td><td colspan="7"></td></tr><tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
