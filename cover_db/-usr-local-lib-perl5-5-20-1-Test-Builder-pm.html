<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.17
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/local/lib/perl5/5.20.1/Test/Builder.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/local/lib/perl5/5.20.1/Test/Builder.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">41.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Test::Builder;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L3">44</a></div></td><td></td><td><div>502</div><div>101</div><div>1304</div></td><td class="s">use 5.006;</td></tr>
<tr><td class="h">4</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L4">44</a></div></td><td></td><td><div>160</div><div>44</div><div>941</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L5">44</a></div></td><td></td><td><div>163</div><div>42</div><div>2330</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">6</td><td colspan="7"></td></tr><tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;1.001002&#39;;</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = eval $VERSION;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">9</td><td colspan="7"></td></tr><tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">11</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L11">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L11">44</a></div></td><td></td><td><div>874</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $] &lt; 5.008 ) {</td></tr>
<tr><td class="h">12</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require Test::Builder::IO::Scalar;</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">15</td><td colspan="7"></td></tr><tr><td class="h">16</td><td colspan="7"></td></tr><tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Make Test::Builder thread-safe for ithreads.</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">19</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L19">44</a></div></td><td></td><td><div>168</div><div>43</div><div>10023</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;use Config;</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Load threads::shared when threads are turned on.</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 5.8.0&#39;s threads are so busted we no longer support them.</td></tr>
<tr><td class="h">22</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L22">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L22">25</a></div></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L22">44</a></div></td><td></td><td><div>779</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt;= 5.008001 &amp;&amp; $Config{useithreads} &amp;&amp; $INC{&#39;threads.pm&#39;} ) {</td></tr>
<tr><td class="h">23</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require threads::shared;</td></tr>
<tr><td class="h">24</td><td colspan="7"></td></tr><tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hack around YET ANOTHER threads::shared bug.&nbsp;&nbsp;It would</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# occasionally forget the contents of the variable when sharing it.</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# So we first copy the data, then share, then put our copy back.</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*share = sub (\[$@%]) {</td></tr>
<tr><td class="h">29</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = ref $_[0];</td></tr>
<tr><td class="h">30</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data;</td></tr>
<tr><td class="h">31</td><td colspan="7"></td></tr><tr><td class="h">32</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L32">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L32">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L32">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">33</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%$data = %{ $_[0] };</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">36</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$data = @{ $_[0] };</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">39</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$data = ${ $_[0] };</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">42</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die( &quot;Unknown type: &quot; . $type );</td></tr>
<tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">44</td><td colspan="7"></td></tr><tr><td class="h">45</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$_[0] = &amp;threads::shared::share( $_[0] );</td></tr>
<tr><td class="h">46</td><td colspan="7"></td></tr><tr><td class="h">47</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L47">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L47">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L47">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">48</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%{ $_[0] } = %$data;</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">51</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{ $_[0] } = @$data;</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">54</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${ $_[0] } = $$data;</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">57</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die( &quot;Unknown type: &quot; . $type );</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $_[0];</td></tr>
<tr><td class="h">61</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 5.8.0&#39;s threads::shared is busted when threads are off</td></tr>
<tr><td class="h">64</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# and earlier Perls just don&#39;t have that module at all.</td></tr>
<tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">66</td><td><div class="c3">44</div><div class="c3">549</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L66">549</a></div></td><td></td><td><div>133</div><div>689</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*share = sub { return $_[0] };</td></tr>
<tr><td class="h">67</td><td><div class="c3">44</div><div class="c3">461</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L67">461</a></div></td><td></td><td><div>105693</div><div>434</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*lock&nbsp;&nbsp;= sub { 0 };</td></tr>
<tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71 - 117</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

Test::Builder - Backend for building test libraries

=head1 SYNOPSIS

&nbsp;&nbsp;package My::Test::Module;
&nbsp;&nbsp;use base &#39;Test::Builder::Module&#39;;

&nbsp;&nbsp;my $CLASS = __PACKAGE__;

&nbsp;&nbsp;sub ok {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($test, $name) = @_;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tb = $CLASS-&gt;builder;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;ok($test, $name);
&nbsp;&nbsp;}


=head1 DESCRIPTION

Test::Simple and Test::More have proven to be popular testing modules,
but they&#39;re not always flexible enough.&nbsp;&nbsp;Test::Builder provides a
building block upon which to write your own test libraries I&lt;which can
work together&gt;.

=head2 Construction

=over 4

=item B&lt;new&gt;

&nbsp;&nbsp;my $Test = Test::Builder-&gt;new;

Returns a Test::Builder object representing the current state of the
test.

Since you only run one test per program C&lt;new&gt; always returns the same
Test::Builder object.&nbsp;&nbsp;No matter how many times you call C&lt;new()&gt;, you&#39;re
getting the same object.&nbsp;&nbsp;This is called a singleton.&nbsp;&nbsp;This is done so that
multiple modules share such global information as the test counter and
where test output is going.

If you want a completely new Test::Builder object different from the
singleton, use C&lt;create&gt;.

=cut</pre></td></tr>
<tr><td class="h">118</td><td colspan="7"></td></tr><tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $Test = Test::Builder-&gt;new;</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h">122</td><td><div class="c3">597</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L122">597</a></div></td><td><div class="c3">1</div></td><td><div>909</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($class) = shift;</td></tr>
<tr><td class="h">123</td><td><div class="c3">597</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L123">67</a></div></td><td></td><td></td><td><div>1587</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Test ||= $class-&gt;create;</td></tr>
<tr><td class="h">124</td><td><div class="c3">597</div></td><td></td><td></td><td></td><td></td><td><div>1112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $Test;</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127 - 139</td><td colspan="6"></td><td class="s"><pre>=item B&lt;create&gt;

&nbsp;&nbsp;my $Test = Test::Builder-&gt;create;

Ok, so there can be more than one Test::Builder object and this is how
you get it.&nbsp;&nbsp;You might use this instead of C&lt;new()&gt; if you&#39;re testing
a Test::Builder based module, but otherwise you probably want C&lt;new&gt;.

B&lt;NOTE&gt;: the implementation is not complete.&nbsp;&nbsp;C&lt;level&gt;, for example, is
still shared amongst B&lt;all&gt; Test::Builder objects, even ones created using
this method.&nbsp;&nbsp;Also, the method name may change in the future.

=cut</pre></td></tr>
<tr><td class="h">140</td><td colspan="7"></td></tr><tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub create {</td></tr>
<tr><td class="h">142</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L142">44</a></div></td><td><div class="c3">1</div></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = shift;</td></tr>
<tr><td class="h">143</td><td colspan="7"></td></tr><tr><td class="h">144</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = bless {}, $class;</td></tr>
<tr><td class="h">145</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;reset;</td></tr>
<tr><td class="h">146</td><td colspan="7"></td></tr><tr><td class="h">147</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">149</td><td colspan="7"></td></tr><tr><td class="h">150</td><td colspan="7"></td></tr><tr><td class="h">151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copy an object, currently a shallow.</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This does *not* bless the destination.&nbsp;&nbsp;This keeps the destructor from</td></tr>
<tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># firing when we&#39;re just storing a copy of the object to restore later.</td></tr>
<tr><td class="h">154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _copy {</td></tr>
<tr><td class="h">155</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L155">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($src, $dest) = @_;</td></tr>
<tr><td class="h">156</td><td colspan="7"></td></tr><tr><td class="h">157</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%$dest = %$src;</td></tr>
<tr><td class="h">158</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_share_keys($dest);</td></tr>
<tr><td class="h">159</td><td colspan="7"></td></tr><tr><td class="h">160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">162</td><td colspan="7"></td></tr><tr><td class="h">163</td><td colspan="7"></td></tr><tr><td class="h">164 - 182</td><td colspan="6"></td><td class="s"><pre>=item B&lt;child&gt;

&nbsp;&nbsp;my $child = $builder-&gt;child($name_of_child);
&nbsp;&nbsp;$child-&gt;plan( tests =&gt; 4 );
&nbsp;&nbsp;$child-&gt;ok(some_code());
&nbsp;&nbsp;...
&nbsp;&nbsp;$child-&gt;finalize;

Returns a new instance of C&lt;Test::Builder&gt;.&nbsp;&nbsp;Any output from this child will
be indented four spaces more than the parent&#39;s indentation.&nbsp;&nbsp;When done, the
C&lt;finalize&gt; method I&lt;must&gt; be called explicitly.

Trying to create a new child with a previous child still active (i.e.,
C&lt;finalize&gt; not called) will C&lt;croak&gt;.

Trying to run a test when you have an open child will also C&lt;croak&gt; and cause
the test suite to fail.

=cut</pre></td></tr>
<tr><td class="h">183</td><td colspan="7"></td></tr><tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child {</td></tr>
<tr><td class="h">185</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L185">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $name ) = @_;</td></tr>
<tr><td class="h">186</td><td colspan="7"></td></tr><tr><td class="h">187</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L187">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Child_Name} ) {</td></tr>
<tr><td class="h">188</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;You already have a child named ($self-&gt;{Child_Name}) running&quot;);</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">190</td><td colspan="7"></td></tr><tr><td class="h">191</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent_in_todo = $self-&gt;in_todo;</td></tr>
<tr><td class="h">192</td><td colspan="7"></td></tr><tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Clear $TODO for the child.</td></tr>
<tr><td class="h">194</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $orig_TODO = $self-&gt;find_TODO(undef, 1, undef);</td></tr>
<tr><td class="h">195</td><td colspan="7"></td></tr><tr><td class="h">196</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = ref $self;</td></tr>
<tr><td class="h">197</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child = $class-&gt;create;</td></tr>
<tr><td class="h">198</td><td colspan="7"></td></tr><tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Add to our indentation</td></tr>
<tr><td class="h">200</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;_indent( $self-&gt;_indent . &#39;&nbsp;&nbsp;&nbsp;&nbsp;&#39; );</td></tr>
<tr><td class="h">201</td><td colspan="7"></td></tr><tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Make the child use the same outputs as the parent</td></tr>
<tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $method (qw(output failure_output todo_output)) {</td></tr>
<tr><td class="h">204</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;$method( $self-&gt;$method );</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">206</td><td colspan="7"></td></tr><tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Ensure the child understands if they&#39;re inside a TODO</td></tr>
<tr><td class="h">208</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L208">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parent_in_todo ) {</td></tr>
<tr><td class="h">209</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;failure_output( $self-&gt;todo_output );</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">211</td><td colspan="7"></td></tr><tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# This will be reset in finalize. We do this here lest one child failure</td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# cause all children to fail.</td></tr>
<tr><td class="h">214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;{Child_Error} = $?;</td></tr>
<tr><td class="h">215</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">216</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;{Parent}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self;</td></tr>
<tr><td class="h">217</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;{Parent_TODO} = $orig_TODO;</td></tr>
<tr><td class="h">218</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L218">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;{Name}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $name || &quot;Child of &quot; . $self-&gt;name;</td></tr>
<tr><td class="h">219</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Child_Name}&nbsp;&nbsp;&nbsp;= $child-&gt;name;</td></tr>
<tr><td class="h">220</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $child;</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">222</td><td colspan="7"></td></tr><tr><td class="h">223</td><td colspan="7"></td></tr><tr><td class="h">224 - 230</td><td colspan="6"></td><td class="s"><pre>=item B&lt;subtest&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$builder-&gt;subtest($name, \&amp;subtests);

See documentation of C&lt;subtest&gt; in Test::More.

=cut</pre></td></tr>
<tr><td class="h">231</td><td colspan="7"></td></tr><tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub subtest {</td></tr>
<tr><td class="h">233</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L233">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">234</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($name, $subtests) = @_;</td></tr>
<tr><td class="h">235</td><td colspan="7"></td></tr><tr><td class="h">236</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L236">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (&#39;CODE&#39; ne ref $subtests) {</td></tr>
<tr><td class="h">237</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;subtest()&#39;s second argument must be a code ref&quot;);</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">239</td><td colspan="7"></td></tr><tr><td class="h">240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Turn the child into the parent so anyone who has stored a copy of</td></tr>
<tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the Test::Builder singleton will get the child.</td></tr>
<tr><td class="h">242</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $error;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child;</td></tr>
<tr><td class="h">244</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent = {};</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# child() calls reset() which sets $Level to 1, so we localize</td></tr>
<tr><td class="h">247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $Level first to limit the scope of the reset to the subtest.</td></tr>
<tr><td class="h">248</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Test::Builder::Level = $Test::Builder::Level + 1;</td></tr>
<tr><td class="h">249</td><td colspan="7"></td></tr><tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Store the guts of $self as $parent and turn $child into $self.</td></tr>
<tr><td class="h">251</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child&nbsp;&nbsp;= $self-&gt;child($name);</td></tr>
<tr><td class="h">252</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_copy($self,&nbsp;&nbsp;$parent);</td></tr>
<tr><td class="h">253</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_copy($child, $self);</td></tr>
<tr><td class="h">254</td><td colspan="7"></td></tr><tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $run_the_subtests = sub {</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Add subtest name for clarification of starting point</td></tr>
<tr><td class="h">257</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L257">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;note(&quot;Subtest: $name&quot;);</td></tr>
<tr><td class="h">258</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$subtests-&gt;();</td></tr>
<tr><td class="h">259</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L259">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;done_testing unless $self-&gt;_plan_handled;</td></tr>
<tr><td class="h">260</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1;</td></tr>
<tr><td class="h">261</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">262</td><td colspan="7"></td></tr><tr><td class="h">263</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L263">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !eval { $run_the_subtests-&gt;() } ) {</td></tr>
<tr><td class="h">264</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$error = $@;</td></tr>
<tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">267</td><td colspan="7"></td></tr><tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Restore the parent and the copied child.</td></tr>
<tr><td class="h">269</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_copy($self,&nbsp;&nbsp;&nbsp;$child);</td></tr>
<tr><td class="h">270</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_copy($parent, $self);</td></tr>
<tr><td class="h">271</td><td colspan="7"></td></tr><tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Restore the parent&#39;s $TODO</td></tr>
<tr><td class="h">273</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;find_TODO(undef, 1, $child-&gt;{Parent_TODO});</td></tr>
<tr><td class="h">274</td><td colspan="7"></td></tr><tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Die *after* we restore the parent.</td></tr>
<tr><td class="h">276</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L276">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L276">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die $error if $error and !eval { $error-&gt;isa(&#39;Test::Builder::Exception&#39;) };</td></tr>
<tr><td class="h">277</td><td colspan="7"></td></tr><tr><td class="h">278</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Test::Builder::Level = $Test::Builder::Level + 1;</td></tr>
<tr><td class="h">279</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $finalize = $child-&gt;finalize;</td></tr>
<tr><td class="h">280</td><td colspan="7"></td></tr><tr><td class="h">281</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L281">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;BAIL_OUT($child-&gt;{Bailed_Out_Reason}) if $child-&gt;{Bailed_Out};</td></tr>
<tr><td class="h">282</td><td colspan="7"></td></tr><tr><td class="h">283</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $finalize;</td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">285</td><td colspan="7"></td></tr><tr><td class="h">286 - 309</td><td colspan="6"></td><td class="s"><pre>=begin _private

=item B&lt;_plan_handled&gt;

&nbsp;&nbsp;&nbsp;&nbsp;if ( $Test-&gt;_plan_handled ) { ... }

Returns true if the developer has explicitly handled the plan via:

=over 4

=item * Explicitly setting the number of tests

=item * Setting &#39;no_plan&#39;

=item * Set &#39;skip_all&#39;.

=back

This is currently used in subtests when we implicitly call C&lt;&lt; $Test-&gt;done_testing &gt;&gt;
if the developer has not set a plan.

=end _private

=cut</pre></td></tr>
<tr><td class="h">310</td><td colspan="7"></td></tr><tr><td class="h">311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _plan_handled {</td></tr>
<tr><td class="h">312</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L312">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">313</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L313">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Have_Plan} || $self-&gt;{No_Plan} || $self-&gt;{Skip_All};</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">315</td><td colspan="7"></td></tr><tr><td class="h">316</td><td colspan="7"></td></tr><tr><td class="h">317 - 334</td><td colspan="6"></td><td class="s"><pre>=item B&lt;finalize&gt;

&nbsp;&nbsp;my $ok = $child-&gt;finalize;

When your child is done running tests, you must call C&lt;finalize&gt; to clean up
and tell the parent your pass/fail status.

Calling finalize on a child with open children will C&lt;croak&gt;.

If the child falls out of scope before C&lt;finalize&gt; is called, a failure
diagnostic will be issued and the child is considered to have failed.

No attempt to call methods on a child after C&lt;finalize&gt; is called is
guaranteed to succeed.

Calling this on the root builder is a no-op.

=cut</pre></td></tr>
<tr><td class="h">335</td><td colspan="7"></td></tr><tr><td class="h">336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub finalize {</td></tr>
<tr><td class="h">337</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L337">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">338</td><td colspan="7"></td></tr><tr><td class="h">339</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L339">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $self-&gt;parent;</td></tr>
<tr><td class="h">340</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L340">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Child_Name} ) {</td></tr>
<tr><td class="h">341</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Can&#39;t call finalize() with child ($self-&gt;{Child_Name}) active&quot;);</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">343</td><td colspan="7"></td></tr><tr><td class="h">344</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $? = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# don&#39;t fail if $subtests happened to set $? nonzero</td></tr>
<tr><td class="h">345</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_ending;</td></tr>
<tr><td class="h">346</td><td colspan="7"></td></tr><tr><td class="h">347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# XXX This will only be necessary for TAP envelopes (we think)</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#$self-&gt;_print( $self-&gt;is_passing ? &quot;PASS\n&quot; : &quot;FAIL\n&quot; );</td></tr>
<tr><td class="h">349</td><td colspan="7"></td></tr><tr><td class="h">350</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Test::Builder::Level = $Test::Builder::Level + 1;</td></tr>
<tr><td class="h">351</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = 1;</td></tr>
<tr><td class="h">352</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;{Child_Name} = undef;</td></tr>
<tr><td class="h">353</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L353">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless ($self-&gt;{Bailed_Out}) {</td></tr>
<tr><td class="h">354</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L354">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L354">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;{Skip_All} ) {</td></tr>
<tr><td class="h">355</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;skip($self-&gt;{Skip_All});</td></tr>
<tr><td class="h">356</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( not @{ $self-&gt;{Test_Results} } ) {</td></tr>
<tr><td class="h">358</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;ok( 0, sprintf q[No tests run for subtest &quot;%s&quot;], $self-&gt;name );</td></tr>
<tr><td class="h">359</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">360</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">361</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;ok( $self-&gt;is_passing, $self-&gt;name );</td></tr>
<tr><td class="h">362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">364</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$? = $self-&gt;{Child_Error};</td></tr>
<tr><td class="h">365</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{Parent};</td></tr>
<tr><td class="h">366</td><td colspan="7"></td></tr><tr><td class="h">367</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;is_passing;</td></tr>
<tr><td class="h">368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">369</td><td colspan="7"></td></tr><tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _indent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">371</td><td><div class="c3">477</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L371">477</a></div></td><td></td><td><div>1321</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">372</td><td colspan="7"></td></tr><tr><td class="h">373</td><td><div class="c3">477</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L373">50</a></div></td><td></td><td></td><td></td><td><div>791</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @_ ) {</td></tr>
<tr><td class="h">374</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Indent} = shift;</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">376</td><td colspan="7"></td></tr><tr><td class="h">377</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>768</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Indent};</td></tr>
<tr><td class="h">378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">379</td><td colspan="7"></td></tr><tr><td class="h">380 - 389</td><td colspan="6"></td><td class="s"><pre>=item B&lt;parent&gt;

 if ( my $parent = $builder-&gt;parent ) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
 }

Returns the parent C&lt;Test::Builder&gt; instance, if any.&nbsp;&nbsp;Only used with child
builders for nested TAP.

=cut</pre></td></tr>
<tr><td class="h">390</td><td colspan="7"></td></tr><tr><td class="h">391</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L391">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub parent { shift-&gt;{Parent} }</td></tr>
<tr><td class="h">392</td><td colspan="7"></td></tr><tr><td class="h">393 - 401</td><td colspan="6"></td><td class="s"><pre>=item B&lt;name&gt;

 diag $builder-&gt;name;

Returns the name of the current builder.&nbsp;&nbsp;Top level builders default to C&lt;$0&gt;
(the name of the executable).&nbsp;&nbsp;Child builders are named via the C&lt;child&gt;
method.&nbsp;&nbsp;If no name is supplied, will be named &quot;Child of $parent-&gt;name&quot;.

=cut</pre></td></tr>
<tr><td class="h">402</td><td colspan="7"></td></tr><tr><td class="h">403</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L403">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">sub name { shift-&gt;{Name} }</td></tr>
<tr><td class="h">404</td><td colspan="7"></td></tr><tr><td class="h">405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub DESTROY {</td></tr>
<tr><td class="h">406</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L406">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">407</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L407">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L407">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;parent and $$ == $self-&gt;{Original_Pid} ) {</td></tr>
<tr><td class="h">408</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $self-&gt;name;</td></tr>
<tr><td class="h">409</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Child ($name) exited without calling finalize()</td></tr>
<tr><td class="h">411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">412</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;{In_Destroy} = 1;</td></tr>
<tr><td class="h">413</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;parent-&gt;ok(0, $name);</td></tr>
<tr><td class="h">414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">416</td><td colspan="7"></td></tr><tr><td class="h">417 - 425</td><td colspan="6"></td><td class="s"><pre>=item B&lt;reset&gt;

&nbsp;&nbsp;$Test-&gt;reset;

Reinitializes the Test::Builder singleton to its original state.
Mostly useful for tests run in persistent environments where the same
test might be run multiple times in the same process.

=cut</pre></td></tr>
<tr><td class="h">426</td><td colspan="7"></td></tr><tr><td class="h">427</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $Level;</td></tr>
<tr><td class="h">428</td><td colspan="7"></td></tr><tr><td class="h">429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub reset {&nbsp;&nbsp;&nbsp;&nbsp;## no critic (Subroutines::ProhibitBuiltinHomonyms)</td></tr>
<tr><td class="h">430</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L430">44</a></div></td><td><div class="c3">1</div></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self) = @_;</td></tr>
<tr><td class="h">431</td><td colspan="7"></td></tr><tr><td class="h">432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We leave this a global because it has to be localized and localizing</td></tr>
<tr><td class="h">433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# hash keys is just asking for pain.&nbsp;&nbsp;Also, it was documented.</td></tr>
<tr><td class="h">434</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Level = 1;</td></tr>
<tr><td class="h">435</td><td colspan="7"></td></tr><tr><td class="h">436</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Name}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0;</td></tr>
<tr><td class="h">437</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(1);</td></tr>
<tr><td class="h">438</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Ending}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">439</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan}&nbsp;&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">440</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">441</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Output_Plan} = 0;</td></tr>
<tr><td class="h">442</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Done_Testing} = 0;</td></tr>
<tr><td class="h">443</td><td colspan="7"></td></tr><tr><td class="h">444</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Original_Pid} = $$;</td></tr>
<tr><td class="h">445</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>359</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Child_Name}&nbsp;&nbsp;&nbsp;= undef;</td></tr>
<tr><td class="h">446</td><td><div class="c3">44</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L446">50</a></div></td><td></td><td></td><td><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Indent}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||= &#39;&#39;;</td></tr>
<tr><td class="h">447</td><td colspan="7"></td></tr><tr><td class="h">448</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test} = 0;</td></tr>
<tr><td class="h">449</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results} = &amp;share( [] );</td></tr>
<tr><td class="h">450</td><td colspan="7"></td></tr><tr><td class="h">451</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Exported_To}&nbsp;&nbsp;&nbsp;&nbsp;= undef;</td></tr>
<tr><td class="h">452</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = 0;</td></tr>
<tr><td class="h">453</td><td colspan="7"></td></tr><tr><td class="h">454</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Skip_All} = 0;</td></tr>
<tr><td class="h">455</td><td colspan="7"></td></tr><tr><td class="h">456</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Use_Nums} = 1;</td></tr>
<tr><td class="h">457</td><td colspan="7"></td></tr><tr><td class="h">458</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Header} = 0;</td></tr>
<tr><td class="h">459</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Ending} = 0;</td></tr>
<tr><td class="h">460</td><td colspan="7"></td></tr><tr><td class="h">461</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= undef;</td></tr>
<tr><td class="h">462</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo_Stack} = [];</td></tr>
<tr><td class="h">463</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo} = 0;</td></tr>
<tr><td class="h">464</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Opened_Testhandles} = 0;</td></tr>
<tr><td class="h">465</td><td colspan="7"></td></tr><tr><td class="h">466</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_share_keys;</td></tr>
<tr><td class="h">467</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dup_stdhandles;</td></tr>
<tr><td class="h">468</td><td colspan="7"></td></tr><tr><td class="h">469</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">471</td><td colspan="7"></td></tr><tr><td class="h">472</td><td colspan="7"></td></tr><tr><td class="h">473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Shared scalar values are lost when a hash is copied, so we have</td></tr>
<tr><td class="h">474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># a separate method to restore them.</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Shared references are retained across copies.</td></tr>
<tr><td class="h">476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _share_keys {</td></tr>
<tr><td class="h">477</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L477">44</a></div></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">478</td><td colspan="7"></td></tr><tr><td class="h">479</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;share( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">480</td><td colspan="7"></td></tr><tr><td class="h">481</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">483</td><td colspan="7"></td></tr><tr><td class="h">484</td><td colspan="7"></td></tr><tr><td class="h">485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">486</td><td colspan="7"></td></tr><tr><td class="h">487 - 517</td><td colspan="6"></td><td class="s"><pre>=head2 Setting up tests

These methods are for setting up tests and declaring how many there
are.&nbsp;&nbsp;You usually only want to call one of these methods.

=over 4

=item B&lt;plan&gt;

&nbsp;&nbsp;$Test-&gt;plan(&#39;no_plan&#39;);
&nbsp;&nbsp;$Test-&gt;plan( skip_all =&gt; $reason );
&nbsp;&nbsp;$Test-&gt;plan( tests =&gt; $num_tests );

A convenient way to set up your tests.&nbsp;&nbsp;Call this and Test::Builder
will print the appropriate headers and take the appropriate actions.

If you call C&lt;plan()&gt;, don&#39;t call any of the other methods below.

If a child calls &quot;skip_all&quot; in the plan, a C&lt;Test::Builder::Exception&gt; is
thrown.&nbsp;&nbsp;Trap this error, call C&lt;finalize()&gt; and don&#39;t run any more tests on
the child.

 my $child = $Test-&gt;child(&#39;some child&#39;);
 eval { $child-&gt;plan( $condition ? ( skip_all =&gt; $reason ) : ( tests =&gt; 3 )&nbsp;&nbsp;) };
 if ( eval { $@-&gt;isa(&#39;Test::Builder::Exception&#39;) } ) {
&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;finalize;
&nbsp;&nbsp;&nbsp;&nbsp;return;
 }
 # run your tests

=cut</pre></td></tr>
<tr><td class="h">518</td><td colspan="7"></td></tr><tr><td class="h">519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %plan_cmds = (</td></tr>
<tr><td class="h">520</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no_plan&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; \&amp;no_plan,</td></tr>
<tr><td class="h">521</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;skip_all&nbsp;&nbsp;&nbsp;&nbsp;=&gt; \&amp;skip_all,</td></tr>
<tr><td class="h">522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;tests&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; \&amp;_plan_tests,</td></tr>
<tr><td class="h">523</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">524</td><td colspan="7"></td></tr><tr><td class="h">525</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub plan {</td></tr>
<tr><td class="h">526</td><td><div class="c3">84</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L526">84</a></div></td><td><div class="c3">1</div></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $cmd, $arg ) = @_;</td></tr>
<tr><td class="h">527</td><td colspan="7"></td></tr><tr><td class="h">528</td><td><div class="c3">84</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L528">50</a></div></td><td></td><td></td><td></td><td><div>203</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $cmd;</td></tr>
<tr><td class="h">529</td><td colspan="7"></td></tr><tr><td class="h">530</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">531</td><td colspan="7"></td></tr><tr><td class="h">532</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L532">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;You tried to plan twice&quot;) if $self-&gt;{Have_Plan};</td></tr>
<tr><td class="h">533</td><td colspan="7"></td></tr><tr><td class="h">534</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L534">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $method = $plan_cmds{$cmd} ) {</td></tr>
<tr><td class="h">535</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">536</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$method($arg);</td></tr>
<tr><td class="h">537</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">539</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @args = grep { defined } ( $cmd, $arg );</td></tr>
<tr><td class="h">540</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;plan() doesn&#39;t understand @args&quot;);</td></tr>
<tr><td class="h">541</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">542</td><td colspan="7"></td></tr><tr><td class="h">543</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">545</td><td colspan="7"></td></tr><tr><td class="h">546</td><td colspan="7"></td></tr><tr><td class="h">547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _plan_tests {</td></tr>
<tr><td class="h">548</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L548">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $arg) = @_;</td></tr>
<tr><td class="h">549</td><td colspan="7"></td></tr><tr><td class="h">550</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L550">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L550">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($arg) {</td></tr>
<tr><td class="h">551</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">552</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;expected_tests($arg);</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( !defined $arg ) {</td></tr>
<tr><td class="h">555</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Got an undefined number of tests&quot;);</td></tr>
<tr><td class="h">556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">558</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;You said to run 0 tests&quot;);</td></tr>
<tr><td class="h">559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">560</td><td colspan="7"></td></tr><tr><td class="h">561</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">563</td><td colspan="7"></td></tr><tr><td class="h">564 - 572</td><td colspan="6"></td><td class="s"><pre>=item B&lt;expected_tests&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $max = $Test-&gt;expected_tests;
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;expected_tests($max);

Gets/sets the number of tests we expect this test to run and prints out
the appropriate headers.

=cut</pre></td></tr>
<tr><td class="h">573</td><td colspan="7"></td></tr><tr><td class="h">574</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub expected_tests {</td></tr>
<tr><td class="h">575</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L575">44</a></div></td><td><div class="c3">1</div></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">576</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($max) = @_;</td></tr>
<tr><td class="h">577</td><td colspan="7"></td></tr><tr><td class="h">578</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L578">50</a></div></td><td></td><td></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@_) {</td></tr>
<tr><td class="h">579</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L579">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Number of tests must be a positive integer.&nbsp;&nbsp;You gave it &#39;$max&#39;&quot;)</td></tr>
<tr><td class="h">580</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $max =~ /^\+?\d+$/;</td></tr>
<tr><td class="h">581</td><td colspan="7"></td></tr><tr><td class="h">582</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $max;</td></tr>
<tr><td class="h">583</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1;</td></tr>
<tr><td class="h">584</td><td colspan="7"></td></tr><tr><td class="h">585</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L585">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($max) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">587</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">588</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">589</td><td colspan="7"></td></tr><tr><td class="h">590 - 596</td><td colspan="6"></td><td class="s"><pre>=item B&lt;no_plan&gt;

&nbsp;&nbsp;$Test-&gt;no_plan;

Declares that this test will run an indeterminate number of tests.

=cut</pre></td></tr>
<tr><td class="h">597</td><td colspan="7"></td></tr><tr><td class="h">598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub no_plan {</td></tr>
<tr><td class="h">599</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L599">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $arg) = @_;</td></tr>
<tr><td class="h">600</td><td colspan="7"></td></tr><tr><td class="h">601</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L601">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;carp(&quot;no_plan takes no arguments&quot;) if $arg;</td></tr>
<tr><td class="h">602</td><td colspan="7"></td></tr><tr><td class="h">603</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan}&nbsp;&nbsp;&nbsp;= 1;</td></tr>
<tr><td class="h">604</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan} = 1;</td></tr>
<tr><td class="h">605</td><td colspan="7"></td></tr><tr><td class="h">606</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">608</td><td colspan="7"></td></tr><tr><td class="h">609 - 629</td><td colspan="6"></td><td class="s"><pre>=begin private

=item B&lt;_output_plan&gt;

&nbsp;&nbsp;$tb-&gt;_output_plan($max);
&nbsp;&nbsp;$tb-&gt;_output_plan($max, $directive);
&nbsp;&nbsp;$tb-&gt;_output_plan($max, $directive =&gt; $reason);

Handles displaying the test plan.

If a C&lt;$directive&gt; and/or C&lt;$reason&gt; are given they will be output with the
plan.&nbsp;&nbsp;So here&#39;s what skipping all tests looks like:

&nbsp;&nbsp;&nbsp;&nbsp;$tb-&gt;_output_plan(0, &quot;SKIP&quot;, &quot;Because I said so&quot;);

It sets C&lt;&lt; $tb-&gt;{Have_Output_Plan} &gt;&gt; and will croak if the plan was already
output.

=end private

=cut</pre></td></tr>
<tr><td class="h">630</td><td colspan="7"></td></tr><tr><td class="h">631</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _output_plan {</td></tr>
<tr><td class="h">632</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L632">44</a></div></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $max, $directive, $reason) = @_;</td></tr>
<tr><td class="h">633</td><td colspan="7"></td></tr><tr><td class="h">634</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L634">50</a></div></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;carp(&quot;The plan was already output&quot;) if $self-&gt;{Have_Output_Plan};</td></tr>
<tr><td class="h">635</td><td colspan="7"></td></tr><tr><td class="h">636</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $plan = &quot;1..$max&quot;;</td></tr>
<tr><td class="h">637</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L637">50</a></div></td><td></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$plan .= &quot; # $directive&quot; if defined $directive;</td></tr>
<tr><td class="h">638</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L638">50</a></div></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$plan .= &quot; $reason&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if defined $reason;</td></tr>
<tr><td class="h">639</td><td colspan="7"></td></tr><tr><td class="h">640</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print(&quot;$plan\n&quot;);</td></tr>
<tr><td class="h">641</td><td colspan="7"></td></tr><tr><td class="h">642</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Output_Plan} = 1;</td></tr>
<tr><td class="h">643</td><td colspan="7"></td></tr><tr><td class="h">644</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">645</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">646</td><td colspan="7"></td></tr><tr><td class="h">647</td><td colspan="7"></td></tr><tr><td class="h">648 - 681</td><td colspan="6"></td><td class="s"><pre>=item B&lt;done_testing&gt;

&nbsp;&nbsp;$Test-&gt;done_testing();
&nbsp;&nbsp;$Test-&gt;done_testing($num_tests);

Declares that you are done testing, no more tests will be run after this point.

If a plan has not yet been output, it will do so.

$num_tests is the number of tests you planned to run.&nbsp;&nbsp;If a numbered
plan was already declared, and if this contradicts, a failing test
will be run to reflect the planning mistake.&nbsp;&nbsp;If C&lt;no_plan&gt; was declared,
this will override.

If C&lt;done_testing()&gt; is called twice, the second call will issue a
failing test.

If C&lt;$num_tests&gt; is omitted, the number of tests run will be used, like
no_plan.

C&lt;done_testing()&gt; is, in effect, used when you&#39;d want to use C&lt;no_plan&gt;, but
safer. You&#39;d use it like so:

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;ok($a == $b);
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;done_testing();

Or to plan a variable number of tests:

&nbsp;&nbsp;&nbsp;&nbsp;for my $test (@tests) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;ok($test);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;done_testing(scalar @tests);

=cut</pre></td></tr>
<tr><td class="h">682</td><td colspan="7"></td></tr><tr><td class="h">683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub done_testing {</td></tr>
<tr><td class="h">684</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L684">44</a></div></td><td><div class="c3">1</div></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $num_tests) = @_;</td></tr>
<tr><td class="h">685</td><td colspan="7"></td></tr><tr><td class="h">686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If done_testing() specified the number of tests, shut off no_plan.</td></tr>
<tr><td class="h">687</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L687">50</a></div></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $num_tests ) {</td></tr>
<tr><td class="h">688</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan} = 0;</td></tr>
<tr><td class="h">689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">691</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$num_tests = $self-&gt;current_test;</td></tr>
<tr><td class="h">692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">693</td><td colspan="7"></td></tr><tr><td class="h">694</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L694">50</a></div></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Done_Testing} ) {</td></tr>
<tr><td class="h">695</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($file, $line) = @{$self-&gt;{Done_Testing}}[1,2];</td></tr>
<tr><td class="h">696</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok(0, &quot;done_testing() was already called at $file line $line&quot;);</td></tr>
<tr><td class="h">697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td colspan="7"></td></tr><tr><td class="h">700</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Done_Testing} = [caller];</td></tr>
<tr><td class="h">701</td><td colspan="7"></td></tr><tr><td class="h">702</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L702">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L702">33</a></div></td><td></td><td></td><td><div>136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;expected_tests &amp;&amp; $num_tests != $self-&gt;expected_tests ) {</td></tr>
<tr><td class="h">703</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok(0, &quot;planned to run @{[ $self-&gt;expected_tests ]} &quot;.</td></tr>
<tr><td class="h">704</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;but done_testing() expects $num_tests&quot;);</td></tr>
<tr><td class="h">705</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">707</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $num_tests;</td></tr>
<tr><td class="h">708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">709</td><td colspan="7"></td></tr><tr><td class="h">710</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L710">50</a></div></td><td></td><td></td><td></td><td><div>198</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($num_tests) unless $self-&gt;{Have_Output_Plan};</td></tr>
<tr><td class="h">711</td><td colspan="7"></td></tr><tr><td class="h">712</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan} = 1;</td></tr>
<tr><td class="h">713</td><td colspan="7"></td></tr><tr><td class="h">714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# The wrong number of tests were run</td></tr>
<tr><td class="h">715</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L715">50</a></div></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0) if $self-&gt;{Expected_Tests} != $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">716</td><td colspan="7"></td></tr><tr><td class="h">717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# No tests were run</td></tr>
<tr><td class="h">718</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L718">50</a></div></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0) if $self-&gt;{Curr_Test} == 0;</td></tr>
<tr><td class="h">719</td><td colspan="7"></td></tr><tr><td class="h">720</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>1415</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">721</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">722</td><td colspan="7"></td></tr><tr><td class="h">723</td><td colspan="7"></td></tr><tr><td class="h">724 - 732</td><td colspan="6"></td><td class="s"><pre>=item B&lt;has_plan&gt;

&nbsp;&nbsp;$plan = $Test-&gt;has_plan

Find out whether a plan has been defined. C&lt;$plan&gt; is either C&lt;undef&gt; (no plan
has been set), C&lt;no_plan&gt; (indeterminate # of tests) or an integer (the number
of expected tests).

=cut</pre></td></tr>
<tr><td class="h">733</td><td colspan="7"></td></tr><tr><td class="h">734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub has_plan {</td></tr>
<tr><td class="h">735</td><td><div class="c3">417</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L735">417</a></div></td><td><div class="c3">1</div></td><td><div>354</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">736</td><td colspan="7"></td></tr><tr><td class="h">737</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L737">50</a></div></td><td></td><td></td><td></td><td><div>753</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( $self-&gt;{Expected_Tests} ) if $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">738</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L738">50</a></div></td><td></td><td></td><td></td><td><div>677</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return(&#39;no_plan&#39;) if $self-&gt;{No_Plan};</td></tr>
<tr><td class="h">739</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>479</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return(undef);</td></tr>
<tr><td class="h">740</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">741</td><td colspan="7"></td></tr><tr><td class="h">742 - 749</td><td colspan="6"></td><td class="s"><pre>=item B&lt;skip_all&gt;

&nbsp;&nbsp;$Test-&gt;skip_all;
&nbsp;&nbsp;$Test-&gt;skip_all($reason);

Skips all the tests, using the given C&lt;$reason&gt;.&nbsp;&nbsp;Exits immediately with 0.

=cut</pre></td></tr>
<tr><td class="h">750</td><td colspan="7"></td></tr><tr><td class="h">751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub skip_all {</td></tr>
<tr><td class="h">752</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L752">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $reason ) = @_;</td></tr>
<tr><td class="h">753</td><td colspan="7"></td></tr><tr><td class="h">754</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L754">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Skip_All} = $self-&gt;parent ? $reason : 1;</td></tr>
<tr><td class="h">755</td><td colspan="7"></td></tr><tr><td class="h">756</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L756">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan(0, &quot;SKIP&quot;, $reason) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">757</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L757">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;parent ) {</td></tr>
<tr><td class="h">758</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die bless {} =&gt; &#39;Test::Builder::Exception&#39;;</td></tr>
<tr><td class="h">759</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">760</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;exit(0);</td></tr>
<tr><td class="h">761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">762</td><td colspan="7"></td></tr><tr><td class="h">763 - 774</td><td colspan="6"></td><td class="s"><pre>=item B&lt;exported_to&gt;

&nbsp;&nbsp;my $pack = $Test-&gt;exported_to;
&nbsp;&nbsp;$Test-&gt;exported_to($pack);

Tells Test::Builder what package you exported your functions to.

This method isn&#39;t terribly useful since modules which share the same
Test::Builder object might get exported to different packages and only
the last one will be honored.

=cut</pre></td></tr>
<tr><td class="h">775</td><td colspan="7"></td></tr><tr><td class="h">776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub exported_to {</td></tr>
<tr><td class="h">777</td><td><div class="c3">84</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L777">84</a></div></td><td><div class="c3">1</div></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack ) = @_;</td></tr>
<tr><td class="h">778</td><td colspan="7"></td></tr><tr><td class="h">779</td><td><div class="c3">84</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L779">50</a></div></td><td></td><td></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $pack ) {</td></tr>
<tr><td class="h">780</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Exported_To} = $pack;</td></tr>
<tr><td class="h">781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">782</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Exported_To};</td></tr>
<tr><td class="h">783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">784</td><td colspan="7"></td></tr><tr><td class="h">785</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">786</td><td colspan="7"></td></tr><tr><td class="h">787 - 804</td><td colspan="6"></td><td class="s"><pre>=head2 Running tests

These actually run the tests, analogous to the functions in Test::More.

They all return true if the test passed, false if the test failed.

C&lt;$name&gt; is always optional.

=over 4

=item B&lt;ok&gt;

&nbsp;&nbsp;$Test-&gt;ok($test, $name);

Your basic test.&nbsp;&nbsp;Pass if C&lt;$test&gt; is true, fail if $test is false.&nbsp;&nbsp;Just
like Test::Simple&#39;s C&lt;ok()&gt;.

=cut</pre></td></tr>
<tr><td class="h">805</td><td colspan="7"></td></tr><tr><td class="h">806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ok {</td></tr>
<tr><td class="h">807</td><td><div class="c3">417</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L807">417</a></div></td><td><div class="c3">1</div></td><td><div>691</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $test, $name ) = @_;</td></tr>
<tr><td class="h">808</td><td colspan="7"></td></tr><tr><td class="h">809</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L809">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L809">33</a></div></td><td></td><td></td><td><div>1036</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;{Child_Name} and not $self-&gt;{In_Destroy} ) {</td></tr>
<tr><td class="h">810</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L810">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name = &#39;unnamed test&#39; unless defined $name;</td></tr>
<tr><td class="h">811</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">812</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Cannot run test ($name) with active children&quot;);</td></tr>
<tr><td class="h">813</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $test might contain an object which we don&#39;t want to accidentally</td></tr>
<tr><td class="h">815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# store, so we turn it into a boolean.</td></tr>
<tr><td class="h">816</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L816">100</a></div></td><td></td><td></td><td></td><td><div>604</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$test = $test ? 1 : 0;</td></tr>
<tr><td class="h">817</td><td colspan="7"></td></tr><tr><td class="h">818</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>842</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">819</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>546</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">820</td><td colspan="7"></td></tr><tr><td class="h">821</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# In case $name is a string overloaded object, force it to stringify.</td></tr>
<tr><td class="h">822</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>939</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$name );</td></tr>
<tr><td class="h">823</td><td colspan="7"></td></tr><tr><td class="h">824</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L824">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L824">33</a></div></td><td></td><td></td><td><div>2436</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;ERR&quot;) if defined $name and $name =~ /^[\d\s]+$/;</td></tr>
<tr><td class="h">825</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;You named your test &#39;$name&#39;.&nbsp;&nbsp;You shouldn&#39;t use numbers for your test names.</td></tr>
<tr><td class="h">826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Very confusing.</td></tr>
<tr><td class="h">827</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">ERR</td></tr>
<tr><td class="h">828</td><td colspan="7"></td></tr><tr><td class="h">829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Capture the value of $TODO for the rest of this ok() call</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# so it can more easily be found by other routines.</td></tr>
<tr><td class="h">831</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>886</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $todo&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;todo();</td></tr>
<tr><td class="h">832</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>714</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $in_todo = $self-&gt;in_todo;</td></tr>
<tr><td class="h">833</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L833">100</a></div></td><td></td><td></td><td></td><td><div>692</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $self-&gt;{Todo} = $todo if $in_todo;</td></tr>
<tr><td class="h">834</td><td colspan="7"></td></tr><tr><td class="h">835</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>1575</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$todo );</td></tr>
<tr><td class="h">836</td><td colspan="7"></td></tr><tr><td class="h">837</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>372</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out;</td></tr>
<tr><td class="h">838</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>850</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $result = &amp;share( {} );</td></tr>
<tr><td class="h">839</td><td colspan="7"></td></tr><tr><td class="h">840</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L840">100</a></div></td><td></td><td></td><td></td><td><div>646</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($test) {</td></tr>
<tr><td class="h">841</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;not &quot;;</td></tr>
<tr><td class="h">842</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L842">50</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$result{ &#39;ok&#39;, &#39;actual_ok&#39; } = ( ( $self-&gt;in_todo ? 1 : 0 ), 0 );</td></tr>
<tr><td class="h">843</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">844</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">845</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>1105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$result{ &#39;ok&#39;, &#39;actual_ok&#39; } = ( 1, $test );</td></tr>
<tr><td class="h">846</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">847</td><td colspan="7"></td></tr><tr><td class="h">848</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>578</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;ok&quot;;</td></tr>
<tr><td class="h">849</td><td><div class="c3">417</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L849">50</a></div></td><td></td><td></td><td></td><td><div>682</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">850</td><td colspan="7"></td></tr><tr><td class="h">851</td><td><div class="c3">417</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L851">50</a></div></td><td></td><td></td><td></td><td><div>617</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $name ) {</td></tr>
<tr><td class="h">852</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>561</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name =~ s|#|\\#|g;&nbsp;&nbsp;&nbsp;&nbsp;# # in a name can confuse Test::Harness.</td></tr>
<tr><td class="h">853</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>593</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; - $name&quot;;</td></tr>
<tr><td class="h">854</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>698</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{name} = $name;</td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">857</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{name} = &#39;&#39;;</td></tr>
<tr><td class="h">858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">859</td><td colspan="7"></td></tr><tr><td class="h">860</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L860">100</a></div></td><td></td><td></td><td></td><td><div>583</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;in_todo ) {</td></tr>
<tr><td class="h">861</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # TODO $todo&quot;;</td></tr>
<tr><td class="h">862</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{reason} = $todo;</td></tr>
<tr><td class="h">863</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{type}&nbsp;&nbsp;&nbsp;= &#39;todo&#39;;</td></tr>
<tr><td class="h">864</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">866</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>711</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{reason} = &#39;&#39;;</td></tr>
<tr><td class="h">867</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>575</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{type}&nbsp;&nbsp;&nbsp;= &#39;&#39;;</td></tr>
<tr><td class="h">868</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">869</td><td colspan="7"></td></tr><tr><td class="h">870</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>887</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = $result;</td></tr>
<tr><td class="h">871</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;\n&quot;;</td></tr>
<tr><td class="h">872</td><td colspan="7"></td></tr><tr><td class="h">873</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>823</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">874</td><td colspan="7"></td></tr><tr><td class="h">875</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L875">100</a></div></td><td></td><td></td><td></td><td><div>791</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($test) {</td></tr>
<tr><td class="h">876</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L876">50</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $msg = $self-&gt;in_todo ? &quot;Failed (TODO)&quot; : &quot;Failed&quot;;</td></tr>
<tr><td class="h">877</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L877">50</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_to_fh( $self-&gt;_diag_fh, &quot;\n&quot; ) if $ENV{HARNESS_ACTIVE};</td></tr>
<tr><td class="h">878</td><td colspan="7"></td></tr><tr><td class="h">879</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( undef, $file, $line ) = $self-&gt;caller;</td></tr>
<tr><td class="h">880</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L880">50</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $name ) {</td></tr>
<tr><td class="h">881</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[&nbsp;&nbsp;$msg test &#39;$name&#39;\n]);</td></tr>
<tr><td class="h">882</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[&nbsp;&nbsp;at $file line $line.\n]);</td></tr>
<tr><td class="h">883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">885</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[&nbsp;&nbsp;$msg test at $file line $line.\n]);</td></tr>
<tr><td class="h">886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">888</td><td colspan="7"></td></tr><tr><td class="h">889</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L889">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L889">67</a></div></td><td></td><td></td><td><div>803</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0) unless $test || $self-&gt;in_todo;</td></tr>
<tr><td class="h">890</td><td colspan="7"></td></tr><tr><td class="h">891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check that we haven&#39;t violated the plan</td></tr>
<tr><td class="h">892</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>724</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_check_is_passing_plan();</td></tr>
<tr><td class="h">893</td><td colspan="7"></td></tr><tr><td class="h">894</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L894">100</a></div></td><td></td><td></td><td></td><td><div>988</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $test ? 1 : 0;</td></tr>
<tr><td class="h">895</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">896</td><td colspan="7"></td></tr><tr><td class="h">897</td><td colspan="7"></td></tr><tr><td class="h">898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Check that we haven&#39;t yet violated the plan and set</td></tr>
<tr><td class="h">899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># is_passing() accordingly</td></tr>
<tr><td class="h">900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _check_is_passing_plan {</td></tr>
<tr><td class="h">901</td><td><div class="c3">417</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L901">417</a></div></td><td></td><td><div>411</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">902</td><td colspan="7"></td></tr><tr><td class="h">903</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>715</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $plan = $self-&gt;has_plan;</td></tr>
<tr><td class="h">904</td><td><div class="c3">417</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L904">50</a></div></td><td></td><td></td><td></td><td><div>794</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless defined $plan;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# no plan yet defined</td></tr>
<tr><td class="h">905</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L905">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $plan !~ /\D/;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# no numeric plan</td></tr>
<tr><td class="h">906</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L906">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0) if $plan &lt; $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">907</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">908</td><td colspan="7"></td></tr><tr><td class="h">909</td><td colspan="7"></td></tr><tr><td class="h">910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload {</td></tr>
<tr><td class="h">911</td><td><div class="c3">834</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L911">834</a></div></td><td></td><td><div>703</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">912</td><td><div class="c3">834</div></td><td></td><td></td><td></td><td></td><td><div>829</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type = shift;</td></tr>
<tr><td class="h">913</td><td colspan="7"></td></tr><tr><td class="h">914</td><td><div class="c3">834</div><div class="c3">834</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L914">834</a></div></td><td></td><td><div>3114</div><div>4241</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(sub { require overload; }, die_on_fail =&gt; 1);</td></tr>
<tr><td class="h">915</td><td colspan="7"></td></tr><tr><td class="h">916</td><td><div class="c3">834</div></td><td></td><td></td><td></td><td></td><td><div>1987</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $thing (@_) {</td></tr>
<tr><td class="h">917</td><td><div class="c3">834</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L917">50</a></div></td><td></td><td></td><td></td><td><div>1362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;_is_object($$thing) ) {</td></tr>
<tr><td class="h">918</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L918">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $string_meth = overload::Method( $$thing, $type ) ) {</td></tr>
<tr><td class="h">919</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$thing = $$thing-&gt;$string_meth();</td></tr>
<tr><td class="h">920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">921</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">923</td><td colspan="7"></td></tr><tr><td class="h">924</td><td><div class="c3">834</div></td><td></td><td></td><td></td><td></td><td><div>1155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">925</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">926</td><td colspan="7"></td></tr><tr><td class="h">927</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_object {</td></tr>
<tr><td class="h">928</td><td><div class="c3">834</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L928">834</a></div></td><td></td><td><div>984</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $thing ) = @_;</td></tr>
<tr><td class="h">929</td><td colspan="7"></td></tr><tr><td class="h">930</td><td><div class="c3">834</div><div class="c3">834</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L930">50</a></div><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L930">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L930">834</a></div></td><td></td><td><div>2256</div><div>1986</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_try( sub { ref $thing &amp;&amp; $thing-&gt;isa(&#39;UNIVERSAL&#39;) } ) ? 1 : 0;</td></tr>
<tr><td class="h">931</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">932</td><td colspan="7"></td></tr><tr><td class="h">933</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload_str {</td></tr>
<tr><td class="h">934</td><td><div class="c3">834</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L934">834</a></div></td><td></td><td><div>739</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">935</td><td colspan="7"></td></tr><tr><td class="h">936</td><td><div class="c3">834</div></td><td></td><td></td><td></td><td></td><td><div>1368</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_unoverload( q[&quot;&quot;], @_ );</td></tr>
<tr><td class="h">937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">938</td><td colspan="7"></td></tr><tr><td class="h">939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload_num {</td></tr>
<tr><td class="h">940</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L940">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">941</td><td colspan="7"></td></tr><tr><td class="h">942</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload( &#39;0+&#39;, @_ );</td></tr>
<tr><td class="h">943</td><td colspan="7"></td></tr><tr><td class="h">944</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $val (@_) {</td></tr>
<tr><td class="h">945</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L945">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless $self-&gt;_is_dualvar($$val);</td></tr>
<tr><td class="h">946</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = $$val + 0;</td></tr>
<tr><td class="h">947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">948</td><td colspan="7"></td></tr><tr><td class="h">949</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">951</td><td colspan="7"></td></tr><tr><td class="h">952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is a hack to detect a dualvar such as $!</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_dualvar {</td></tr>
<tr><td class="h">954</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L954">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $val ) = @_;</td></tr>
<tr><td class="h">955</td><td colspan="7"></td></tr><tr><td class="h">956</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Objects are not dualvars.</td></tr>
<tr><td class="h">957</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L957">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 if ref $val;</td></tr>
<tr><td class="h">958</td><td colspan="7"></td></tr><tr><td class="h">959</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L959">44</a></div></td><td></td><td><div>196</div><div>47</div><div>49050</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;numeric&#39;;</td></tr>
<tr><td class="h">960</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numval = $val + 0;</td></tr>
<tr><td class="h">961</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L961">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($numval != 0 and $numval ne $val ? 1 : 0);</td></tr>
<tr><td class="h">962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">963</td><td colspan="7"></td></tr><tr><td class="h">964 - 982</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is_eq&gt;

&nbsp;&nbsp;$Test-&gt;is_eq($got, $expected, $name);

Like Test::More&#39;s C&lt;is()&gt;.&nbsp;&nbsp;Checks if C&lt;$got eq $expected&gt;.&nbsp;&nbsp;This is the
string version.

C&lt;undef&gt; only ever matches another C&lt;undef&gt;.

=item B&lt;is_num&gt;

&nbsp;&nbsp;$Test-&gt;is_num($got, $expected, $name);

Like Test::More&#39;s C&lt;is()&gt;.&nbsp;&nbsp;Checks if C&lt;$got == $expected&gt;.&nbsp;&nbsp;This is the
numeric version.

C&lt;undef&gt; only ever matches another C&lt;undef&gt;.

=cut</pre></td></tr>
<tr><td class="h">983</td><td colspan="7"></td></tr><tr><td class="h">984</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_eq {</td></tr>
<tr><td class="h">985</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L985">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $expect, $name ) = @_;</td></tr>
<tr><td class="h">986</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">987</td><td colspan="7"></td></tr><tr><td class="h">988</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L988">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L988">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $expect ) {</td></tr>
<tr><td class="h">989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">990</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L990">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = !defined $got &amp;&amp; !defined $expect;</td></tr>
<tr><td class="h">991</td><td colspan="7"></td></tr><tr><td class="h">992</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">993</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L993">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, &#39;eq&#39;, $expect ) unless $test;</td></tr>
<tr><td class="h">994</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">996</td><td colspan="7"></td></tr><tr><td class="h">997</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;eq&#39;, $expect, $name );</td></tr>
<tr><td class="h">998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">999</td><td colspan="7"></td></tr><tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_num {</td></tr>
<tr><td class="h">1001</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1001">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $expect, $name ) = @_;</td></tr>
<tr><td class="h">1002</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1003</td><td colspan="7"></td></tr><tr><td class="h">1004</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1004">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1004">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $expect ) {</td></tr>
<tr><td class="h">1005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">1006</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1006">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = !defined $got &amp;&amp; !defined $expect;</td></tr>
<tr><td class="h">1007</td><td colspan="7"></td></tr><tr><td class="h">1008</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1009</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1009">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, &#39;==&#39;, $expect ) unless $test;</td></tr>
<tr><td class="h">1010</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1012</td><td colspan="7"></td></tr><tr><td class="h">1013</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;==&#39;, $expect, $name );</td></tr>
<tr><td class="h">1014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1015</td><td colspan="7"></td></tr><tr><td class="h">1016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _diag_fmt {</td></tr>
<tr><td class="h">1017</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1017">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $type, $val ) = @_;</td></tr>
<tr><td class="h">1018</td><td colspan="7"></td></tr><tr><td class="h">1019</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1019">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $$val ) {</td></tr>
<tr><td class="h">1020</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1020">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1020">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;eq&#39; or $type eq &#39;ne&#39; ) {</td></tr>
<tr><td class="h">1021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# quote and force string context</td></tr>
<tr><td class="h">1022</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = &quot;&#39;$$val&#39;&quot;;</td></tr>
<tr><td class="h">1023</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1025</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# force numeric context</td></tr>
<tr><td class="h">1026</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_num($val);</td></tr>
<tr><td class="h">1027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1030</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = &#39;undef&#39;;</td></tr>
<tr><td class="h">1031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1032</td><td colspan="7"></td></tr><tr><td class="h">1033</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1035</td><td colspan="7"></td></tr><tr><td class="h">1036</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_diag {</td></tr>
<tr><td class="h">1037</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1037">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect ) = @_;</td></tr>
<tr><td class="h">1038</td><td colspan="7"></td></tr><tr><td class="h">1039</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_diag_fmt( $type, $_ ) for \$got, \$expect;</td></tr>
<tr><td class="h">1040</td><td colspan="7"></td></tr><tr><td class="h">1041</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1042</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got: $got</td></tr>
<tr><td class="h">1044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;expected: $expect</td></tr>
<tr><td class="h">1045</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">1046</td><td colspan="7"></td></tr><tr><td class="h">1047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1048</td><td colspan="7"></td></tr><tr><td class="h">1049</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _isnt_diag {</td></tr>
<tr><td class="h">1050</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1050">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type ) = @_;</td></tr>
<tr><td class="h">1051</td><td colspan="7"></td></tr><tr><td class="h">1052</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_diag_fmt( $type, \$got );</td></tr>
<tr><td class="h">1053</td><td colspan="7"></td></tr><tr><td class="h">1054</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1055</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">1056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got: $got</td></tr>
<tr><td class="h">1057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;expected: anything else</td></tr>
<tr><td class="h">1058</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">1059</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1060</td><td colspan="7"></td></tr><tr><td class="h">1061 - 1075</td><td colspan="6"></td><td class="s"><pre>=item B&lt;isnt_eq&gt;

&nbsp;&nbsp;$Test-&gt;isnt_eq($got, $dont_expect, $name);

Like Test::More&#39;s C&lt;isnt()&gt;.&nbsp;&nbsp;Checks if C&lt;$got ne $dont_expect&gt;.&nbsp;&nbsp;This is
the string version.

=item B&lt;isnt_num&gt;

&nbsp;&nbsp;$Test-&gt;isnt_num($got, $dont_expect, $name);

Like Test::More&#39;s C&lt;isnt()&gt;.&nbsp;&nbsp;Checks if C&lt;$got ne $dont_expect&gt;.&nbsp;&nbsp;This is
the numeric version.

=cut</pre></td></tr>
<tr><td class="h">1076</td><td colspan="7"></td></tr><tr><td class="h">1077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isnt_eq {</td></tr>
<tr><td class="h">1078</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1078">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $dont_expect, $name ) = @_;</td></tr>
<tr><td class="h">1079</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1080</td><td colspan="7"></td></tr><tr><td class="h">1081</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1081">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1081">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $dont_expect ) {</td></tr>
<tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">1083</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1083">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = defined $got || defined $dont_expect;</td></tr>
<tr><td class="h">1084</td><td colspan="7"></td></tr><tr><td class="h">1085</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1086</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1086">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, &#39;ne&#39; ) unless $test;</td></tr>
<tr><td class="h">1087</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">1088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1089</td><td colspan="7"></td></tr><tr><td class="h">1090</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;ne&#39;, $dont_expect, $name );</td></tr>
<tr><td class="h">1091</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1092</td><td colspan="7"></td></tr><tr><td class="h">1093</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isnt_num {</td></tr>
<tr><td class="h">1094</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1094">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $dont_expect, $name ) = @_;</td></tr>
<tr><td class="h">1095</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1096</td><td colspan="7"></td></tr><tr><td class="h">1097</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1097">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1097">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $dont_expect ) {</td></tr>
<tr><td class="h">1098</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">1099</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1099">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = defined $got || defined $dont_expect;</td></tr>
<tr><td class="h">1100</td><td colspan="7"></td></tr><tr><td class="h">1101</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1102</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1102">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, &#39;!=&#39; ) unless $test;</td></tr>
<tr><td class="h">1103</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">1104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1105</td><td colspan="7"></td></tr><tr><td class="h">1106</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;!=&#39;, $dont_expect, $name );</td></tr>
<tr><td class="h">1107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1108</td><td colspan="7"></td></tr><tr><td class="h">1109 - 1124</td><td colspan="6"></td><td class="s"><pre>=item B&lt;like&gt;

&nbsp;&nbsp;$Test-&gt;like($thing, qr/$regex/, $name);
&nbsp;&nbsp;$Test-&gt;like($thing, &#39;/$regex/&#39;, $name);

Like Test::More&#39;s C&lt;like()&gt;.&nbsp;&nbsp;Checks if $thing matches the given C&lt;$regex&gt;.

=item B&lt;unlike&gt;

&nbsp;&nbsp;$Test-&gt;unlike($thing, qr/$regex/, $name);
&nbsp;&nbsp;$Test-&gt;unlike($thing, &#39;/$regex/&#39;, $name);

Like Test::More&#39;s C&lt;unlike()&gt;.&nbsp;&nbsp;Checks if $thing B&lt;does not match&gt; the
given C&lt;$regex&gt;.

=cut</pre></td></tr>
<tr><td class="h">1125</td><td colspan="7"></td></tr><tr><td class="h">1126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub like {</td></tr>
<tr><td class="h">1127</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1127">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $thing, $regex, $name ) = @_;</td></tr>
<tr><td class="h">1128</td><td colspan="7"></td></tr><tr><td class="h">1129</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1130</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_regex_ok( $thing, $regex, &#39;=~&#39;, $name );</td></tr>
<tr><td class="h">1131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1132</td><td colspan="7"></td></tr><tr><td class="h">1133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unlike {</td></tr>
<tr><td class="h">1134</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1134">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $thing, $regex, $name ) = @_;</td></tr>
<tr><td class="h">1135</td><td colspan="7"></td></tr><tr><td class="h">1136</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1137</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_regex_ok( $thing, $regex, &#39;!~&#39;, $name );</td></tr>
<tr><td class="h">1138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1139</td><td colspan="7"></td></tr><tr><td class="h">1140 - 1148</td><td colspan="6"></td><td class="s"><pre>=item B&lt;cmp_ok&gt;

&nbsp;&nbsp;$Test-&gt;cmp_ok($thing, $type, $that, $name);

Works just like Test::More&#39;s C&lt;cmp_ok()&gt;.

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;cmp_ok($big_num, &#39;!=&#39;, $other_big_num);

=cut</pre></td></tr>
<tr><td class="h">1149</td><td colspan="7"></td></tr><tr><td class="h">1150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %numeric_cmps = map { ( $_, 1 ) } ( &quot;&lt;&quot;, &quot;&lt;=&quot;, &quot;&gt;&quot;, &quot;&gt;=&quot;, &quot;==&quot;, &quot;!=&quot;, &quot;&lt;=&gt;&quot; );</td></tr>
<tr><td class="h">1151</td><td colspan="7"></td></tr><tr><td class="h">1152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Bad, these are not comparison operators. Should we include more?</td></tr>
<tr><td class="h">1153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %cmp_ok_bl = map { ( $_, 1 ) } ( &quot;=&quot;, &quot;+=&quot;, &quot;.=&quot;, &quot;x=&quot;, &quot;^=&quot;, &quot;|=&quot;, &quot;||=&quot;, &quot;&amp;&amp;=&quot;, &quot;...&quot;);</td></tr>
<tr><td class="h">1154</td><td colspan="7"></td></tr><tr><td class="h">1155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cmp_ok {</td></tr>
<tr><td class="h">1156</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1156">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect, $name ) = @_;</td></tr>
<tr><td class="h">1157</td><td colspan="7"></td></tr><tr><td class="h">1158</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1158">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($cmp_ok_bl{$type}) {</td></tr>
<tr><td class="h">1159</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;$type is not a valid comparison operator in cmp_ok()&quot;);</td></tr>
<tr><td class="h">1160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1161</td><td colspan="7"></td></tr><tr><td class="h">1162</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test;</td></tr>
<tr><td class="h">1163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $error;</td></tr>
<tr><td class="h">1164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">1166</td><td colspan="7"></td></tr><tr><td class="h">1167</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local( $@, $!, $SIG{__DIE__} );&nbsp;&nbsp;&nbsp;&nbsp;# isolate eval</td></tr>
<tr><td class="h">1168</td><td colspan="7"></td></tr><tr><td class="h">1169</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($pack, $file, $line) = $self-&gt;caller();</td></tr>
<tr><td class="h">1170</td><td colspan="7"></td></tr><tr><td class="h">1171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# This is so that warnings come out at the caller&#39;s level</td></tr>
<tr><td class="h">1172</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = eval qq[</td></tr>
<tr><td class="h">1173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#line $line &quot;(eval in cmp_ok) $file&quot;</td></tr>
<tr><td class="h">1174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">\$got $type \$expect;</td></tr>
<tr><td class="h">1175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">];</td></tr>
<tr><td class="h">1176</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$error = $@;</td></tr>
<tr><td class="h">1177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1178</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1179</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1180</td><td colspan="7"></td></tr><tr><td class="h">1181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Treat overloaded objects as numbers if we&#39;re asked to do a</td></tr>
<tr><td class="h">1182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# numeric comparison.</td></tr>
<tr><td class="h">1183</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1183">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $unoverload</td></tr>
<tr><td class="h">1184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $numeric_cmps{$type}</td></tr>
<tr><td class="h">1185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? &#39;_unoverload_num&#39;</td></tr>
<tr><td class="h">1186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;_unoverload_str&#39;;</td></tr>
<tr><td class="h">1187</td><td colspan="7"></td></tr><tr><td class="h">1188</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1188">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;END&quot;) if $error;</td></tr>
<tr><td class="h">1189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">An error occurred while using $type:</td></tr>
<tr><td class="h">1190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">------------------------------------</td></tr>
<tr><td class="h">1191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$error</td></tr>
<tr><td class="h">1192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">------------------------------------</td></tr>
<tr><td class="h">1193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">END</td></tr>
<tr><td class="h">1194</td><td colspan="7"></td></tr><tr><td class="h">1195</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1195">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">1196</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$unoverload( \$got, \$expect );</td></tr>
<tr><td class="h">1197</td><td colspan="7"></td></tr><tr><td class="h">1198</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1198">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1198">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type =~ /^(eq|==)$/ ) {</td></tr>
<tr><td class="h">1199</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, $type, $expect );</td></tr>
<tr><td class="h">1200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type =~ /^(ne|!=)$/ ) {</td></tr>
<tr><td class="h">1202</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, $type );</td></tr>
<tr><td class="h">1203</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1205</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_cmp_diag( $got, $type, $expect );</td></tr>
<tr><td class="h">1206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1208</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1210</td><td colspan="7"></td></tr><tr><td class="h">1211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _cmp_diag {</td></tr>
<tr><td class="h">1212</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1212">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect ) = @_;</td></tr>
<tr><td class="h">1213</td><td colspan="7"></td></tr><tr><td class="h">1214</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1214">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$got&nbsp;&nbsp;&nbsp;&nbsp;= defined $got&nbsp;&nbsp;&nbsp;&nbsp;? &quot;&#39;$got&#39;&quot;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;undef&#39;;</td></tr>
<tr><td class="h">1215</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1215">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$expect = defined $expect ? &quot;&#39;$expect&#39;&quot; : &#39;undef&#39;;</td></tr>
<tr><td class="h">1216</td><td colspan="7"></td></tr><tr><td class="h">1217</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1218</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">1219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$got</td></tr>
<tr><td class="h">1220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type</td></tr>
<tr><td class="h">1221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$expect</td></tr>
<tr><td class="h">1222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">1223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1224</td><td colspan="7"></td></tr><tr><td class="h">1225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _caller_context {</td></tr>
<tr><td class="h">1226</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1226">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1227</td><td colspan="7"></td></tr><tr><td class="h">1228</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $pack, $file, $line ) = $self-&gt;caller(1);</td></tr>
<tr><td class="h">1229</td><td colspan="7"></td></tr><tr><td class="h">1230</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code = &#39;&#39;;</td></tr>
<tr><td class="h">1231</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1231">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1231">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$code .= &quot;#line $line $file\n&quot; if defined $file and defined $line;</td></tr>
<tr><td class="h">1232</td><td colspan="7"></td></tr><tr><td class="h">1233</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $code;</td></tr>
<tr><td class="h">1234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1235</td><td colspan="7"></td></tr><tr><td class="h">1236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1237</td><td colspan="7"></td></tr><tr><td class="h">1238</td><td colspan="7"></td></tr><tr><td class="h">1239 - 1255</td><td colspan="6"></td><td class="s"><pre>=head2 Other Testing Methods

These are methods which are used in the course of writing a test but are not themselves tests.

=over 4

=item B&lt;BAIL_OUT&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;BAIL_OUT($reason);

Indicates to the Test::Harness that things are going so badly all
testing should terminate.&nbsp;&nbsp;This includes running any additional test
scripts.

It will exit with 255.

=cut</pre></td></tr>
<tr><td class="h">1256</td><td colspan="7"></td></tr><tr><td class="h">1257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub BAIL_OUT {</td></tr>
<tr><td class="h">1258</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1258">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $reason ) = @_;</td></tr>
<tr><td class="h">1259</td><td colspan="7"></td></tr><tr><td class="h">1260</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Bailed_Out} = 1;</td></tr>
<tr><td class="h">1261</td><td colspan="7"></td></tr><tr><td class="h">1262</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1262">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;parent) {</td></tr>
<tr><td class="h">1263</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Bailed_Out_Reason} = $reason;</td></tr>
<tr><td class="h">1264</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;no_ending(1);</td></tr>
<tr><td class="h">1265</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die bless {} =&gt; &#39;Test::Builder::Exception&#39;;</td></tr>
<tr><td class="h">1266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1267</td><td colspan="7"></td></tr><tr><td class="h">1268</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print(&quot;Bail out!&nbsp;&nbsp;$reason&quot;);</td></tr>
<tr><td class="h">1269</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;exit 255;</td></tr>
<tr><td class="h">1270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1271</td><td colspan="7"></td></tr><tr><td class="h">1272 - 1275</td><td colspan="6"></td><td class="s"><pre>=for deprecated
BAIL_OUT() used to be BAILOUT()

=cut</pre></td></tr>
<tr><td class="h">1276</td><td colspan="7"></td></tr><tr><td class="h">1277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">1278</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1278">44</a></div></td><td></td><td><div>187</div><div>46</div><div>22955</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;once&#39;;</td></tr>
<tr><td class="h">1279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*BAILOUT = \&amp;BAIL_OUT;</td></tr>
<tr><td class="h">1280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1281</td><td colspan="7"></td></tr><tr><td class="h">1282 - 1289</td><td colspan="6"></td><td class="s"><pre>=item B&lt;skip&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;skip;
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;skip($why);

Skips the current test, reporting C&lt;$why&gt;.

=cut</pre></td></tr>
<tr><td class="h">1290</td><td colspan="7"></td></tr><tr><td class="h">1291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub skip {</td></tr>
<tr><td class="h">1292</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1292">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $why ) = @_;</td></tr>
<tr><td class="h">1293</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1293">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$why ||= &#39;&#39;;</td></tr>
<tr><td class="h">1294</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$why );</td></tr>
<tr><td class="h">1295</td><td colspan="7"></td></tr><tr><td class="h">1296</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">1297</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">1298</td><td colspan="7"></td></tr><tr><td class="h">1299</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = &amp;share(</td></tr>
<tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">1302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; 1,</td></tr>
<tr><td class="h">1303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;&#39;,</td></tr>
<tr><td class="h">1304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;skip&#39;,</td></tr>
<tr><td class="h">1305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $why,</td></tr>
<tr><td class="h">1306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1308</td><td colspan="7"></td></tr><tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out = &quot;ok&quot;;</td></tr>
<tr><td class="h">1310</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1310">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">1311</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # skip&quot;;</td></tr>
<tr><td class="h">1312</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1312">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $why&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if length $why;</td></tr>
<tr><td class="h">1313</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;\n&quot;;</td></tr>
<tr><td class="h">1314</td><td colspan="7"></td></tr><tr><td class="h">1315</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">1316</td><td colspan="7"></td></tr><tr><td class="h">1317</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1319</td><td colspan="7"></td></tr><tr><td class="h">1320 - 1330</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo_skip&gt;

&nbsp;&nbsp;$Test-&gt;todo_skip;
&nbsp;&nbsp;$Test-&gt;todo_skip($why);

Like C&lt;skip()&gt;, only it will declare the test as failing and TODO.&nbsp;&nbsp;Similar
to

&nbsp;&nbsp;&nbsp;&nbsp;print &quot;not ok $tnum # TODO $why\n&quot;;

=cut</pre></td></tr>
<tr><td class="h">1331</td><td colspan="7"></td></tr><tr><td class="h">1332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_skip {</td></tr>
<tr><td class="h">1333</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1333">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $why ) = @_;</td></tr>
<tr><td class="h">1334</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1334">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$why ||= &#39;&#39;;</td></tr>
<tr><td class="h">1335</td><td colspan="7"></td></tr><tr><td class="h">1336</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">1337</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">1338</td><td colspan="7"></td></tr><tr><td class="h">1339</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = &amp;share(</td></tr>
<tr><td class="h">1340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">1342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; 0,</td></tr>
<tr><td class="h">1343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;&#39;,</td></tr>
<tr><td class="h">1344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;todo_skip&#39;,</td></tr>
<tr><td class="h">1345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $why,</td></tr>
<tr><td class="h">1346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1348</td><td colspan="7"></td></tr><tr><td class="h">1349</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out = &quot;not ok&quot;;</td></tr>
<tr><td class="h">1350</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1350">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">1351</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # TODO &amp; SKIP $why\n&quot;;</td></tr>
<tr><td class="h">1352</td><td colspan="7"></td></tr><tr><td class="h">1353</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">1354</td><td colspan="7"></td></tr><tr><td class="h">1355</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1356</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1357</td><td colspan="7"></td></tr><tr><td class="h">1358 - 1410</td><td colspan="6"></td><td class="s"><pre>=begin _unimplemented

=item B&lt;skip_rest&gt;

&nbsp;&nbsp;$Test-&gt;skip_rest;
&nbsp;&nbsp;$Test-&gt;skip_rest($reason);

Like C&lt;skip()&gt;, only it skips all the rest of the tests you plan to run
and terminates the test.

If you&#39;re running under C&lt;no_plan&gt;, it skips once and terminates the
test.

=end _unimplemented

=back


=head2 Test building utility methods

These methods are useful when writing your own test methods.

=over 4

=item B&lt;maybe_regex&gt;

&nbsp;&nbsp;$Test-&gt;maybe_regex(qr/$regex/);
&nbsp;&nbsp;$Test-&gt;maybe_regex(&#39;/$regex/&#39;);

This method used to be useful back when Test::Builder worked on Perls
before 5.6 which didn&#39;t have qr//.&nbsp;&nbsp;Now its pretty useless.

Convenience method for building testing functions that take regular
expressions as arguments.

Takes a quoted regular expression produced by C&lt;qr//&gt;, or a string
representing a regular expression.

Returns a Perl value which may be used instead of the corresponding
regular expression, or C&lt;undef&gt; if its argument is not recognised.

For example, a version of C&lt;like()&gt;, sans the useful diagnostic messages,
could be written as:

&nbsp;&nbsp;sub laconic_like {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($self, $thing, $regex, $name) = @_;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $usable_regex = $self-&gt;maybe_regex($regex);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;expecting regex, found &#39;$regex&#39;\n&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $usable_regex;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok($thing =~ m/$usable_regex/, $name);
&nbsp;&nbsp;}

=cut</pre></td></tr>
<tr><td class="h">1411</td><td colspan="7"></td></tr><tr><td class="h">1412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub maybe_regex {</td></tr>
<tr><td class="h">1413</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1413">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $regex ) = @_;</td></tr>
<tr><td class="h">1414</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $usable_regex = undef;</td></tr>
<tr><td class="h">1415</td><td colspan="7"></td></tr><tr><td class="h">1416</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1416">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $usable_regex unless defined $regex;</td></tr>
<tr><td class="h">1417</td><td colspan="7"></td></tr><tr><td class="h">1418</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $re, $opts );</td></tr>
<tr><td class="h">1419</td><td colspan="7"></td></tr><tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check for qr/foo/</td></tr>
<tr><td class="h">1421</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1421">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1421">0</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1421">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _is_qr($regex) ) {</td></tr>
<tr><td class="h">1422</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$usable_regex = $regex;</td></tr>
<tr><td class="h">1423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check for &#39;/foo/&#39; or &#39;m,foo,&#39;</td></tr>
<tr><td class="h">1425</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif(( $re, $opts )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $regex =~ m{^ /(.*)/ (\w*) $ }sx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or</td></tr>
<tr><td class="h">1426</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( undef, $re, $opts ) = $regex =~ m,^ m([^\w\s]) (.+) \1 (\w*) $,sx</td></tr>
<tr><td class="h">1427</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1428</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1429</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1429">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$usable_regex = length $opts ? &quot;(?$opts)$re&quot; : $re;</td></tr>
<tr><td class="h">1430</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1431</td><td colspan="7"></td></tr><tr><td class="h">1432</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $usable_regex;</td></tr>
<tr><td class="h">1433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1434</td><td colspan="7"></td></tr><tr><td class="h">1435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_qr {</td></tr>
<tr><td class="h">1436</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1436">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $regex = shift;</td></tr>
<tr><td class="h">1437</td><td colspan="7"></td></tr><tr><td class="h">1438</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# is_regexp() checks for regexes in a robust manner, say if they&#39;re</td></tr>
<tr><td class="h">1439</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# blessed.</td></tr>
<tr><td class="h">1440</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1440">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return re::is_regexp($regex) if defined &amp;re::is_regexp;</td></tr>
<tr><td class="h">1441</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ref $regex eq &#39;Regexp&#39;;</td></tr>
<tr><td class="h">1442</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1443</td><td colspan="7"></td></tr><tr><td class="h">1444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _regex_ok {</td></tr>
<tr><td class="h">1445</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1445">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $thing, $regex, $cmp, $name ) = @_;</td></tr>
<tr><td class="h">1446</td><td colspan="7"></td></tr><tr><td class="h">1447</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0;</td></tr>
<tr><td class="h">1448</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $usable_regex = $self-&gt;maybe_regex($regex);</td></tr>
<tr><td class="h">1449</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1449">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $usable_regex ) {</td></tr>
<tr><td class="h">1450</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1451</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $self-&gt;ok( 0, $name );</td></tr>
<tr><td class="h">1452</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;&nbsp;&nbsp;&nbsp;&nbsp;&#39;$regex&#39; doesn&#39;t look much like a regex to me.&quot;);</td></tr>
<tr><td class="h">1453</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1455</td><td colspan="7"></td></tr><tr><td class="h">1456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1457</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test;</td></tr>
<tr><td class="h">1458</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $context = $self-&gt;_caller_context;</td></tr>
<tr><td class="h">1459</td><td colspan="7"></td></tr><tr><td class="h">1460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">1462</td><td colspan="7"></td></tr><tr><td class="h">1463</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local( $@, $!, $SIG{__DIE__} );&nbsp;&nbsp;&nbsp;&nbsp;# isolate eval</td></tr>
<tr><td class="h">1464</td><td colspan="7"></td></tr><tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# No point in issuing an uninit warning, they&#39;ll see it in the diagnostics</td></tr>
<tr><td class="h">1466</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1466">44</a></div></td><td></td><td><div>199</div><div>43</div><div>17464</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;uninitialized&#39;;</td></tr>
<tr><td class="h">1467</td><td colspan="7"></td></tr><tr><td class="h">1468</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = eval $context . q{$test = $thing =~ /$usable_regex/ ? 1 : 0};</td></tr>
<tr><td class="h">1469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1470</td><td colspan="7"></td></tr><tr><td class="h">1471</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1471">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = !$test if $cmp eq &#39;!~&#39;;</td></tr>
<tr><td class="h">1472</td><td colspan="7"></td></tr><tr><td class="h">1473</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1474</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1476</td><td colspan="7"></td></tr><tr><td class="h">1477</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1477">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">1478</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1478">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thing = defined $thing ? &quot;&#39;$thing&#39;&quot; : &#39;undef&#39;;</td></tr>
<tr><td class="h">1479</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1479">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $match = $cmp eq &#39;=~&#39; ? &quot;doesn&#39;t match&quot; : &quot;matches&quot;;</td></tr>
<tr><td class="h">1480</td><td colspan="7"></td></tr><tr><td class="h">1481</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1482</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag( sprintf &lt;&lt;&#39;DIAGNOSTIC&#39;, $thing, $match, $regex );</td></tr>
<tr><td class="h">1483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%s</td></tr>
<tr><td class="h">1484</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%13s &#39;%s&#39;</td></tr>
<tr><td class="h">1485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">1486</td><td colspan="7"></td></tr><tr><td class="h">1487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1488</td><td colspan="7"></td></tr><tr><td class="h">1489</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1491</td><td colspan="7"></td></tr><tr><td class="h">1492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># I&#39;m not ready to publish this.&nbsp;&nbsp;It doesn&#39;t deal with array return</td></tr>
<tr><td class="h">1493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># values from the code or context.</td></tr>
<tr><td class="h">1494</td><td colspan="7"></td></tr><tr><td class="h">1495 - 1511</td><td colspan="6"></td><td class="s"><pre>=begin private

=item B&lt;_try&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $return_from_code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $Test-&gt;try(sub { code });
&nbsp;&nbsp;&nbsp;&nbsp;my($return_from_code, $error) = $Test-&gt;try(sub { code });

Works like eval BLOCK except it ensures it has no effect on the rest
of the test (ie. C&lt;$@&gt; is not set) nor is effected by outside
interference (ie. C&lt;$SIG{__DIE__}&gt;) and works around some quirks in older
Perls.

C&lt;$error&gt; is what would normally be in C&lt;$@&gt;.

It is suggested you use this in place of eval BLOCK.

=cut</pre></td></tr>
<tr><td class="h">1512</td><td colspan="7"></td></tr><tr><td class="h">1513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _try {</td></tr>
<tr><td class="h">1514</td><td><div class="c3">1756</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1514">1756</a></div></td><td></td><td><div>2793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $code, %opts ) = @_;</td></tr>
<tr><td class="h">1515</td><td colspan="7"></td></tr><tr><td class="h">1516</td><td><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>1355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $error;</td></tr>
<tr><td class="h">1517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $return;</td></tr>
<tr><td class="h">1518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1519</td><td><div class="c3">1756</div><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>1396</div><div>10493</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $!;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# eval can mess up $!</td></tr>
<tr><td class="h">1520</td><td><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>1511</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $@;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# don&#39;t set $@ in the test</td></tr>
<tr><td class="h">1521</td><td><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>4047</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $SIG{__DIE__};&nbsp;&nbsp;&nbsp;&nbsp;# don&#39;t trip an outside DIE handler.</td></tr>
<tr><td class="h">1522</td><td><div class="c3">1756</div><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>1991</div><div>2038</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$return = eval { $code-&gt;() };</td></tr>
<tr><td class="h">1523</td><td><div class="c3">1756</div></td><td></td><td></td><td></td><td></td><td><div>4954</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$error = $@;</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1525</td><td colspan="7"></td></tr><tr><td class="h">1526</td><td><div class="c3">1756</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1526">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1526">33</a></div></td><td></td><td></td><td><div>3209</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die $error if $error and $opts{die_on_fail};</td></tr>
<tr><td class="h">1527</td><td colspan="7"></td></tr><tr><td class="h">1528</td><td><div class="c3">1756</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1528">50</a></div></td><td></td><td></td><td></td><td><div>6018</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray ? ( $return, $error ) : $return;</td></tr>
<tr><td class="h">1529</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1530</td><td colspan="7"></td></tr><tr><td class="h">1531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=end private</td></tr>
<tr><td class="h">1532</td><td colspan="7"></td></tr><tr><td class="h">1533</td><td colspan="7"></td></tr><tr><td class="h">1534 - 1540</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is_fh&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $is_fh = $Test-&gt;is_fh($thing);

Determines if the given C&lt;$thing&gt; can be used as a filehandle.

=cut</pre></td></tr>
<tr><td class="h">1541</td><td colspan="7"></td></tr><tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_fh {</td></tr>
<tr><td class="h">1543</td><td><div class="c3">132</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1543">132</a></div></td><td><div class="c3">1</div></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">1544</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maybe_fh = shift;</td></tr>
<tr><td class="h">1545</td><td><div class="c3">132</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1545">50</a></div></td><td></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless defined $maybe_fh;</td></tr>
<tr><td class="h">1546</td><td colspan="7"></td></tr><tr><td class="h">1547</td><td><div class="c3">132</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1547">50</a></div></td><td></td><td></td><td></td><td><div>356</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if ref $maybe_fh&nbsp;&nbsp;eq &#39;GLOB&#39;;&nbsp;&nbsp;&nbsp;&nbsp;# its a glob ref</td></tr>
<tr><td class="h">1548</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1548">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if ref \$maybe_fh eq &#39;GLOB&#39;;&nbsp;&nbsp;&nbsp;&nbsp;# its a glob</td></tr>
<tr><td class="h">1549</td><td colspan="7"></td></tr><tr><td class="h">1550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return eval { $maybe_fh-&gt;isa(&quot;IO::Handle&quot;) } ||</td></tr>
<tr><td class="h">1551</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L1551">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval { tied($maybe_fh)-&gt;can(&#39;TIEHANDLE&#39;) };</td></tr>
<tr><td class="h">1552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1553</td><td colspan="7"></td></tr><tr><td class="h">1554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1555</td><td colspan="7"></td></tr><tr><td class="h">1556</td><td colspan="7"></td></tr><tr><td class="h">1557 - 1583</td><td colspan="6"></td><td class="s"><pre>=head2 Test style


=over 4

=item B&lt;level&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;level($how_high);

How far up the call stack should C&lt;$Test&gt; look when reporting where the
test failed.

Defaults to 1.

Setting L&lt;$Test::Builder::Level&gt; overrides.&nbsp;&nbsp;This is typically useful
localized:

&nbsp;&nbsp;&nbsp;&nbsp;sub my_ok {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = shift;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Test::Builder::Level = $Test::Builder::Level + 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$TB-&gt;ok($test);
&nbsp;&nbsp;&nbsp;&nbsp;}

To be polite to other functions wrapping your own you usually want to increment C&lt;$Level&gt; rather than set it to a constant.

=cut</pre></td></tr>
<tr><td class="h">1584</td><td colspan="7"></td></tr><tr><td class="h">1585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub level {</td></tr>
<tr><td class="h">1586</td><td><div class="c3">1247</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1586">1247</a></div></td><td><div class="c3">1</div></td><td><div>1057</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $level ) = @_;</td></tr>
<tr><td class="h">1587</td><td colspan="7"></td></tr><tr><td class="h">1588</td><td><div class="c3">1247</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1588">50</a></div></td><td></td><td></td><td></td><td><div>1774</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $level ) {</td></tr>
<tr><td class="h">1589</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Level = $level;</td></tr>
<tr><td class="h">1590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1591</td><td><div class="c3">1247</div></td><td></td><td></td><td></td><td></td><td><div>1599</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $Level;</td></tr>
<tr><td class="h">1592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1593</td><td colspan="7"></td></tr><tr><td class="h">1594 - 1615</td><td colspan="6"></td><td class="s"><pre>=item B&lt;use_numbers&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;use_numbers($on_or_off);

Whether or not the test should output numbers.&nbsp;&nbsp;That is, this if true:

&nbsp;&nbsp;ok 1
&nbsp;&nbsp;ok 2
&nbsp;&nbsp;ok 3

or this if false

&nbsp;&nbsp;ok
&nbsp;&nbsp;ok
&nbsp;&nbsp;ok

Most useful when you can&#39;t depend on the test output order, such as
when threads or forking is involved.

Defaults to on.

=cut</pre></td></tr>
<tr><td class="h">1616</td><td colspan="7"></td></tr><tr><td class="h">1617</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub use_numbers {</td></tr>
<tr><td class="h">1618</td><td><div class="c3">417</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1618">417</a></div></td><td><div class="c3">1</div></td><td><div>421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $use_nums ) = @_;</td></tr>
<tr><td class="h">1619</td><td colspan="7"></td></tr><tr><td class="h">1620</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1620">50</a></div></td><td></td><td></td><td></td><td><div>676</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $use_nums ) {</td></tr>
<tr><td class="h">1621</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Use_Nums} = $use_nums;</td></tr>
<tr><td class="h">1622</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1623</td><td><div class="c3">417</div></td><td></td><td></td><td></td><td></td><td><div>1243</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Use_Nums};</td></tr>
<tr><td class="h">1624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1625</td><td colspan="7"></td></tr><tr><td class="h">1626 - 1648</td><td colspan="6"></td><td class="s"><pre>=item B&lt;no_diag&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;no_diag($no_diag);

If set true no diagnostics will be printed.&nbsp;&nbsp;This includes calls to
C&lt;diag()&gt;.

=item B&lt;no_ending&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;no_ending($no_ending);

Normally, Test::Builder does some extra diagnostics when the test
ends.&nbsp;&nbsp;It also changes the exit code as described below.

If this is true, none of that will be done.

=item B&lt;no_header&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;no_header($no_header);

If set to true, no &quot;1..N&quot; header will be printed.

=cut</pre></td></tr>
<tr><td class="h">1649</td><td colspan="7"></td></tr><tr><td class="h">1650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">foreach my $attribute (qw(No_Header No_Ending No_Diag)) {</td></tr>
<tr><td class="h">1651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $method = lc $attribute;</td></tr>
<tr><td class="h">1652</td><td colspan="7"></td></tr><tr><td class="h">1653</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code = sub {</td></tr>
<tr><td class="h">1654</td><td><div class="c3">56</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1654">56</a></div></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $no ) = @_;</td></tr>
<tr><td class="h">1655</td><td colspan="7"></td></tr><tr><td class="h">1656</td><td><div class="c3">56</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1656">50</a></div></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $no ) {</td></tr>
<tr><td class="h">1657</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{$attribute} = $no;</td></tr>
<tr><td class="h">1658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1659</td><td><div class="c3">56</div></td><td></td><td></td><td></td><td></td><td><div>161</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{$attribute};</td></tr>
<tr><td class="h">1660</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1661</td><td colspan="7"></td></tr><tr><td class="h">1662</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1662">44</a></div></td><td></td><td><div>179</div><div>46</div><div>66183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;&nbsp;&nbsp;&nbsp;&nbsp;## no critic</td></tr>
<tr><td class="h">1663</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*{ __PACKAGE__ . &#39;::&#39; . $method } = $code;</td></tr>
<tr><td class="h">1664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1665</td><td colspan="7"></td></tr><tr><td class="h">1666</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1667</td><td colspan="7"></td></tr><tr><td class="h">1668 - 1701</td><td colspan="6"></td><td class="s"><pre>=head2 Output

Controlling where the test output goes.

It&#39;s ok for your test to change where STDOUT and STDERR point to,
Test::Builder&#39;s default output settings will not be affected.

=over 4

=item B&lt;diag&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;diag(@msgs);

Prints out the given C&lt;@msgs&gt;.&nbsp;&nbsp;Like C&lt;print&gt;, arguments are simply
appended together.

Normally, it uses the C&lt;failure_output()&gt; handle, but if this is for a
TODO test, the C&lt;todo_output()&gt; handle is used.

Output will be indented and marked with a # so as not to interfere
with test output.&nbsp;&nbsp;A newline will be put on the end if there isn&#39;t one
already.

We encourage using this rather than calling print directly.

Returns false.&nbsp;&nbsp;Why?&nbsp;&nbsp;Because C&lt;diag()&gt; is often used in conjunction with
a failing test (C&lt;ok() || diag()&gt;) it &quot;passes through&quot; the failure.

&nbsp;&nbsp;&nbsp;&nbsp;return ok(...) || diag(...);

=for blame transfer
Mark Fowler &lt;mark@twoshortplanks.com&gt;

=cut</pre></td></tr>
<tr><td class="h">1702</td><td colspan="7"></td></tr><tr><td class="h">1703</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub diag {</td></tr>
<tr><td class="h">1704</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1704">12</a></div></td><td><div class="c3">1</div></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1705</td><td colspan="7"></td></tr><tr><td class="h">1706</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_comment( $self-&gt;_diag_fh, @_ );</td></tr>
<tr><td class="h">1707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1708</td><td colspan="7"></td></tr><tr><td class="h">1709 - 1716</td><td colspan="6"></td><td class="s"><pre>=item B&lt;note&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;note(@msgs);

Like C&lt;diag()&gt;, but it prints to the C&lt;output()&gt; handle so it will not
normally be seen by the user except in verbose mode.

=cut</pre></td></tr>
<tr><td class="h">1717</td><td colspan="7"></td></tr><tr><td class="h">1718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub note {</td></tr>
<tr><td class="h">1719</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1719">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1720</td><td colspan="7"></td></tr><tr><td class="h">1721</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_comment( $self-&gt;output, @_ );</td></tr>
<tr><td class="h">1722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1723</td><td colspan="7"></td></tr><tr><td class="h">1724</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _diag_fh {</td></tr>
<tr><td class="h">1725</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1725">16</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1726</td><td colspan="7"></td></tr><tr><td class="h">1727</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1728</td><td><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1728">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;in_todo ? $self-&gt;todo_output : $self-&gt;failure_output;</td></tr>
<tr><td class="h">1729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1730</td><td colspan="7"></td></tr><tr><td class="h">1731</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print_comment {</td></tr>
<tr><td class="h">1732</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1732">12</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh, @msgs ) = @_;</td></tr>
<tr><td class="h">1733</td><td colspan="7"></td></tr><tr><td class="h">1734</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1734">50</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;no_diag;</td></tr>
<tr><td class="h">1735</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1735">50</a></div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless @msgs;</td></tr>
<tr><td class="h">1736</td><td colspan="7"></td></tr><tr><td class="h">1737</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Prevent printing headers when compiling (i.e. -c)</td></tr>
<tr><td class="h">1738</td><td><div class="c3">12</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1738">50</a></div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $^C;</td></tr>
<tr><td class="h">1739</td><td colspan="7"></td></tr><tr><td class="h">1740</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Smash args together like print does.</td></tr>
<tr><td class="h">1741</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Convert undef to &#39;undef&#39; so its readable.</td></tr>
<tr><td class="h">1742</td><td><div class="c3">12</div><div class="c3">12</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1742">50</a></div></td><td></td><td></td><td></td><td><div>17</div><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $msg = join &#39;&#39;, map { defined($_) ? $_ : &#39;undef&#39; } @msgs;</td></tr>
<tr><td class="h">1743</td><td colspan="7"></td></tr><tr><td class="h">1744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Escape the beginning, _print will take care of the rest.</td></tr>
<tr><td class="h">1745</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg =~ s/^/# /;</td></tr>
<tr><td class="h">1746</td><td colspan="7"></td></tr><tr><td class="h">1747</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1748</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_to_fh( $fh, $msg );</td></tr>
<tr><td class="h">1749</td><td colspan="7"></td></tr><tr><td class="h">1750</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1752</td><td colspan="7"></td></tr><tr><td class="h">1753 - 1766</td><td colspan="6"></td><td class="s"><pre>=item B&lt;explain&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my @dump = $Test-&gt;explain(@msgs);

Will dump the contents of any references in a human readable format.
Handy for things like...

&nbsp;&nbsp;&nbsp;&nbsp;is_deeply($have, $want) || diag explain $have;

or

&nbsp;&nbsp;&nbsp;&nbsp;is_deeply($have, $want) || note explain $have;

=cut</pre></td></tr>
<tr><td class="h">1767</td><td colspan="7"></td></tr><tr><td class="h">1768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub explain {</td></tr>
<tr><td class="h">1769</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1769">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1770</td><td colspan="7"></td></tr><tr><td class="h">1771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map {</td></tr>
<tr><td class="h">1772</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref $_</td></tr>
<tr><td class="h">1773</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1773">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? do {</td></tr>
<tr><td class="h">1774</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1774">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(sub { require Data::Dumper }, die_on_fail =&gt; 1);</td></tr>
<tr><td class="h">1775</td><td colspan="7"></td></tr><tr><td class="h">1776</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dumper = Data::Dumper-&gt;new( [$_] );</td></tr>
<tr><td class="h">1777</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Indent(1)-&gt;Terse(1);</td></tr>
<tr><td class="h">1778</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1778">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Sortkeys(1) if $dumper-&gt;can(&quot;Sortkeys&quot;);</td></tr>
<tr><td class="h">1779</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Dump;</td></tr>
<tr><td class="h">1780</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $_</td></tr>
<tr><td class="h">1782</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} @_;</td></tr>
<tr><td class="h">1783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1784</td><td colspan="7"></td></tr><tr><td class="h">1785 - 1795</td><td colspan="6"></td><td class="s"><pre>=begin _private

=item B&lt;_print&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;_print(@msgs);

Prints to the C&lt;output()&gt; filehandle.

=end _private

=cut</pre></td></tr>
<tr><td class="h">1796</td><td colspan="7"></td></tr><tr><td class="h">1797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print {</td></tr>
<tr><td class="h">1798</td><td><div class="c3">461</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1798">461</a></div></td><td></td><td><div>432</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1799</td><td><div class="c3">461</div></td><td></td><td></td><td></td><td></td><td><div>803</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_print_to_fh( $self-&gt;output, @_ );</td></tr>
<tr><td class="h">1800</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1801</td><td colspan="7"></td></tr><tr><td class="h">1802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print_to_fh {</td></tr>
<tr><td class="h">1803</td><td><div class="c3">477</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1803">477</a></div></td><td></td><td><div>682</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh, @msgs ) = @_;</td></tr>
<tr><td class="h">1804</td><td colspan="7"></td></tr><tr><td class="h">1805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Prevent printing headers when only compiling.&nbsp;&nbsp;Mostly for when</td></tr>
<tr><td class="h">1806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# tests are deparsed with B::Deparse</td></tr>
<tr><td class="h">1807</td><td><div class="c3">477</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1807">50</a></div></td><td></td><td></td><td></td><td><div>1108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $^C;</td></tr>
<tr><td class="h">1808</td><td colspan="7"></td></tr><tr><td class="h">1809</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>930</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $msg = join &#39;&#39;, @msgs;</td></tr>
<tr><td class="h">1810</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>819</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $indent = $self-&gt;_indent;</td></tr>
<tr><td class="h">1811</td><td colspan="7"></td></tr><tr><td class="h">1812</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>1596</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local( $\, $&quot;, $, ) = ( undef, &#39; &#39;, &#39;&#39; );</td></tr>
<tr><td class="h">1813</td><td colspan="7"></td></tr><tr><td class="h">1814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Escape each line after the first with a # so we don&#39;t</td></tr>
<tr><td class="h">1815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# confuse Test::Harness.</td></tr>
<tr><td class="h">1816</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>1350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg =~ s{\n(?!\z)}{\n$indent# }sg;</td></tr>
<tr><td class="h">1817</td><td colspan="7"></td></tr><tr><td class="h">1818</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Stick a newline on the end if it needs it.</td></tr>
<tr><td class="h">1819</td><td><div class="c3">477</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1819">50</a></div></td><td></td><td></td><td></td><td><div>1382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg .= &quot;\n&quot; unless $msg =~ /\n\z/;</td></tr>
<tr><td class="h">1820</td><td colspan="7"></td></tr><tr><td class="h">1821</td><td><div class="c3">477</div></td><td></td><td></td><td></td><td></td><td><div>5195</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return print $fh $indent, $msg;</td></tr>
<tr><td class="h">1822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1823</td><td colspan="7"></td></tr><tr><td class="h">1824 - 1855</td><td colspan="6"></td><td class="s"><pre>=item B&lt;output&gt;

=item B&lt;failure_output&gt;

=item B&lt;todo_output&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $filehandle = $Test-&gt;output;
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;output($filehandle);
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;output($filename);
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;output(\$scalar);

These methods control where Test::Builder will print its output.
They take either an open C&lt;$filehandle&gt;, a C&lt;$filename&gt; to open and write to
or a C&lt;$scalar&gt; reference to append to.&nbsp;&nbsp;It will always return a C&lt;$filehandle&gt;.

B&lt;output&gt; is where normal &quot;ok/not ok&quot; test output goes.

Defaults to STDOUT.

B&lt;failure_output&gt; is where diagnostic output on test failures and
C&lt;diag()&gt; goes.&nbsp;&nbsp;It is normally not read by Test::Harness and instead is
displayed to the user.

Defaults to STDERR.

C&lt;todo_output&gt; is used instead of C&lt;failure_output()&gt; for the
diagnostics of a failing TODO test.&nbsp;&nbsp;These will not be seen by the
user.

Defaults to STDOUT.

=cut</pre></td></tr>
<tr><td class="h">1856</td><td colspan="7"></td></tr><tr><td class="h">1857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub output {</td></tr>
<tr><td class="h">1858</td><td><div class="c3">505</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1858">505</a></div></td><td><div class="c3">1</div></td><td><div>544</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1859</td><td colspan="7"></td></tr><tr><td class="h">1860</td><td><div class="c3">505</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1860">100</a></div></td><td></td><td></td><td></td><td><div>858</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1861</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Out_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1863</td><td><div class="c3">505</div></td><td></td><td></td><td></td><td></td><td><div>1049</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Out_FH};</td></tr>
<tr><td class="h">1864</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1865</td><td colspan="7"></td></tr><tr><td class="h">1866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub failure_output {</td></tr>
<tr><td class="h">1867</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1867">44</a></div></td><td><div class="c3">1</div></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1868</td><td colspan="7"></td></tr><tr><td class="h">1869</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1869">50</a></div></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1870</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Fail_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1871</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1872</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Fail_FH};</td></tr>
<tr><td class="h">1873</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1874</td><td colspan="7"></td></tr><tr><td class="h">1875</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_output {</td></tr>
<tr><td class="h">1876</td><td><div class="c3">60</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1876">60</a></div></td><td><div class="c3">1</div></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1877</td><td colspan="7"></td></tr><tr><td class="h">1878</td><td><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1878">100</a></div></td><td></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1879</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1880</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1881</td><td><div class="c3">60</div></td><td></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Todo_FH};</td></tr>
<tr><td class="h">1882</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1883</td><td colspan="7"></td></tr><tr><td class="h">1884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _new_fh {</td></tr>
<tr><td class="h">1885</td><td><div class="c3">132</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1885">132</a></div></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1886</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($file_or_fh) = shift;</td></tr>
<tr><td class="h">1887</td><td colspan="7"></td></tr><tr><td class="h">1888</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh;</td></tr>
<tr><td class="h">1889</td><td><div class="c3">132</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1889">50</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1889">0</a></div></td><td></td><td></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;is_fh($file_or_fh) ) {</td></tr>
<tr><td class="h">1890</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fh = $file_or_fh;</td></tr>
<tr><td class="h">1891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ref $file_or_fh eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">1893</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Scalar refs as filehandles was added in 5.8.</td></tr>
<tr><td class="h">1894</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1894">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt;= 5.008 ) {</td></tr>
<tr><td class="h">1895</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1895">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open $fh, &quot;&gt;&gt;&quot;, $file_or_fh</td></tr>
<tr><td class="h">1896</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t open scalar ref $file_or_fh: $!&quot;);</td></tr>
<tr><td class="h">1897</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Emulate scalar ref filehandles with a tie.</td></tr>
<tr><td class="h">1899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1900</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1900">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fh = Test::Builder::IO::Scalar-&gt;new($file_or_fh)</td></tr>
<tr><td class="h">1901</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t tie scalar ref $file_or_fh&quot;);</td></tr>
<tr><td class="h">1902</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1903</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1904</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1905</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1905">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open $fh, &quot;&gt;&quot;, $file_or_fh</td></tr>
<tr><td class="h">1906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t open test output log $file_or_fh: $!&quot;);</td></tr>
<tr><td class="h">1907</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($fh);</td></tr>
<tr><td class="h">1908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1909</td><td colspan="7"></td></tr><tr><td class="h">1910</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $fh;</td></tr>
<tr><td class="h">1911</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1912</td><td colspan="7"></td></tr><tr><td class="h">1913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _autoflush {</td></tr>
<tr><td class="h">1914</td><td><div class="c3">176</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1914">176</a></div></td><td></td><td><div>180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($fh) = shift;</td></tr>
<tr><td class="h">1915</td><td><div class="c3">176</div></td><td></td><td></td><td></td><td></td><td><div>442</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_fh = select $fh;</td></tr>
<tr><td class="h">1916</td><td><div class="c3">176</div></td><td></td><td></td><td></td><td></td><td><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$| = 1;</td></tr>
<tr><td class="h">1917</td><td><div class="c3">176</div></td><td></td><td></td><td></td><td></td><td><div>286</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $old_fh;</td></tr>
<tr><td class="h">1918</td><td colspan="7"></td></tr><tr><td class="h">1919</td><td><div class="c3">176</div></td><td></td><td></td><td></td><td></td><td><div>189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1921</td><td colspan="7"></td></tr><tr><td class="h">1922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my( $Testout, $Testerr );</td></tr>
<tr><td class="h">1923</td><td colspan="7"></td></tr><tr><td class="h">1924</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dup_stdhandles {</td></tr>
<tr><td class="h">1925</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1925">44</a></div></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1926</td><td colspan="7"></td></tr><tr><td class="h">1927</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_open_testhandles;</td></tr>
<tr><td class="h">1928</td><td colspan="7"></td></tr><tr><td class="h">1929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set everything to unbuffered else plain prints to STDOUT will</td></tr>
<tr><td class="h">1930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# come out in the wrong order from our own prints.</td></tr>
<tr><td class="h">1931</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($Testout);</td></tr>
<tr><td class="h">1932</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush( \*STDOUT );</td></tr>
<tr><td class="h">1933</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($Testerr);</td></tr>
<tr><td class="h">1934</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush( \*STDERR );</td></tr>
<tr><td class="h">1935</td><td colspan="7"></td></tr><tr><td class="h">1936</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;reset_outputs;</td></tr>
<tr><td class="h">1937</td><td colspan="7"></td></tr><tr><td class="h">1938</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1940</td><td colspan="7"></td></tr><tr><td class="h">1941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _open_testhandles {</td></tr>
<tr><td class="h">1942</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1942">44</a></div></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1943</td><td colspan="7"></td></tr><tr><td class="h">1944</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1944">50</a></div></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;{Opened_Testhandles};</td></tr>
<tr><td class="h">1945</td><td colspan="7"></td></tr><tr><td class="h">1946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We dup STDOUT and STDERR so people can change them in their</td></tr>
<tr><td class="h">1947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# test suites while still getting normal test output.</td></tr>
<tr><td class="h">1948</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1948">50</a></div></td><td></td><td></td><td></td><td><div>686</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( $Testout, &quot;&gt;&amp;STDOUT&quot; ) or die &quot;Can&#39;t dup STDOUT:&nbsp;&nbsp;$!&quot;;</td></tr>
<tr><td class="h">1949</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1949">50</a></div></td><td></td><td></td><td></td><td><div>293</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( $Testerr, &quot;&gt;&amp;STDERR&quot; ) or die &quot;Can&#39;t dup STDERR:&nbsp;&nbsp;$!&quot;;</td></tr>
<tr><td class="h">1950</td><td colspan="7"></td></tr><tr><td class="h">1951</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_copy_io_layers( \*STDOUT, $Testout );</td></tr>
<tr><td class="h">1952</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_copy_io_layers( \*STDERR, $Testerr );</td></tr>
<tr><td class="h">1953</td><td colspan="7"></td></tr><tr><td class="h">1954</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Opened_Testhandles} = 1;</td></tr>
<tr><td class="h">1955</td><td colspan="7"></td></tr><tr><td class="h">1956</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1958</td><td colspan="7"></td></tr><tr><td class="h">1959</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _copy_io_layers {</td></tr>
<tr><td class="h">1960</td><td><div class="c3">88</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1960">88</a></div></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $src, $dst ) = @_;</td></tr>
<tr><td class="h">1961</td><td colspan="7"></td></tr><tr><td class="h">1962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(</td></tr>
<tr><td class="h">1963</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub {</td></tr>
<tr><td class="h">1964</td><td><div class="c3">88</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1964">88</a></div></td><td></td><td><div>13930</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require PerlIO;</td></tr>
<tr><td class="h">1965</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>416</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @src_layers = PerlIO::get_layers($src);</td></tr>
<tr><td class="h">1966</td><td colspan="7"></td></tr><tr><td class="h">1967</td><td><div class="c3">88</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1967">50</a></div></td><td></td><td></td><td></td><td><div>275</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_apply_layers($dst, @src_layers) if @src_layers;</td></tr>
<tr><td class="h">1968</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1969</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>344</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1970</td><td colspan="7"></td></tr><tr><td class="h">1971</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1973</td><td colspan="7"></td></tr><tr><td class="h">1974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _apply_layers {</td></tr>
<tr><td class="h">1975</td><td><div class="c3">88</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1975">88</a></div></td><td></td><td><div>137</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($fh, @layers) = @_;</td></tr>
<tr><td class="h">1976</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %seen;</td></tr>
<tr><td class="h">1977</td><td><div class="c3">88</div><div class="c3">176</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L1977">100</a></div></td><td></td><td></td><td></td><td><div>102</div><div>659</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @unique = grep { $_ ne &#39;unix&#39; and !$seen{$_}++ } @layers;</td></tr>
<tr><td class="h">1978</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>676</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;binmode($fh, join(&quot;:&quot;, &quot;&quot;, &quot;raw&quot;, @unique));</td></tr>
<tr><td class="h">1979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1980</td><td colspan="7"></td></tr><tr><td class="h">1981</td><td colspan="7"></td></tr><tr><td class="h">1982 - 1988</td><td colspan="6"></td><td class="s"><pre>=item reset_outputs

&nbsp;&nbsp;$tb-&gt;reset_outputs;

Resets all the output filehandles back to their defaults.

=cut</pre></td></tr>
<tr><td class="h">1989</td><td colspan="7"></td></tr><tr><td class="h">1990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub reset_outputs {</td></tr>
<tr><td class="h">1991</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L1991">44</a></div></td><td><div class="c3">1</div></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1992</td><td colspan="7"></td></tr><tr><td class="h">1993</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($Testout);</td></tr>
<tr><td class="h">1994</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;failure_output($Testerr);</td></tr>
<tr><td class="h">1995</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;todo_output&nbsp;&nbsp;&nbsp;($Testout);</td></tr>
<tr><td class="h">1996</td><td colspan="7"></td></tr><tr><td class="h">1997</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1999</td><td colspan="7"></td></tr><tr><td class="h">2000 - 2014</td><td colspan="6"></td><td class="s"><pre>=item carp

&nbsp;&nbsp;$tb-&gt;carp(@message);

Warns with C&lt;@message&gt; but the message will appear to come from the
point where the original test function was called (C&lt;&lt; $tb-&gt;caller &gt;&gt;).

=item croak

&nbsp;&nbsp;$tb-&gt;croak(@message);

Dies with C&lt;@message&gt; but the message will appear to come from the
point where the original test function was called (C&lt;&lt; $tb-&gt;caller &gt;&gt;).

=cut</pre></td></tr>
<tr><td class="h">2015</td><td colspan="7"></td></tr><tr><td class="h">2016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _message_at_caller {</td></tr>
<tr><td class="h">2017</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2017">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2018</td><td colspan="7"></td></tr><tr><td class="h">2019</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">2020</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $pack, $file, $line ) = $self-&gt;caller;</td></tr>
<tr><td class="h">2021</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join( &quot;&quot;, @_ ) . &quot; at $file line $line.\n&quot;;</td></tr>
<tr><td class="h">2022</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2023</td><td colspan="7"></td></tr><tr><td class="h">2024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub carp {</td></tr>
<tr><td class="h">2025</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2025">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2026</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return warn $self-&gt;_message_at_caller(@_);</td></tr>
<tr><td class="h">2027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2028</td><td colspan="7"></td></tr><tr><td class="h">2029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub croak {</td></tr>
<tr><td class="h">2030</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2030">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2031</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return die $self-&gt;_message_at_caller(@_);</td></tr>
<tr><td class="h">2032</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2033</td><td colspan="7"></td></tr><tr><td class="h">2034</td><td colspan="7"></td></tr><tr><td class="h">2035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">2036</td><td colspan="7"></td></tr><tr><td class="h">2037</td><td colspan="7"></td></tr><tr><td class="h">2038 - 2054</td><td colspan="6"></td><td class="s"><pre>=head2 Test Status and Info

=over 4

=item B&lt;current_test&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $curr_test = $Test-&gt;current_test;
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;current_test($num);

Gets/sets the current test number we&#39;re on.&nbsp;&nbsp;You usually shouldn&#39;t
have to set this.

If set forward, the details of the missing tests are filled in as &#39;unknown&#39;.
if set backward, the details of the intervening tests are deleted.&nbsp;&nbsp;You
can erase history if you really want to.

=cut</pre></td></tr>
<tr><td class="h">2055</td><td colspan="7"></td></tr><tr><td class="h">2056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub current_test {</td></tr>
<tr><td class="h">2057</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2057">44</a></div></td><td><div class="c3">1</div></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $num ) = @_;</td></tr>
<tr><td class="h">2058</td><td colspan="7"></td></tr><tr><td class="h">2059</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>143</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">2060</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2060">50</a></div></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $num ) {</td></tr>
<tr><td class="h">2061</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test} = $num;</td></tr>
<tr><td class="h">2062</td><td colspan="7"></td></tr><tr><td class="h">2063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the test counter is being pushed forward fill in the details.</td></tr>
<tr><td class="h">2064</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test_results = $self-&gt;{Test_Results};</td></tr>
<tr><td class="h">2065</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2065">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2065">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $num &gt; @$test_results ) {</td></tr>
<tr><td class="h">2066</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2066">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $start = @$test_results ? @$test_results : 0;</td></tr>
<tr><td class="h">2067</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( $start .. $num - 1 ) {</td></tr>
<tr><td class="h">2068</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_results-&gt;[$_] = &amp;share(</td></tr>
<tr><td class="h">2069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">2070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">2071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; undef,</td></tr>
<tr><td class="h">2072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;incrementing test number&#39;,</td></tr>
<tr><td class="h">2073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;unknown&#39;,</td></tr>
<tr><td class="h">2074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; undef</td></tr>
<tr><td class="h">2075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2076</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">2077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If backward, wipe history.&nbsp;&nbsp;Its their funeral.</td></tr>
<tr><td class="h">2080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num &lt; @$test_results ) {</td></tr>
<tr><td class="h">2081</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$#{$test_results} = $num - 1;</td></tr>
<tr><td class="h">2082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2084</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">2085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2086</td><td colspan="7"></td></tr><tr><td class="h">2087 - 2102</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is_passing&gt;

&nbsp;&nbsp;&nbsp;my $ok = $builder-&gt;is_passing;

Indicates if the test suite is currently passing.

More formally, it will be false if anything has happened which makes
it impossible for the test suite to pass.&nbsp;&nbsp;True otherwise.

For example, if no tests have run C&lt;is_passing()&gt; will be true because
even though a suite with no tests is a failure you can add a passing
test to it and start passing.

Don&#39;t think about it too much.

=cut</pre></td></tr>
<tr><td class="h">2103</td><td colspan="7"></td></tr><tr><td class="h">2104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_passing {</td></tr>
<tr><td class="h">2105</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2105">44</a></div></td><td><div class="c3">1</div></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2106</td><td colspan="7"></td></tr><tr><td class="h">2107</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2107">50</a></div></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @_ ) {</td></tr>
<tr><td class="h">2108</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Is_Passing} = shift;</td></tr>
<tr><td class="h">2109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2110</td><td colspan="7"></td></tr><tr><td class="h">2111</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Is_Passing};</td></tr>
<tr><td class="h">2112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2113</td><td colspan="7"></td></tr><tr><td class="h">2114</td><td colspan="7"></td></tr><tr><td class="h">2115 - 2124</td><td colspan="6"></td><td class="s"><pre>=item B&lt;summary&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my @tests = $Test-&gt;summary;

A simple summary of the tests so far.&nbsp;&nbsp;True for pass, false for fail.
This is a logical pass/fail, so todos are passes.

Of course, test #1 is $tests[0], etc...

=cut</pre></td></tr>
<tr><td class="h">2125</td><td colspan="7"></td></tr><tr><td class="h">2126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub summary {</td></tr>
<tr><td class="h">2127</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2127">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self) = shift;</td></tr>
<tr><td class="h">2128</td><td colspan="7"></td></tr><tr><td class="h">2129</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map { $_-&gt;{&#39;ok&#39;} } @{ $self-&gt;{Test_Results} };</td></tr>
<tr><td class="h">2130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2131</td><td colspan="7"></td></tr><tr><td class="h">2132 - 2179</td><td colspan="6"></td><td class="s"><pre>=item B&lt;details&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my @tests = $Test-&gt;details;

Like C&lt;summary()&gt;, but with a lot more detail.

&nbsp;&nbsp;&nbsp;&nbsp;$tests[$test_num - 1] = 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &#39;ok&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; is the test considered a pass?
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok&nbsp;&nbsp;=&gt; did it literally say &#39;ok&#39;?
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; name of the test (if any)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; type of test (if any, see below).
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; reason for the above (if any)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};

&#39;ok&#39; is true if Test::Harness will consider the test to be a pass.

&#39;actual_ok&#39; is a reflection of whether or not the test literally
printed &#39;ok&#39; or &#39;not ok&#39;.&nbsp;&nbsp;This is for examining the result of &#39;todo&#39;
tests.

&#39;name&#39; is the name of the test.

&#39;type&#39; indicates if it was a special test.&nbsp;&nbsp;Normal tests have a type
of &#39;&#39;.&nbsp;&nbsp;Type can be one of the following:

&nbsp;&nbsp;&nbsp;&nbsp;skip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;see skip()
&nbsp;&nbsp;&nbsp;&nbsp;todo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;see todo()
&nbsp;&nbsp;&nbsp;&nbsp;todo_skip&nbsp;&nbsp;&nbsp;see todo_skip()
&nbsp;&nbsp;&nbsp;&nbsp;unknown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;see below

Sometimes the Test::Builder test counter is incremented without it
printing any test output, for example, when C&lt;current_test()&gt; is changed.
In these cases, Test::Builder doesn&#39;t know the result of the test, so
its type is &#39;unknown&#39;.&nbsp;&nbsp;These details for these tests are filled in.
They are considered ok, but the name and actual_ok is left C&lt;undef&gt;.

For example &quot;not ok 23 - hole count # TODO insufficient donuts&quot; would
result in this structure:

&nbsp;&nbsp;&nbsp;&nbsp;$tests[22] =&nbsp;&nbsp;&nbsp;&nbsp;# 23 - 1, since arrays start from 0.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ ok&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,&nbsp;&nbsp;&nbsp;# logically, the test passed since its todo
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; 0,&nbsp;&nbsp;&nbsp;# in absolute terms, it failed
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;hole count&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;todo&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;insufficient donuts&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};

=cut</pre></td></tr>
<tr><td class="h">2180</td><td colspan="7"></td></tr><tr><td class="h">2181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub details {</td></tr>
<tr><td class="h">2182</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2182">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2183</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @{ $self-&gt;{Test_Results} };</td></tr>
<tr><td class="h">2184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2185</td><td colspan="7"></td></tr><tr><td class="h">2186 - 2208</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $todo_reason = $Test-&gt;todo;
&nbsp;&nbsp;&nbsp;&nbsp;my $todo_reason = $Test-&gt;todo($pack);

If the current tests are considered &quot;TODO&quot; it will return the reason,
if any.&nbsp;&nbsp;This reason can come from a C&lt;$TODO&gt; variable or the last call
to C&lt;todo_start()&gt;.

Since a TODO test does not need a reason, this function can return an
empty string even when inside a TODO block.&nbsp;&nbsp;Use C&lt;&lt; $Test-&gt;in_todo &gt;&gt;
to determine if you are currently inside a TODO block.

C&lt;todo()&gt; is about finding the right package to look for C&lt;$TODO&gt; in.&nbsp;&nbsp;It&#39;s
pretty good at guessing the right package to look at.&nbsp;&nbsp;It first looks for
the caller based on C&lt;$Level + 1&gt;, since C&lt;todo()&gt; is usually called inside
a test function.&nbsp;&nbsp;As a last resort it will use C&lt;exported_to()&gt;.

Sometimes there is some confusion about where todo() should be looking
for the C&lt;$TODO&gt; variable.&nbsp;&nbsp;If you want to be sure, tell it explicitly
what $pack to use.

=cut</pre></td></tr>
<tr><td class="h">2209</td><td colspan="7"></td></tr><tr><td class="h">2210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo {</td></tr>
<tr><td class="h">2211</td><td><div class="c3">417</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2211">417</a></div></td><td><div class="c3">1</div></td><td><div>455</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack ) = @_;</td></tr>
<tr><td class="h">2212</td><td colspan="7"></td></tr><tr><td class="h">2213</td><td><div class="c3">417</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2213">100</a></div></td><td></td><td></td><td></td><td><div>815</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Todo} if defined $self-&gt;{Todo};</td></tr>
<tr><td class="h">2214</td><td colspan="7"></td></tr><tr><td class="h">2215</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>691</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">2216</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>707</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $todo = $self-&gt;find_TODO($pack);</td></tr>
<tr><td class="h">2217</td><td><div class="c3">413</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2217">50</a></div></td><td></td><td></td><td></td><td><div>633</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $todo if defined $todo;</td></tr>
<tr><td class="h">2218</td><td colspan="7"></td></tr><tr><td class="h">2219</td><td><div class="c3">413</div></td><td></td><td></td><td></td><td></td><td><div>633</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39;;</td></tr>
<tr><td class="h">2220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2221</td><td colspan="7"></td></tr><tr><td class="h">2222 - 2235</td><td colspan="6"></td><td class="s"><pre>=item B&lt;find_TODO&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $todo_reason = $Test-&gt;find_TODO();
&nbsp;&nbsp;&nbsp;&nbsp;my $todo_reason = $Test-&gt;find_TODO($pack);

Like C&lt;todo()&gt; but only returns the value of C&lt;$TODO&gt; ignoring
C&lt;todo_start()&gt;.

Can also be used to set C&lt;$TODO&gt; to a new value while returning the
old value:

&nbsp;&nbsp;&nbsp;&nbsp;my $old_reason = $Test-&gt;find_TODO($pack, 1, $new_reason);

=cut</pre></td></tr>
<tr><td class="h">2236</td><td colspan="7"></td></tr><tr><td class="h">2237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub find_TODO {</td></tr>
<tr><td class="h">2238</td><td><div class="c3">1243</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2238">1243</a></div></td><td><div class="c3">1</div></td><td><div>1292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack, $set, $new_value ) = @_;</td></tr>
<tr><td class="h">2239</td><td colspan="7"></td></tr><tr><td class="h">2240</td><td><div class="c3">1243</div></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L2240">33</a></div></td><td></td><td></td><td><div>2723</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pack = $pack || $self-&gt;caller(1) || $self-&gt;exported_to;</td></tr>
<tr><td class="h">2241</td><td><div class="c3">1243</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2241">50</a></div></td><td></td><td></td><td></td><td><div>1805</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $pack;</td></tr>
<tr><td class="h">2242</td><td colspan="7"></td></tr><tr><td class="h">2243</td><td><div class="c3">44</div><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2243">44</a></div></td><td></td><td><div>205</div><div>51</div><div>42466</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;&nbsp;&nbsp;&nbsp;&nbsp;## no critic</td></tr>
<tr><td class="h">2244</td><td><div class="c3">1243</div><div class="c3">1243</div></td><td></td><td></td><td></td><td></td><td><div>982</div><div>2442</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_value = ${ $pack . &#39;::TODO&#39; };</td></tr>
<tr><td class="h">2245</td><td><div class="c3">1243</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2245">50</a></div></td><td></td><td></td><td></td><td><div>1775</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$set and ${ $pack . &#39;::TODO&#39; } = $new_value;</td></tr>
<tr><td class="h">2246</td><td><div class="c3">1243</div></td><td></td><td></td><td></td><td></td><td><div>2860</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">2247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2248</td><td colspan="7"></td></tr><tr><td class="h">2249 - 2255</td><td colspan="6"></td><td class="s"><pre>=item B&lt;in_todo&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $in_todo = $Test-&gt;in_todo;

Returns true if the test is currently inside a TODO block.

=cut</pre></td></tr>
<tr><td class="h">2256</td><td colspan="7"></td></tr><tr><td class="h">2257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub in_todo {</td></tr>
<tr><td class="h">2258</td><td><div class="c3">866</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2258">866</a></div></td><td><div class="c3">1</div></td><td><div>813</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2259</td><td colspan="7"></td></tr><tr><td class="h">2260</td><td><div class="c3">866</div></td><td></td><td></td><td></td><td></td><td><div>897</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">2261</td><td><div class="c3">866</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2261">100</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L2261">67</a></div></td><td></td><td></td><td><div>2164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( defined $self-&gt;{Todo} || $self-&gt;find_TODO ) ? 1 : 0;</td></tr>
<tr><td class="h">2262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2263</td><td colspan="7"></td></tr><tr><td class="h">2264 - 2305</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo_start&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_start();
&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_start($message);

This method allows you declare all subsequent tests as TODO tests, up until
the C&lt;todo_end&gt; method has been called.

The C&lt;TODO:&gt; and C&lt;$TODO&gt; syntax is generally pretty good about figuring out
whether or not we&#39;re in a TODO test.&nbsp;&nbsp;However, often we find that this is not
possible to determine (such as when we want to use C&lt;$TODO&gt; but
the tests are being executed in other packages which can&#39;t be inferred
beforehand).

Note that you can use this to nest &quot;todo&quot; tests

 $Test-&gt;todo_start(&#39;working on this&#39;);
 # lots of code
 $Test-&gt;todo_start(&#39;working on that&#39;);
 # more code
 $Test-&gt;todo_end;
 $Test-&gt;todo_end;

This is generally not recommended, but large testing systems often have weird
internal needs.

We&#39;ve tried to make this also work with the TODO: syntax, but it&#39;s not
guaranteed and its use is also discouraged:

 TODO: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $TODO = &#39;We have work to do!&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_start(&#39;working on this&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# lots of code
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_start(&#39;working on that&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# more code
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_end;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;todo_end;
 }

Pick one style or another of &quot;TODO&quot; to be on the safe side.

=cut</pre></td></tr>
<tr><td class="h">2306</td><td colspan="7"></td></tr><tr><td class="h">2307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_start {</td></tr>
<tr><td class="h">2308</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2308">4</a></div></td><td><div class="c3">1</div></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2309</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2309">50</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $message = @_ ? shift : &#39;&#39;;</td></tr>
<tr><td class="h">2310</td><td colspan="7"></td></tr><tr><td class="h">2311</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo}++;</td></tr>
<tr><td class="h">2312</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2312">50</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;in_todo ) {</td></tr>
<tr><td class="h">2313</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $self-&gt;{Todo_Stack} } =&gt; $self-&gt;todo;</td></tr>
<tr><td class="h">2314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2315</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo} = $message;</td></tr>
<tr><td class="h">2316</td><td colspan="7"></td></tr><tr><td class="h">2317</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2319</td><td colspan="7"></td></tr><tr><td class="h">2320 - 2327</td><td colspan="6"></td><td class="s"><pre>=item C&lt;todo_end&gt;

 $Test-&gt;todo_end;

Stops running tests as &quot;TODO&quot; tests.&nbsp;&nbsp;This method is fatal if called without a
preceding C&lt;todo_start&gt; method call.

=cut</pre></td></tr>
<tr><td class="h">2328</td><td colspan="7"></td></tr><tr><td class="h">2329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_end {</td></tr>
<tr><td class="h">2330</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2330">4</a></div></td><td><div class="c3">1</div></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2331</td><td colspan="7"></td></tr><tr><td class="h">2332</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2332">50</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Start_Todo} ) {</td></tr>
<tr><td class="h">2333</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&#39;todo_end() called without todo_start()&#39;);</td></tr>
<tr><td class="h">2334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2335</td><td colspan="7"></td></tr><tr><td class="h">2336</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo}--;</td></tr>
<tr><td class="h">2337</td><td colspan="7"></td></tr><tr><td class="h">2338</td><td><div class="c3">4</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2338">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L2338">33</a></div></td><td></td><td></td><td><div>12</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Start_Todo} &amp;&amp; @{ $self-&gt;{Todo_Stack} } ) {</td></tr>
<tr><td class="h">2339</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo} = pop @{ $self-&gt;{Todo_Stack} };</td></tr>
<tr><td class="h">2340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">2342</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{Todo};</td></tr>
<tr><td class="h">2343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2344</td><td colspan="7"></td></tr><tr><td class="h">2345</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2347</td><td colspan="7"></td></tr><tr><td class="h">2348 - 2360</td><td colspan="6"></td><td class="s"><pre>=item B&lt;caller&gt;

&nbsp;&nbsp;&nbsp;&nbsp;my $package = $Test-&gt;caller;
&nbsp;&nbsp;&nbsp;&nbsp;my($pack, $file, $line) = $Test-&gt;caller;
&nbsp;&nbsp;&nbsp;&nbsp;my($pack, $file, $line) = $Test-&gt;caller($height);

Like the normal C&lt;caller()&gt;, except it reports according to your C&lt;level()&gt;.

C&lt;$height&gt; will be added to the C&lt;level()&gt;.

If C&lt;caller()&gt; winds up off the top of the stack it report the highest context.

=cut</pre></td></tr>
<tr><td class="h">2361</td><td colspan="7"></td></tr><tr><td class="h">2362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub caller {&nbsp;&nbsp;&nbsp;&nbsp;## no critic (Subroutines::ProhibitBuiltinHomonyms)</td></tr>
<tr><td class="h">2363</td><td><div class="c3">1247</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2363">1247</a></div></td><td><div class="c3">1</div></td><td><div>1150</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $height ) = @_;</td></tr>
<tr><td class="h">2364</td><td><div class="c3">1247</div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L2364">100</a></div></td><td></td><td></td><td><div>1823</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$height ||= 0;</td></tr>
<tr><td class="h">2365</td><td colspan="7"></td></tr><tr><td class="h">2366</td><td><div class="c3">1247</div></td><td></td><td></td><td></td><td></td><td><div>1636</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $level = $self-&gt;level + $height + 1;</td></tr>
<tr><td class="h">2367</td><td><div class="c3">1247</div></td><td></td><td></td><td></td><td></td><td><div>1060</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @caller;</td></tr>
<tr><td class="h">2368</td><td><div class="c3">1247</div></td><td></td><td></td><td></td><td></td><td><div>1050</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do {</td></tr>
<tr><td class="h">2369</td><td><div class="c3">1251</div></td><td></td><td></td><td></td><td></td><td><div>7006</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@caller = CORE::caller( $level );</td></tr>
<tr><td class="h">2370</td><td><div class="c3">1251</div></td><td></td><td></td><td></td><td></td><td><div>3621</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level--;</td></tr>
<tr><td class="h">2371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} until @caller;</td></tr>
<tr><td class="h">2372</td><td><div class="c3">1247</div></td><td><div class="c3" title="T/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2372">100</a></div></td><td></td><td></td><td></td><td><div>4872</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray ? @caller : $caller[0];</td></tr>
<tr><td class="h">2373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2374</td><td colspan="7"></td></tr><tr><td class="h">2375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">2376</td><td colspan="7"></td></tr><tr><td class="h">2377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">2378</td><td colspan="7"></td></tr><tr><td class="h">2379 - 2391</td><td colspan="6"></td><td class="s"><pre>=begin _private

=over 4

=item B&lt;_sanity_check&gt;

&nbsp;&nbsp;$self-&gt;_sanity_check();

Runs a bunch of end of test sanity checks to make sure reality came
through ok.&nbsp;&nbsp;If anything is wrong it will die with a fairly friendly
error message.

=cut</pre></td></tr>
<tr><td class="h">2392</td><td colspan="7"></td></tr><tr><td class="h">2393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&#39;#</td></tr>
<tr><td class="h">2394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _sanity_check {</td></tr>
<tr><td class="h">2395</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2395">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2396</td><td colspan="7"></td></tr><tr><td class="h">2397</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( $self-&gt;{Curr_Test} &lt; 0, &#39;Says here you ran a negative number of tests!&#39; );</td></tr>
<tr><td class="h">2398</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( $self-&gt;{Curr_Test} != @{ $self-&gt;{Test_Results} },</td></tr>
<tr><td class="h">2399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Somehow you got a different number of results than tests ran!&#39; );</td></tr>
<tr><td class="h">2400</td><td colspan="7"></td></tr><tr><td class="h">2401</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2403</td><td colspan="7"></td></tr><tr><td class="h">2404 - 2412</td><td colspan="6"></td><td class="s"><pre>=item B&lt;_whoa&gt;

&nbsp;&nbsp;$self-&gt;_whoa($check, $description);

A sanity check, similar to C&lt;assert()&gt;.&nbsp;&nbsp;If the C&lt;$check&gt; is true, something
has gone horribly wrong.&nbsp;&nbsp;It will die with the given C&lt;$description&gt; and
a note to contact the author.

=cut</pre></td></tr>
<tr><td class="h">2413</td><td colspan="7"></td></tr><tr><td class="h">2414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _whoa {</td></tr>
<tr><td class="h">2415</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2415">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $check, $desc ) = @_;</td></tr>
<tr><td class="h">2416</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2416">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($check) {</td></tr>
<tr><td class="h">2417</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">2418</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&lt;&lt;&quot;WHOA&quot;);</td></tr>
<tr><td class="h">2419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA!&nbsp;&nbsp;$desc</td></tr>
<tr><td class="h">2420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">This should never happen!&nbsp;&nbsp;Please contact the author immediately!</td></tr>
<tr><td class="h">2421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA</td></tr>
<tr><td class="h">2422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2423</td><td colspan="7"></td></tr><tr><td class="h">2424</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2425</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2426</td><td colspan="7"></td></tr><tr><td class="h">2427 - 2436</td><td colspan="6"></td><td class="s"><pre>=item B&lt;_my_exit&gt;

&nbsp;&nbsp;_my_exit($exit_num);

Perl seems to have some trouble with exiting inside an C&lt;END&gt; block.
5.6.1 does some odd things.&nbsp;&nbsp;Instead, this function edits C&lt;$?&gt;
directly.&nbsp;&nbsp;It should B&lt;only&gt; be called from inside an C&lt;END&gt; block.
It doesn&#39;t actually exit, that&#39;s your job.

=cut</pre></td></tr>
<tr><td class="h">2437</td><td colspan="7"></td></tr><tr><td class="h">2438</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _my_exit {</td></tr>
<tr><td class="h">2439</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2439">44</a></div></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$? = $_[0];&nbsp;&nbsp;&nbsp;&nbsp;## no critic (Variables::RequireLocalizedPunctuationVars)</td></tr>
<tr><td class="h">2440</td><td colspan="7"></td></tr><tr><td class="h">2441</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">2442</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2443</td><td colspan="7"></td></tr><tr><td class="h">2444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">2445</td><td colspan="7"></td></tr><tr><td class="h">2446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=end _private</td></tr>
<tr><td class="h">2447</td><td colspan="7"></td></tr><tr><td class="h">2448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">2449</td><td colspan="7"></td></tr><tr><td class="h">2450</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ending {</td></tr>
<tr><td class="h">2451</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2451">44</a></div></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2452</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2452">50</a></div></td><td></td><td></td><td></td><td><div>302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;no_ending;</td></tr>
<tr><td class="h">2453</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2453">50</a></div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;{Ending}++;</td></tr>
<tr><td class="h">2454</td><td colspan="7"></td></tr><tr><td class="h">2455</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $real_exit_code = $?;</td></tr>
<tr><td class="h">2456</td><td colspan="7"></td></tr><tr><td class="h">2457</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t bother with an ending if this is a forked copy.&nbsp;&nbsp;Only the parent</td></tr>
<tr><td class="h">2458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# should do the ending.</td></tr>
<tr><td class="h">2459</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2459">50</a></div></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Original_Pid} != $$ ) {</td></tr>
<tr><td class="h">2460</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2462</td><td colspan="7"></td></tr><tr><td class="h">2463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Ran tests but never declared a plan or hit done_testing</td></tr>
<tr><td class="h">2464</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2464">50</a></div></td><td><div class="c0"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--condition.html#L2464">33</a></div></td><td></td><td></td><td><div>160</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Have_Plan} and $self-&gt;{Curr_Test} ) {</td></tr>
<tr><td class="h">2465</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2466</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;Tests were run but no plan was declared and done_testing() was not seen.&quot;);</td></tr>
<tr><td class="h">2467</td><td colspan="7"></td></tr><tr><td class="h">2468</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2468">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($real_exit_code) {</td></tr>
<tr><td class="h">2469</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like your test exited with $real_exit_code just after $self-&gt;{Curr_Test}.</td></tr>
<tr><td class="h">2471</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2472</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2473</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2473">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($real_exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2475</td><td colspan="7"></td></tr><tr><td class="h">2476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# But if the tests ran, handle exit code.</td></tr>
<tr><td class="h">2477</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test_results = $self-&gt;{Test_Results};</td></tr>
<tr><td class="h">2478</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2478">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(@$test_results) {</td></tr>
<tr><td class="h">2479</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_failed = grep !$_-&gt;{&#39;ok&#39;}, @{$test_results}[ 0 .. $self-&gt;{Curr_Test} - 1 ];</td></tr>
<tr><td class="h">2480</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2480">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($num_failed &gt; 0) {</td></tr>
<tr><td class="h">2481</td><td colspan="7"></td></tr><tr><td class="h">2482</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2482">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $exit_code = $num_failed &lt;= 254 ? $num_failed : 254;</td></tr>
<tr><td class="h">2483</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2483">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2484</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2486</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2486">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit(254) &amp;&amp; return;</td></tr>
<tr><td class="h">2487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2488</td><td colspan="7"></td></tr><tr><td class="h">2489</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Exit if plan() was never called.&nbsp;&nbsp;This is so &quot;require Test::Simple&quot;</td></tr>
<tr><td class="h">2490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# doesn&#39;t puke.</td></tr>
<tr><td class="h">2491</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2491">50</a></div></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Have_Plan} ) {</td></tr>
<tr><td class="h">2492</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2494</td><td colspan="7"></td></tr><tr><td class="h">2495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t do an ending if we bailed out.</td></tr>
<tr><td class="h">2496</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2496">50</a></div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Bailed_Out} ) {</td></tr>
<tr><td class="h">2497</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2498</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Figure out if we passed or failed and print helpful messages.</td></tr>
<tr><td class="h">2501</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_results = $self-&gt;{Test_Results};</td></tr>
<tr><td class="h">2502</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2502">50</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2502">0</a></div><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2502">0</a></div></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@$test_results) {</td></tr>
<tr><td class="h">2503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The plan?&nbsp;&nbsp;We have no plan.</td></tr>
<tr><td class="h">2504</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2504">50</a></div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{No_Plan} ) {</td></tr>
<tr><td class="h">2505</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2505">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($self-&gt;{Curr_Test}) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">2506</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">2507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2508</td><td colspan="7"></td></tr><tr><td class="h">2509</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Auto-extended arrays and elements which aren&#39;t explicitly</td></tr>
<tr><td class="h">2510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# filled in with a shared reference will puke under 5.8.0</td></tr>
<tr><td class="h">2511</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ithreads.&nbsp;&nbsp;So we have to fill them in by hand. :(</td></tr>
<tr><td class="h">2512</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $empty_result = &amp;share( {} );</td></tr>
<tr><td class="h">2513</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>258</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $idx ( 0 .. $self-&gt;{Expected_Tests} - 1 ) {</td></tr>
<tr><td class="h">2514</td><td><div class="c3">417</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2514">50</a></div></td><td></td><td></td><td></td><td><div>1679</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_results-&gt;[$idx] = $empty_result</td></tr>
<tr><td class="h">2515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless defined $test_results-&gt;[$idx];</td></tr>
<tr><td class="h">2516</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2517</td><td colspan="7"></td></tr><tr><td class="h">2518</td><td><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>116</div><div>240</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_failed = grep !$_-&gt;{&#39;ok&#39;}, @{$test_results}[ 0 .. $self-&gt;{Curr_Test} - 1 ];</td></tr>
<tr><td class="h">2519</td><td colspan="7"></td></tr><tr><td class="h">2520</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_extra = $self-&gt;{Curr_Test} - $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">2521</td><td colspan="7"></td></tr><tr><td class="h">2522</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2522">50</a></div></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $num_extra != 0 ) {</td></tr>
<tr><td class="h">2523</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2523">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s = $self-&gt;{Expected_Tests} == 1 ? &#39;&#39; : &#39;s&#39;;</td></tr>
<tr><td class="h">2524</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2525</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like you planned $self-&gt;{Expected_Tests} test$s but ran $self-&gt;{Curr_Test}.</td></tr>
<tr><td class="h">2526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2527</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2529</td><td colspan="7"></td></tr><tr><td class="h">2530</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2530">50</a></div></td><td></td><td></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($num_failed) {</td></tr>
<tr><td class="h">2531</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_tests = $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">2532</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2532">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s = $num_failed == 1 ? &#39;&#39; : &#39;s&#39;;</td></tr>
<tr><td class="h">2533</td><td colspan="7"></td></tr><tr><td class="h">2534</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2534">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $qualifier = $num_extra == 0 ? &#39;&#39; : &#39; run&#39;;</td></tr>
<tr><td class="h">2535</td><td colspan="7"></td></tr><tr><td class="h">2536</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2537</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like you failed $num_failed test$s of $num_tests$qualifier.</td></tr>
<tr><td class="h">2538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2539</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2541</td><td colspan="7"></td></tr><tr><td class="h">2542</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2542">50</a></div></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($real_exit_code) {</td></tr>
<tr><td class="h">2543</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like your test exited with $real_exit_code just after $self-&gt;{Curr_Test}.</td></tr>
<tr><td class="h">2545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2546</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2547</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2547">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($real_exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2549</td><td colspan="7"></td></tr><tr><td class="h">2550</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $exit_code;</td></tr>
<tr><td class="h">2551</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2551">50</a></div><div class="c0" title="-/F"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2551">50</a></div></td><td></td><td></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($num_failed) {</td></tr>
<tr><td class="h">2552</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2552">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = $num_failed &lt;= 254 ? $num_failed : 254;</td></tr>
<tr><td class="h">2553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num_extra != 0 ) {</td></tr>
<tr><td class="h">2555</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = 255;</td></tr>
<tr><td class="h">2556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">2558</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = 0;</td></tr>
<tr><td class="h">2559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2560</td><td colspan="7"></td></tr><tr><td class="h">2561</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2561">50</a></div></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $self-&gt;{Skip_All} ) {</td></tr>
<tr><td class="h">2564</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2564">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit(0) &amp;&amp; return;</td></tr>
<tr><td class="h">2565</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif($real_exit_code) {</td></tr>
<tr><td class="h">2567</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2568</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like your test exited with $real_exit_code before it could output anything.</td></tr>
<tr><td class="h">2569</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2570</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2571</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2571">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($real_exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">2574</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;No tests run!\n&quot;);</td></tr>
<tr><td class="h">2575</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2576</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2576">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit(255) &amp;&amp; return;</td></tr>
<tr><td class="h">2577</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2578</td><td colspan="7"></td></tr><tr><td class="h">2579</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;is_passing(0);</td></tr>
<tr><td class="h">2580</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( 1, &quot;We fell off the end of _ending()&quot; );</td></tr>
<tr><td class="h">2581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2582</td><td colspan="7"></td></tr><tr><td class="h">2583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">END {</td></tr>
<tr><td class="h">2584</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--branch.html#L2584">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-lib-perl5-5-20-1-Test-Builder-pm--subroutine.html#L2584">44</a></div></td><td></td><td><div>1234</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;_ending if defined $Test;</td></tr>
<tr><td class="h">2585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2586</td><td colspan="7"></td></tr><tr><td class="h">2587 - 2656</td><td colspan="6"></td><td class="s"><pre>=head1 EXIT CODES

If all your tests passed, Test::Builder will exit with zero (which is
normal).&nbsp;&nbsp;If anything failed it will exit with how many failed.&nbsp;&nbsp;If
you run less (or more) tests than you planned, the missing (or extras)
will be considered failures.&nbsp;&nbsp;If no tests were ever run Test::Builder
will throw a warning and exit with 255.&nbsp;&nbsp;If the test died, even after
having successfully completed all its tests, it will still be
considered a failure and will exit with 255.

So the exit codes are...

&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all tests successful
&nbsp;&nbsp;&nbsp;&nbsp;255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test died or all passed but wrong # of tests run
&nbsp;&nbsp;&nbsp;&nbsp;any other number&nbsp;&nbsp;&nbsp;&nbsp;how many failed (including missing or extras)

If you fail more than 254 tests, it will be reported as 254.

=head1 THREADS

In perl 5.8.1 and later, Test::Builder is thread-safe.&nbsp;&nbsp;The test
number is shared amongst all threads.&nbsp;&nbsp;This means if one thread sets
the test number using C&lt;current_test()&gt; they will all be effected.

While versions earlier than 5.8.1 had threads they contain too many
bugs to support.

Test::Builder is only thread-aware if threads.pm is loaded I&lt;before&gt;
Test::Builder.

=head1 MEMORY

An informative hash, accessible via C&lt;&lt;details()&gt;&gt;, is stored for each
test you perform.&nbsp;&nbsp;So memory usage will scale linearly with each test
run. Although this is not a problem for most test suites, it can
become an issue if you do large (hundred thousands to million)
combinatorics tests in the same run.

In such cases, you are advised to either split the test file into smaller
ones, or use a reverse approach, doing &quot;normal&quot; (code) compares and
triggering fail() should anything go unexpected.

Future versions of Test::Builder will have a way to turn history off.


=head1 EXAMPLES

CPAN can provide the best examples.&nbsp;&nbsp;Test::Simple, Test::More,
Test::Exception and Test::Differences all use Test::Builder.

=head1 SEE ALSO

Test::Simple, Test::More, Test::Harness

=head1 AUTHORS

Original code by chromatic, maintained by Michael G Schwern
E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt;

=head1 COPYRIGHT

Copyright 2002-2008 by chromatic E&lt;lt&gt;chromatic@wgz.orgE&lt;gt&gt; and
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Michael G Schwern E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt;.

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

See F&lt;http://www.perl.com/perl/misc/Artistic.html&gt;

=cut</pre></td></tr>
<tr><td class="h">2657</td><td colspan="7"></td></tr><tr><td class="h">2658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">2659</td><td colspan="7"></td></tr></table>
</body>
</html>
